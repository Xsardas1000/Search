6
1
0
2

 
r
a

M
2

 

 
 
]
T
C
h
t
a
m

.

[
 
 

1
v
2
2
8
0
0

.

3
0
6
1
:
v
i
X
r
a

Hilbertian toposes and Îµ-toposes

Fabio Pasquali

Paris Diderot University

Introduction

Hilbertâ€™s epsilon calculus is an extension of Hilbertâ€™s system for classical ï¬rst
order predicates logic by a term-forming operator which replaces the existential
quantiï¬cation. Speciï¬cally, for every well formed formula Ïˆ(x) there exists a
term Îµx

Ïˆ, in which x is not free, such that

âˆƒx.Ïˆ(x) â†’ Ïˆ[Îµx

Ïˆ/x]

Since its introduction Hilbertâ€™s Epsilon calculus has had a variety of application
in many ï¬elds of mathematics, logic, informatics, linguistics, etc. One of the
ï¬rst approaches to the Epsilon calculus in the framework of category theory is
due to J.L.Bell , who introduced in [1] an intuitionistic typed and higher order
version of it using the internal logic of elementary toposes. The calculus pre-
sented by Bell has the constraint that all epsilon terms are closed. That is to
say that epsilon terms exist only for formulas with at most one free variable.
This restriction is motivated by the fact that the presence of epsilon terms with
one (or more) free variable implies the validity of the Axiom of Choice. Hence
toposes collapse to boolean ones [2]. The calculus was called by the author par-
tial epsilon calculus. In [1] the author introduces also the notion of Hilbertian
topos which is the appropriate structure to express the partial epsilon calculus.
In [1] an actual example of Hilbertian topos was not provided.

This paper can be seen as a prosecution of [1]. We give an example of Hilbertian
topos. The relevance of this example is that it underlines the constructive na-
ture of the partial epsilon calculus. In fact we prove that the Martin Hylandâ€™s
Eï¬€ective topos [3] is Hilbertian. Moreover we study the full epsilon calculus
in toposes. It turns out that the presence of all epsilon terms is a condition
stronger than the Axiom of Choice, in fact we prove that the internal logic of a
topos is the full epsilon calculus if and only if the topos validate the axiom of
choice and every arrow of a non-initial object to the terminal object is epic.

In section 1 we recall the internal calculus of toposes. Then we introduce in
the framework of topos logic the epsilon calculus and the partial epsilon calcu-
lus. In section 2 we recall the Bellâ€™s deï¬nition of Hilbertian topos. Large part
of the section is devoted to prove that the Eï¬€ective topos is Hilbertian. The
characterization theorem of those toposes whose internal logic is the full epsilon
calculus is in 3.

1

1 Epsilon calculus in toposes

We work in the internal language of a given elementary topos E. We brieï¬‚y
recall it below. Details can be found in standard books of topos theory.

Suppose E is an elementary topos. We denote by Î£E the many typed signa-
ture generated by the objects and the arrows of E. Hence the types of Î£E are
the objects of E and these are closed under ï¬nite product types and power types
with all Î·/Î²-conversions. This is to say that, up to Î·/Î²-conversion, the product
type of A and B is a categorical product A Ã— B, the unite type is a terminal
object 1 of E and the power type of A is a categorical power object P(A) of A.

A function symbol f of Î£E with arity A1, A2, ..., An âˆ’â†’ B is an arrow f : A1 Ã—
A2 Ã— ... Ã— An âˆ’â†’ B in E. A relation symbol of Î£E of arity A1, A2, ..., An is a
monic arrow of E with codomain A1 Ã— A2 Ã— ... Ã— An.

Contexts, i.e ï¬nite lists of typed variables

(x1: A1, x2: A2, . . . , xn: An)

will be denoted by capital greek letters. A term is an expression of the form

Î“ | t: A

where Î“ is a context. We write sequents in the following form

Î“ | Ï†1, Ï†2, ...Ï†n âŠ¢ Ï†n+1

to express that all formulas in the sequent are formulas in the context Î“.

As we work in the internal logic of an elementary topos E, a sequent

Î“ | Ï†1, Ï†2, ...Ï†n âŠ¢ Ï†n+1

in the context Î“ is derivable if and only if the monic arrow with codomain Î“
that represents Ï†1 âˆ§ Ï†2 âˆ§ Â· Â· Â· âˆ§ Ï†n factors through the monic arrow that represent
Ï†n+1.

The epsilon calculus

The internal language of an elementary topos is the (intuitionistic higher order
and typed) Îµ-calculus if it validates the following two rules

Î“, x: A | Ïˆ
Î“ | Îµx
Ïˆ: A

Îµ-form

Î“, x: A | Ïˆ

Î“ | âˆƒx: A. Ïˆ âŠ¢ Ïˆ[Îµx

Ïˆ/x]

Îµ-I

provided that A is not the empty type (i.e. the initial object) and the empty
type does not appear among types in Î“.

The rule Îµ-form establish that for every monic Ïˆ with codomain Î“ Ã— A, if A is
not initial, then there is an arrow ÎµÏˆ: Î“ âˆ’â†’ A. This motivates the constraint

2

on A to be not the empty type. For if A is the empty type 0, i.e. 0 is an initial
object of E, then using Îµ-form we get

x: 0 | âŠ¤
âˆ—: 1 | Îµx

âŠ¤: 0

Îµ-form

where Îµx

âŠ¤ is an arrow 1 âˆ’â†’ 0. If such an arrow exists, the topos is degenerate.

If the internal language of an elementary topos validates Îµ-form and Îµ-I, then
the axiom of choice is derivable: take a formula a: A, b: B | F , then we have a
term a: A | Îµb

F : B such that

a: A | âˆƒb: B. F (a, b) âŠ¢ F (a, Îµb

F (a))

which leads to the following

âŠ¤ âŠ¢ âˆ€a: A. [âˆƒb: B. F (a, b) â†’ F (a, Îµb

F (a))]

In toposes, if the axiom of choice is valid, the law of excluded middle is derivable
[2]. This motivates the following deï¬nition.

We say that the internal language of an elementary topos is the partial Îµ-calculus
if it validates the following two rules

x: A | Ïˆ

âˆ—: 1 | Îµx

Ïˆ: A

Îµp-form

x: A | Ïˆ

âˆƒx: A. Ïˆ âŠ¢ Ïˆ[Îµx

Ïˆ/x]

Îµp-I

provided that A is not the empty.

In the partial Îµ-calculus, Îµ-terms are necessarily closed. Or, equivalently, Îµ-
terms exists only for those formulas with at most one free variable. Thus all
Îµ-terms are arrows whose domain is teh terminal object 1. Under this constraint
we can not carry out the previous argument to derive the axiom of choice. In
fact in the partial Îµ-calculus the axiom of choice is not derivable, as we shall see
in next section.

We call Hilbertian toposes those toposes whose internal logic is the partial Îµ-
calculus. And we call Îµ-toposes those toposes whose internal logic is the full
Îµ-calculus. The former class was already studied in [1] and we dedicate the next
section to produce a relevant member of it. The latter is introduced in section
3.

2 Hilbertian toposes

Hilbertian toposes were introduced by Bell in [1] as the appropriate structure
to validate rules of partial epsilon calculus.

We shall denote by Â· ÖŒ Â· and Â· Ö‰ Â· arrows which are monic and epic respectively.

An elementary topos E is Hilbertian if every diagram of the form

X /

p

/ A

/ 1

3

/
/
/
/
/
can be expanded to a commutative diagram of the form

X

/ U /

1

Îµp

X /

/ A

p

/ 1

It is clear that if p: X ÖŒ A is a formula in the context A, say a: A | p(a)
then, by the general theory of topos logic [4], the arrow U ÖŒ 1 corresponds
to the sentence âˆƒa: A p(a). By the universal property of pullback there is an
arrow from U to any pullback of p along Îµp, which is to say that the sequent
âˆƒa: A p(a) âŠ¢ p(Îµp) is valid. Since the other direction is always derivable, the
condition above is equivalent to say that U is isomorphic to the pullback of p
along Îµp. This is also the proof of the following theorem.

Proposition 2.1. The internal logic of an Hilbertian topos is the partial epsilon
calculus exactly when every object A is either initial or the arrow A âˆ’â†’ 1 is
epic.

As remarked in [1], as soon as we admit Îµ-terms with even one free variable,
the axiom of choice is derivable. This is not the case for Hilbertian toposes.
To underline the constructive nature of Hilbertian toposes we show that Martin
Hylandâ€™s Eï¬€ective topos is Hilbertian.

We recall below the deï¬nition of the eï¬€ective topos. This topos can be seen
as the result of the tripos to topos construction applied to the realizability tri-
pos [5]. As triposes do not play any role here, we give a direct presentation of
the eï¬€ective topos and we address the reader to [3] for details.

The eï¬€ective topos

If n and p are natural numbers, we write n.p to denote the application to p of
the partial recursive function coded by n, and we call n.p the Kleene application
of n to p.

Suppose X is a set and Ï†, Ïˆ: X âˆ’â†’ P(N) are function from X to the pow-
erset of the set of natural numbers. We say that Ï† â‰¤ Ïˆ if there exists a number
n such that for every x âˆˆ X and every a âˆˆ Ï†(x) the Kleene application n.a is
deï¬ned and n.a âˆˆ Ïˆ(x). The relation â‰¤ is a preorder on P(N)X and we call it
Kleene realizability order. Moreover we say that n is a track of Ï† â‰¤ Ïˆ. The
poset reï¬‚ection of P(N)X is a Heyting algebra [5]. Binary meets are denoted
by âˆ§ and a top element by âŠ¤X . Pseudo relative complements by â†’. The top
element âŠ¤X is represented by the function on X to P(N) which whose values
are constantly equal to N.

Denote by 1 a chosen singleton set. Members of P(N)1 â‰ƒ P(N) are called
sentences. We say that a sentence Ï† is valid when âŠ¤1 â‰¤ Ï†.

For every set X, and every Ï âˆˆ P(N)XÃ—X we say that Ï is a partial equiva-
lence relation over X if both the sentences

\

\

xâˆˆX

yâˆˆX

Ï(x, y) â†’ Ï(y, x)

4

/
/
/
/
/
/




/
/
/
/
/
\

\

\

xâˆˆX

yâˆˆX

zâˆˆX

Ï(x, y) âˆ§ Ï(y, z) â†’ Ï(x, z)

are valid. If we read the intersection as a universal quantiï¬cation, the two sen-
tences above express the fact that Ï is symmetric and transitive.

Suppose A and B are sets and Ï and Ïƒ are partial equivalence relations over A
and B respectively. F âˆˆ P(N)AÃ—B is said to be a functional relation from the
pair (A, Ï) to the pair (B, Ïƒ) if all the following sentences are valid

\

\

aâˆˆA

bâˆˆB

F (a, b) â†’ Ï(a, a) âˆ§ Ïƒ(b, b)

\

\

\

\

aâˆˆA

aâ€²âˆˆA

bâˆˆB

bâ€²âˆˆB

F (a, b) âˆ§ Ï(a, aâ€²) âˆ§ Ïƒ(b, bâ€²) â†’ F (aâ€², bâ€²)

\

\

\

aâˆˆA

bâˆˆB

bâ€²âˆˆB

F (a, b) âˆ§ F (a, bâ€²) â†’ Ïƒ(b, bâ€²)

\

[Ï(a, a) â†’ [

F (a, b)]

aâˆˆA

bâˆˆB

The ï¬rst and second sentences express the fact that F â€believesâ€ that Ï and Ïƒ
are equality predicates over A and B respectively. Then in particular in the ï¬rst
sentence Ï(a, a) âˆ§ Ïƒ(b, b) plays the role of a top element. The third and fourth
sentences express (if we read the union as an existential quantiï¬cation) the fact
that F behaves like a function from A to B, i.e. it is singled-valued and total.

The eï¬€ective topos Ef f is the category whose objects are pairs (A, Ï) where A is
a set and Ï is a partial equivalence relation over A and an arrow [F ]: (A, Ï) âˆ’â†’
(B, Ïƒ) is an equivalence class of functional relations where G âˆˆ [F ] if and only
if G = F as members of the poset reï¬‚ection of P(N)AÃ—B.

For the rest of the section we freely confuse a morphism of Ef f with any of
its representatives.

Suppose (A, Ï) is an object of Ef f . A member P of P(N)A is said to be a
strict and relational proposition over (A, Ï) if the following sentences are valid

P (x) â†’ Ï(x, x)

\

xâˆˆA

\

\

xâˆˆA

yâˆˆA

Ï(x, y) âˆ§ P (x) â†’ P (y)

As we wrote before for F , these two sentences express the fact that P â€be-
lievesâ€ that Ï is an equality predicate. We say that a monomorphism M of
Ef f , with codomain (A, Ï), is represented by P if M is isomorphic to a monic
ÏP : (A, ÏP ) âˆ’â†’ (A, Ï) where

ÏP (x, y) = Ï(x, y) âˆ§ P (x)

The following properties holds in Ef f , proofs are in [3, 5].

5

1) Every monomorphism M : (A, Ï) âˆ’â†’ (B, Ïƒ) is isomorphic to one of the
form ÏƒP : (B, ÏƒP ) âˆ’â†’ (B, Ïƒ) for some strict and relational proposition P
over (B, Ïƒ).

2) A terminal object of Ef f is (1, âŠ¤1Ã—1). And the unique arrow 1Ï: (A, Ï) âˆ’â†’
(1, âŠ¤1Ã—1) is the functional relation in P(N)AÃ—1 â‰ƒ P(N)A determined by
the following assignment x 7â†’ Ï(x, x).

3) Given a diagram of the form (A, Ï) Ö‰ (U, Î¾) ÖŒ (1, âŠ¤1Ã—1), the monomor-

phism (U, Î¾) ÖŒ (1, âŠ¤1Ã—1) is represented by

Ï(x, x)

[

xâˆˆA

which is a strict and relational proposition over (1, âŠ¤1Ã—1).

4) For every pair of objects of Ef f , say (A, Ï) and (B, Ïƒ), if f : A âˆ’â†’ B is a

function such that the sentence

\

\

xâˆˆA

yâˆˆA

Ï(x, y) â†’ Ïƒ(f (x), f (y))

is valid, then the assignment

(x, b) 7â†’ Ïƒ(f (x), b) âˆ§ Ï(x, x)

determines an element of P(N)AÃ—B, which is a functional relation from
(A, Ï) to (B, Ïƒ). We denote it by Î“(f ) and we call it the graph of f . Thus
Î“(f ) is (the representative of) a morphism of Ef f from (A, Ï) to (B, Ïƒ).

5) A pullback of a monic ÏƒP : (B, ÏƒP ) âˆ’â†’ (B, Ïƒ) along F : (A, Ï) âˆ’â†’ (B, Ïƒ) is

the monic represented by Q in P(N)A, where

Q(a) = [

F (a, b) âˆ§ P (b)

bâˆˆB

6) An arrow E: (A, Ï) âˆ’â†’ (B, Ïƒ) is epic if and only if the following sentence

is valid

\

[Ïƒ(b, b) â†’ [

E(a, b)]

bâˆˆB

aâˆˆA

Previous points 1) to 5) allow to prove the following lemma.

Lemma 2.2. Under the notation above, if F is of the form Î“(f ) for some
function f : A âˆ’â†’ B, then Q = P â—¦ f âˆ§ Ï in the poset reï¬‚ection of P(N)A.

Proof. Consider the following equalities in the poset reï¬‚ection of P(N)A

Q(a) = [

Î“(f )(a, b) âˆ§ P (b)

bâˆˆB

= [

bâˆˆB

= [

bâˆˆB

Ïƒ(f (a), b) âˆ§ Ï(a, a) âˆ§ P (b)

Ïƒ(f (a), b) âˆ§ Ï(a, a) âˆ§ P (f (a))

= P (f (a)) âˆ§ [

Î“(f )(a, b)

bâˆˆB

= P (f (a)) âˆ§ Ï(a, a)

6

where in passing from second to third line we used the fact that P is relational
and in the last line we use the fact that Î“(f ) is functional (and hence total).

Corollary 2.3. If (A, Ï) is (1, âŠ¤1Ã—1) and if F is of the form Î“(f ) for some
function f : 1 âˆ’â†’ B, then Q = P â—¦ f in the poset reï¬‚ection of P(N)A.

Proof. Straightforward.

We can now prove the main proposition of the section.

Proposition 2.4. Ef f is Hilbertian.

Proof. Consider the diagram

(A, ÏP ) /

ÏP /

/ (A, Ï)

!Ï

/ 1

It suï¬ƒces to show that there exists an arrow ÎµÏP : (1, âŠ¤1Ã—1) âˆ’â†’ (A, Ï) such that
the pullback of ÏP along ÎµÏP is isomorphic to the monic arrow in any epi-mono
factorization of !Ï â—¦ ÏP . After point 3) above this is represented by

[

ÏP (a, a) = [

Ï(a, a) âˆ§ P (a) = [

P (a)

aâˆˆA

aâˆˆA

aâˆˆA

Since !Ï is epic we have after point 6) that

is a valid sentence. Which is to say that in P(N)1 â‰ƒ P(N) we have

âŠ¤1 â†’ [

Ï(a, a)

aâˆˆA

N â‰¤ [

Ï(a, a)

aâˆˆA

In other words the union on the right is not empty, i.e. there is a with Ï(a, a) 6= âˆ….

Any such a âˆˆ A determines an obvious function a: 1 âˆ’â†’ A with the property
that

N â‰¤ Ï(a, a)

in fact the inequality is tracked by the code of any constant function n 7â†’ x
where x is any chosen element of Ï(a, a). Therefore the graph

is an arrow of Ef f .

Î“(a): (1, âŠ¤1Ã—1) âˆ’â†’ (A, Ï)

After 2.3 we have that the pullback of ÏP along Î“(a) is represented by P (a).
Then to prove that Ef f is Hilbertian it suï¬ƒces to show that there is Îµ: 1 âˆ’â†’
(A, Ï) such that

P (Îµ) = [

P (a)

aâˆˆA

If the union is empty then P (a) = âˆ… for every a âˆˆ A, thus any choice of Îµ with
Ï(Îµ, Îµ) 6= âˆ… determines the desired Îµ-term. We proved above that at least one
such arrow exists.

If the union is not empty, then there is q âˆˆ A with P (q) 6= âˆ…. Since P is
strict we have that P (q) â‰¤ Ï(q, q), then Ï(q, q) is not empty and Î“(q) is the
desired epsilon term.

7

/
/
/
/
3

Îµ-Toposes

If, on one side, Hilbertian toposes are the appropriate structure to interpret the
partial epsilon calculus, Îµ-toposes, which we introduce below, are the appropri-
ate structure to express the full epsilon calculus. Indeed we show a little more:
Îµ-toposes are the exact structure to express the full epsilon calculus (see propo-
sition 3.2). Of course, as the axiom of choice is derivable, Îµ-toposes validate the
law of excluded middle [2]. Recall that a topos validates the axiom of choice
(AC) if every epimorphism has a section.

Deï¬nition 3.1. An elementary topos E is an Îµ-topos if it validates AC and if
every arrow A âˆ’â†’ 1 is epic, provided that A is not initial.

There is a trivial example of Îµ-topos which is Sets, the topos of sets and

functions.

Proposition 3.2. Let E be an elementary topos. The following are equivalent

i) The internal logic of E is the full epsilon calculus

ii) E is an Îµ-topos

Before proving the statement, we remark that the internal logic of Hilbertian
toposes is a fragment of the full epsilon calculus, then an immediate consequence
of 3.2 is that every Îµ-topos is Hilbertian.

Proof. iâ†’ ii) We already remarked that in the full epsilon calculus AC is deriv-
able. Now consider a non-initial object A. We have a proposition âŠ¤1Ã—A which
is represented by the identity arrow id1Ã—A. Then there exists an epsilon term

ÎµâŠ¤1Ã—A: 1 âˆ’â†’ A

which is necessarily a section of the unique arrow A âˆ’â†’ 1. An arrow with a
section is epic.

iiâ†’i) Suppose Ï†: X ÖŒ Î“ Ã— A is monic. Then we have a diagram

X

Ï†

q

/ Im(Ï€Î“Ï†)

m

Î“ Ã— A

/ Î“

Ï€Î“

where the image of Ï€Î“Ï† is the monomorphism m: Im(Ï€Î“Ï†) ÖŒ Î“ which repre-
sents the formula Î“ | âˆƒa: A Ï†(a).

By AC the epimorphism q has a section s. Moreover every monic has a comple-
ment, then Î“ is the coproduct

Î“ â‰ƒ Im(Ï€Î“Ï†) + Y

8



/
/
/


/
for some object Y , where m is one of the two canonical injections. Denote by
iY the other canonical injection and consider the diagram

X

s

Ï†

/ Î“ Ã— A

a

[Ï†s,a!Y ]

Im(Ï€Î“Ï†)

m /

Î“

iY

1

Y

!Y

where a is a section of the unique arrow Î“ Ã— A âˆ’â†’ 1, which exists by AC since
we assumed that those arrows are epic. The arrow Ï€A[Ï†s, a!Y ] is ÎµÏ†.

It remains to prove that the square

Im(Ï€Î“Ï†)

s

X

Ï†

m

Î“

/ Î“ Ã— A

hidÎ“,ÎµÏ†i

which is commutative, is also a pullback.

Consider the arrows x: Q âˆ’â†’ X and y: Q âˆ’â†’ Î“, with hidÎ“, ÎµÏ†iy = Ï†x. The
arrow qx: Q âˆ’â†’ Im(Ï€Î“Ï†) is the desired arrow, in fact

Ï†sqx = hidÎ“, ÎµÏ†imqx = hidÎ“, ÎµÏ†iÏ€Î“Ï†x = hidÎ“, ÎµÏ†iÏ€Î“hidÎ“, ÎµÏ†iy = hidÎ“, ÎµÏ†iy = Ï†x

then x = sqx since Ï† is monic. Analogously, using the fact that hidÎ“, ÎµÏ†i is
monic, since it is a section, we have mqx = y

One might be led to think that the condition that arrows A âˆ’â†’ 1 are
epic is redundant. The following example shows that in a topos this does not
follow from AC: consider the topos Sets Ã— Sets. It validates AC, but the arrow
(1, âˆ…) âˆ’â†’ (1, 1) is clearly not epic. In other words, the presence of all Îµ-terms
is suï¬ƒcient to prove AC, but not necessary.

4 Conclusions

If, on one side, the internal logic of Hilbertian toposes is intuitionistic, on the
other side the internal logic of Îµ-toposes is necessarily classic. Toposes can be
seen as Heyting categories with the power objects axiom. In Heyting categories
AC does not imply LEM and therefore they might constitute an appropriate
setting to interpret the full intuitionistic ï¬rst order epsilon calculus. Neverthe-
less the study of the epsilon calculus inside a Heyting category is left to future
developments.

References

[1] John L. Bell. Hilbertâ€™s Ç«-operator in intuitionistic type theories. Math. Logic

Quart., 39(3):323â€“337, 1993.

9

/
o
o
/
O
O
O
O
o
o
O
O
/
/




/
[2] R. Diaconescu. Axiom of choice and complementation. Proceedings of the

American Mathematical Society, 51(1):176 â€“ 178, 1975.

[3] J. M. E. Hyland. The eï¬€ective topos. In The L.E.J. Brouwer Centenary
Symposium (Noordwijkerhout, 1981), volume 110 of Stud. Logic Foundations
Math., pages 165â€“216. North-Holland, Amsterdam-New York, 1982.

[4] P. T. Johnstone. Sketches of an elephant - A topos theory compendium.

Clarendon Press - Oxford, 2002.

[5] A. M. Pitts. Tripos theory in retrospect. Math. Struct. in Comp. Science,

12:265â€“279, 2002.

10


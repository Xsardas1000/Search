6
1
0
2

 
r
a

M
5

 

 
 
]

.

O
L
h
t
a
m

[
 
 

1
v
6
6
7
1
0

.

3
0
6
1
:
v
i
X
r
a

Spatial logic of modal mu-calculus and tangled closure

operators

Robert Goldblatt∗ and Ian Hodkinson†

6 March 2016

Abstract

There has been renewed interest in recent years in McKinsey and Tarski’s interpretation of
modal logic in topological spaces and their proof that S4 is the logic of any separable dense-in-
itself metric space. Here we extend this work to the modal mu-calculus and to a logic of tangled
closure operators that was developed by Fernández-Duque after these two languages had been
shown by Dawar and Otto to have the same expressive power over ﬁnite transitive Kripke models.
We prove that this equivalence remains true over topological spaces.

We establish the ﬁnite model property in Kripke semantics for various tangled closure logics
with and without the universal modality ∀. We also extend the McKinsey–Tarski topological
‘dissection lemma’. These results are used to construct a representation map (also called a d-p-
morphism) from any dense-in-itself metric space X onto any ﬁnite connected locally connected
serial transitive Kripke frame.

This yields completeness theorems over X for a number of languages: (i) the modal mu-
calculus with the closure operator ✸; (ii) ✸ and the tangled closure operators hti; (iii) ✸, ∀; (iv)
✸, ∀, hti; (v) the derivative operator hdi; (vi) hdi and the associated tangled closure operators
hdti; (vii) hdi, ∀; (viii) hdi, ∀, hdti. Soundness also holds, if: (a) for languages with ∀, X is
connected; and (b) for languages with hdi, X validates the well known axiom G1. For countable
languages without ∀, we prove strong completeness. We also show that in the presence of ∀,
strong completeness fails if X is compact and locally connected.

1 Introduction

Modal logic can be given semantics over topological spaces. In this setting, the modality ✸ can be
interpreted in more than one way. The ﬁrst and most obvious way is as closure. Writing [[ϕ]] for the
set of points (in a topological model) at which a formula ϕ is true, [[✸ϕ]] is deﬁned to be the closure
of [[ϕ]], so that ✸ϕ holds at a point x if and only if every open neighbourhood of x contains a point y
satisfying ϕ. Then, ✷ becomes the interior operator: [[✷ϕ]] is the interior of [[ϕ]]. Early studies of this
semantics include [35, 36, 24, 25, 26].

In a seminal result, McKinsey and Tarski [25] proved that the logic of any given separable1 dense-
in-itself metric space in this semantics is S4: it can be axiomatised by the basic modal Hilbert system
K augmented by the two axioms ✷ϕ → ϕ (T) and ✷ϕ → ✷✷ϕ (4).

∗School of Mathematics and Statistics, Victoria University of Wellington, New Zealand. sms.vuw.ac.nz/˜rob/
†Department of Computing, Imperial College London, UK. www.doc.ic.ac.uk/˜imh/
1The separability assumption was removed in [29].

1

Motivated perhaps by the current wide interest in spatial logic, a wish to present simpler proofs
in ‘modern language’, growing awareness of the work of particular groups such as Esakia’s and She-
htman’s, or involvement in new settings such as dynamic topology, interest in McKinsey and Tarski’s
result has revived in recent years. A number of new proofs of it have appeared, some for speciﬁc
spaces or embodying other variants [27, 4, 1, 28, 34, 22, 15]. Very recently, strong completeness (ev-
ery countably inﬁnite S4-consistent set of modal formulas is satisﬁable in every dense-in-itself metric
space) was established by Kremer [18].

In this paper, we seek to extend McKinsey and Tarski’s theorem to more powerful languages. We
will extend the modal syntax in two separate ways: ﬁrst, to the mu-calculus, which adds least and
greatest ﬁxed points to the basic modal language, and second, by adding an inﬁnite sequence of new
modalities ✸n of arity n (n ≥ 1) introduced in the context of Kripke semantics by Dawar and Otto
[7]. The semantics of ✸n is given by the mu-calculus formula

✸n(ϕ1, . . . , ϕn) ≡ νq ^1≤i≤n

✸(ϕi ∧ q),

for a new atom q not occurring in ϕ1, . . . , ϕn. The order and multiplicity of arguments to a ✸n is
immaterial, so we will abbreviate ✸n(γ1, . . . , γn) to hti{γ1, . . . , γn}. Fernández-Duque used this to
give the modalities topological semantics, dubbed them tangled closure modalities (this is why we
use the notation hti), and studied them in [10, 11, 13, 12].

Dawar and Otto [7] showed that, somewhat surprisingly, the mu-calculus and the tangled modali-
ties have exactly the same expressive power over ﬁnite Kripke models with transitive frames. We will
prove that this remains true over topological spaces. So the tangled closure modalities offer a viable
alternative to the mu-calculus in both these settings.

We go on to determine the logic of an arbitrary dense-in-itself metric space X in these languages.
We will show that in the mu-calculus, the logic of X is axiomatised by a system called S4µ comprising
Kozen’s basic system for the mu-calculus augmented by the S4 axioms, and the tangled logic of X is
axiomatised by a system called S4t similar to one in [11]. We will establish strong completeness for
countable sets of formulas.

We will also consider the extension of the tangled language with the universal modality, ‘∀’.
(Earlier work on the universal modality in topological spaces includes [32, 23].) This language can
express connectedness: there is a formula C valid in precisely the connected spaces. Adding this and
some standard machinery for ∀ to the system S4t gives a system called ‘S4t.UC’. We will show that
every S4t.UC-consistent formula is satisﬁable in every dense-in-itself metric space. Thus, the logic of
an arbitrary connected dense-in-itself metric space is S4t.UC. We also show that strong completeness
fails in general, even for the modal language plus the universal modality.

A second and more powerful spatial interpretation of ✸ is as the derivative operator. Following
tradition, when considering this interpretation we will generally write the modal box and diamond as
[d] and hdi. In this interpretation, [[hdiϕ]] is deﬁned to be the set of strict limit points of [[ϕ]]: so hdiϕ
holds at a point x precisely when every open neighbourhood of x contains a point y 6= x satisfying
ϕ. The original closure diamond is expressible by the derivative operator: ✸ϕ is equivalent in any
topological model to ϕ ∨ hdiϕ, and ✷ϕ to ϕ ∧ [d]ϕ. So in passing to hdi, we have not reduced the
power of the language.

Already in [25, Appendix I], McKinsey and Tarski discussed the derivative operator and asked a
number of questions about it. It has since been studied by, among others, Esakia and his Tbilisi group
([9, 3], plus many other publications), Shehtman [31, 33], Lucero-Bryan [23], and Kudinov–Shehtman
[21], section 3 of which contains a survey of results.

2

In the derivative semantics, determining the logic of a given dense-in-itself metric space is not a

simple matter, for the logic can vary with the space. As McKinsey and Tarski observed, hdi(cid:0)(x ∧
hdi¬x) ∨ (¬x ∧ hdix)(cid:1) ↔ hdix ∧ hdi¬x is valid in R2 but not in R. This formula is valid in the same

topological spaces as the formula G1, where for each integer n ≥ 1,

Gn =(cid:16)[d] _0≤i≤n

✷Qi(cid:17) → _0≤i≤n

[d]¬Qi.

Here, p0, . . . , pn are pairwise distinct atoms, and for i = 0, . . . , n,

Qi = pi ∧ ^i6=j≤n

¬pj.

In [31], Shehtman proved that the logic of Rn for ﬁnite n ≥ 2 is KD4G1, axiomatised by the basic
system K together with the axioms hdi⊤ (D), [d]p → [d][d]p (4), and G1. The logic of R was shown by
Shehtman [33] and Lucero-Bryan [23] to be KD4G2. The logic of every separable zero-dimensional
dense-in-itself metric space (such as Q and the Cantor space) is just KD4 [31], the smallest possible
logic of a dense-in-itself metric space in the derivative semantics. [5] proves that there are continuum-
many logics of subspaces of the rationals in the language with [d].

It is plain that G1 ⊢ G2 ⊢ G3 ⊢ · · · , so the logics KD4G1 ⊇ KD4G2 ⊇ · · · form a decreasing
chain, and by [23, corollary 3.11], its intersection is KD4. Shehtman [31, problem 1] asked if KD4G1
is the largest possible logic of a dense-in-itself metric space in the derivative semantics.

In this paper, we answer Shehtman’s question afﬁrmatively: every KD4G1-consistent formula of
the language with hdi is satisﬁable in every dense-in-itself metric space. Thus, the logic of every
dense-in-itself metric space that validates G1 is exactly KD4G1. We also establish strong complete-
ness for such spaces.

Adding the tangled closure operators, we prove similarly that the logic of every dense-in-itself
metric space that validates G1 is axiomatised by KD4G1t (including the tangle axioms). We also
prove strong completeness.

Further adding the universal modality, we show similarly that KD4G1t.UC (and KD4G1.UC
if the tangle closure operators are dropped) axiomatises the logic of every connected dense-in-itself
metric space that validates G1. Strong completeness fails in general, as a consequence of the proof
that it already fails for the weaker language with ✷ and ∀.

The reader can ﬁnd a summary of our results in table 1 in section 11.
Our proof works in a fairly familiar way, similar in spirit to McKinsey and Tarski’s original argu-

ment in [25] — indeed, we use some results from that paper. There are three main steps.

1. We establish the ﬁnite model property for the various logics, in Kripke semantics. This work

may be of independent interest: earlier related results were proved in [31, 11].

2. We then prove a topological theorem that establishes Tarski’s ‘dissection lemma’ [36, satz 3.10],

[25, theorem 3.5] and a variant of it.

3. These topological results are used to construct a map from an arbitrary dense-in-itself metric

space onto any ﬁnite connected KD4G1 Kripke frame, that preserves the required formulas.

Putting the three steps together proves completeness for all the languages, which is then lifted by a
separate argument to strong completeness for languages without ∀.

It can be seen that our results concern the logic of each individual space within a large class of
spaces (the dense-in-themselves metric spaces), rather than the logic of a large class of spaces, or of

3

particular spaces such as R. This is as in [25]. We do not assume separability, we consider languages
that have not previously been much studied in the topological setting, and we obtain some results on
strong completeness, a matter that has only recently been investigated in this setting.

The paper is divided into two parts of roughly equal length. Part 1 is devoted to proving the ﬁnite
model property in Kripke semantics for the logics of concern in the paper. Part 2 covers topology and
spatial completeness results, and can be read independently by taking the results of part 1 on trust.
The short section 2 preceding part 1 contains foundational material needed in both parts.

2 Basic deﬁnitions

In this section, we lay out the main deﬁnitions, notation, and some basic results.

2.1 Notation for sets and binary relations

Let X, Y, Z be sets. We let ℘(X) denote the power set (set of all subsets) of X. We write X \ Y for
{x ∈ X : x /∈ Y }. Note that (X ∩ Y ) \ Z = X ∩ (Y \ Z), so we may omit the parentheses in such
expressions. For a partial function f : X → Y , we let dom f denote the domain of f , and rng f its
range.

A binary relation on a set W is a subset of W × W . Let R be a binary relation on W . We write
any of R(w1, w2), Rw1w2, and w1Rw2 to denote that (w1, w2) ∈ R. We say that R is reﬂexive if
R(w, w) for all w ∈ W , and transitive if R(w1, w2) and R(w2, w3) imply R(w1, w3). We write R∗
for the reﬂexive transitive closure of R: the smallest reﬂexive transitive binary relation that contains
R. We also write

R−1 = {(w2, w1) ∈ W × W : R(w1, w2)},
R◦ = {(w1, w2) ∈ W × W : R(w1, w2) ∧ R(w2, w1)}
= R ∩ R−1,
R• = {(w1, w2) ∈ W × W : R(w1, w2) ∧ ¬R(w2, w1)} = R \ R−1.

For w ∈ W , we let R(w) denote the set {w′ ∈ W : R(w, w′)}, sometimes called the set of
R-successors or R-alternatives of w. For W ′ ⊆ W , we write R ↾ W ′ for the binary relation R ∩
(W ′ × W ′) on W ′.

We write R for the set of real numbers, On for the class of ordinals, and ω for the ﬁrst inﬁnite

ordinal.

2.2 Kripke frames

A (Kripke) frame is a pair F = (W, R), where W is a non-empty set of ‘worlds’ and R is a binary
relation on W . We attribute properties to a frame by the usual extrapolation from the frame’s com-
ponents. So, we say that F is ﬁnite if W is ﬁnite, reﬂexive if R is reﬂexive, and transitive if R is
transitive. Two frames are said to be disjoint if their respective sets of worlds are disjoint. And so on.
A root of F is an element w ∈ W such that W = R∗(w). Roots of a frame may not exist, nor be
unique when they do. We say that F is rooted if it has a root. At the other end, an element w ∈ W
is said to be R-maximal if R•(w) = ∅. Such an element has no ‘proper’ R-successors, of which it is
not itself an R-successor.

A subframe of F is a frame of the form F ′ = (W ′, R ↾ W ′), for non-empty W ′ ⊆ W . It is
simply a substructure of F in the usual model-theoretic sense. We call F ′ the subframe of F based
on W ′. We say that F ′ is a generated or inner subframe of F if R(w) ⊆ W ′ for every w ∈ W ′ —
equivalently, R ↾ W ′ = R ∩ (W ′ × W ). For w ∈ W , we write:

4

• F(w) for the subframe (R(w), R ↾ R(w)) of F based on R(w),

• F ∗(w) for the subframe (R∗(w), R ↾ R∗(w)) of F generated by w.

For an integer n ≥ 1, we say that F is n-connected if it is not the union of n + 1 pairwise disjoint
generated subframes (recall that subframes are non-empty), connected if it is 1-connected, and locally
n-connected if for each w ∈ W , the subframe F(w) is n-connected. Note that F is n-connected iff
the equivalence relation (R ∪ R−1)∗ on W has at most n equivalence classes. Every rooted frame is
connected. Connectedness will be discussed in more detail in section 4.10.

2.3 Fixed points

Let X be a set and f : ℘(X) → ℘(X) be a map. We say that f is monotonic if f (S) ⊆ f (S′)
whenever S ⊆ S′ ⊆ X. By a well known theorem of Knaster and Tarski [37], actually formulated for
complete lattices, every monotonic f : ℘(X) → ℘(X) has least and greatest ﬁxed points — there is
a unique ⊆-minimal subset L ⊆ X such that f (L) = L, and a unique ⊆-maximal G ⊆ X such that
f (G) = G. We write L = LF P (f ) and G = GF P (f ).

There are a couple of useful ways to ‘compute’ these ﬁxed points. First, deﬁne by recursion a

subset Sα ⊆ X for each ordinal α, by S0 = ∅, Sα+1 = f (Sα), and Sδ =Sα<δ Sα for limit ordinals

δ. The Sα form an increasing chain terminating in LF P (f ), so

LF P (f ) = [α∈On

Sα.

A similar expression can be given for GF P (f ). Second, a subset S ⊆ X is said to be a pre-ﬁxed
point of f if f (S) ⊆ S, and a post-ﬁxed point if f (S) ⊇ S. In [37] it is proved that LF P (f ) is the
intersection of all pre-ﬁxed points of f , and dually for GF P (f ):

LF P (f ) = T{S ⊆ X : f (S) ⊆ S},
GF P (f ) = S{S ⊆ X : f (S) ⊇ S}.

For f : ℘(X) → ℘(X), deﬁne f ′ : ℘(X) → ℘(X) by f ′(S) = X \ f (X \ S). It is an exercise to

check that f is monotonic iff f ′ is, and in that case, GF P (f ) = X \ LF P (f ′).

Least ﬁxed points are used in the semantics of the mu-calculus, coming up next.

2.4 Languages

We assume some familiarity with modal languages and the mu-calculus. We ﬁx a set Var of propo-
sitional variables, or atoms. Sometimes we may make assumptions on Var — for example, that it is
ﬁnite. We will be considering various logical languages. The biggest of them is denoted by Lµhtihdti
✷[d]∀ ,
which is a set of formulas deﬁned as follows:

1. each p ∈ Var is a formula (of Lµhtihdti

✷[d]∀

),

2. ⊤ is a formula,

3. if ϕ, ψ are formulas then so are ¬ϕ, (ϕ ∧ ψ), ✷ϕ, [d]ϕ, and ∀ϕ,

4. if ∆ is a non-empty ﬁnite set of formulas then hti∆ and hdti∆ are formulas,

5

5. if q ∈ Var and ϕ is a formula that is positive in q (that is, every free occurrence of q as an
atomic subformula of ϕ is in the scope of an even number of negations in ϕ; free means ‘not
in the scope of any µq in ψ’), then µqϕ is a formula, in which all occurrences of q are bound.
Bound atoms arise only in this way.

For formulas ϕ, ψ, and q ∈ Var, the expression ϕ(ψ/q) denotes the result of replacing every free
occurrence of q in ϕ by ψ, where the result is well-formed — that is, all of its subformulas of the
form µpθ are such that θ is positive in p. For example, if ϕ = µp q then ϕ(¬p/q) = µp ¬p is not
well-formed.

We use standard abbreviations: ⊥ denotes ¬⊤, (ϕ ∨ ψ) denotes ¬(¬ϕ ∧ ¬ψ), (ϕ → ψ) denotes
¬(ϕ ∧ ¬ψ), (ϕ ↔ ψ) denotes (ϕ → ψ) ∧ (ψ → ϕ), ✸ϕ denotes ¬✷¬ϕ, hdiϕ denotes ¬[d]¬ϕ, ∃ϕ
denotes ¬∀¬ϕ, and if ϕ is positive in q then νqϕ denotes ¬µq¬ϕ(¬q/q) (this is well-formed). For a

δ1 ∨ . . . ∨ δn (the order and bracketing of the conjuncts and disjuncts will always be immaterial). We

non-empty ﬁnite set ∆ = {δ1, . . . , δn} of formulas, we letV ∆ denote δ1 ∧ . . . ∧ δn andW ∆ denote
setV ∅ = ⊤ andW ∅ = ⊥. Parentheses will be omitted where possible, by the usual methods.

The connectives hti, hdti are called tangle connectives, or (more fully) tangled closure operators.
We will be using various sublanguages of Lµhtihdti
, and they will be denoted in the obvious way by
✷∀ denotes the language consisting

omitting prohibited operators from the notation. So for example, Lµ
of all Lµhtihdti

✷[d]∀ -formulas that do not involve [d], hti, or hdti.

✷[d]∀

2.5 Kripke semantics

An assignment or valuation into a frame F = (W, R) is a map h : Var → ℘(W ). A Kripke model
is a triple M = (W, R, h), where (W, R) is a frame and h an assignment into it. The frame of M is
(W, R), and we say that M is ﬁnite, reﬂexive, transitive, etc., if its frame is.

For every Kripke model M = (W, R, h) and every world w ∈ W , we deﬁne the notion M, w |=

ϕ of a formula ϕ of Lµhtihdti

✷[d]∀

being true at w in M. The deﬁnition is by induction on ϕ, as follows:

1. M, w |= p iff w ∈ h(p), for p ∈ Var.

2. M, w |= ⊤.

3. M, w |= ¬ϕ iff M, w 6|= ϕ.

4. M, w |= ϕ ∧ ψ iff M, w |= ϕ and M, w |= ψ.

5. M, w |= ✷ϕ iff M, v |= ϕ for every v ∈ R(w).

6. The truth condition for [d]ϕ is exactly the same as for ✷ϕ.

7. M, w |= ∀ϕ iff M, v |= ϕ for every v ∈ W .

8. M, w |= hti∆ iff there are worlds w = w0, w1, . . . ∈ W with R(wn, wn+1) for each n < ω

and such that for each δ ∈ ∆ there are inﬁnitely many n < ω with M, wn |= δ.

9. The truth condition for hdti∆ is exactly the same as for hti∆.

10. The truth condition for µqϕ takes longer to explain. For an assignment h : Var → ℘(W ) and

S ⊆ W , deﬁne a new assignment h[S/q] : Var → ℘(W ) by

h[S/q](p) =(S,

h(p),

if p = q,
otherwise,

6

for p ∈ Var. Inductively, the set [[ϕ]]h = {w ∈ W : (W, R, h), w |= ϕ} is well deﬁned, for
every assignment h into (W, R). Deﬁne a map f : ℘(W ) → ℘(W ) by

f (S) = [[ϕ]]h[S/q]

for S ⊆ W.

Since ϕ is positive in q, it can be shown that f is monotonic, so it has a least ﬁxed point,
LF P (f ) (see section 2.3). We deﬁne M, w |= µqϕ iff w ∈ LF P (f ).

In the notation of the last clause, it can be checked that M, w |= νqϕ iff w ∈ GF P (f ).

A word on the semantics of hdi and hdti. Let us temporarily write ϕ ≡ ψ to mean that M, w |=
ϕ ↔ ψ for every transitive Kripke model M = (W, R, h) and every w ∈ W . Then it can be checked
that for every non-empty ﬁnite set ∆ of formulas,

hti∆ ≡ νq ^δ∈∆
hdti∆ ≡ νq ^δ∈∆

✸(δ ∧ q),

hdi(δ ∧ q),

(2.1)

if q ∈ Var is a ‘new’ atom that does not occur in any formula in ∆. For more details, see lemma 6.2.
In a sense, (2.1) is the ‘ofﬁcial’ deﬁnition of the semantics of the tangle connectives, which boils down
to clause 8 above in the case of transitive Kripke models.

2.6 Kripke semantics in generated submodels

Let M = (W, R, h) be a Kripke model. A generated submodel of M is a model of the form M′ =
(W ′, R′, h′), where (W ′, R′) is a generated subframe of (W, R) and h′ : Var → ℘(W ′) is given by
h′(p) = h(p) ∩ W ′ for p ∈ Var. The following is an easy extension to Lµhdihdti
of a well known result
in modal logic:

✷[d]

LEMMA 2.1. Let M′ = (W ′, R′, h′) be a generated submodel of M = (W, R, h). Then for each
ϕ ∈ Lµhdihdti

and w ∈ W ′, we have

✷[d]

M, w |= ϕ ⇐⇒ M′, w |= ϕ.

There is no distinction between ✷ and [d] or between hti and hdti in Kripke semantics. This is not

so in topological semantics, to be studied in part 2.

2.7 Hilbert systems

These are familiar, and we will be informal. A Hilbert system H in a given language L ⊆ Lµhtihdti
a set of axioms, which are L-formulas, and inference rules, which have the form

✷[d]∀

is

ϕ1, . . . , ϕn

ψ

,

(2.2)

for L-formulas ϕ1, . . . , ϕn, ψ. A derivation in H (of length l) is a sequence ϕ1, . . . , ϕl of L-formulas
such that each ϕi (1 ≤ i ≤ l) is either an H-axiom or is derived from earlier ϕj by an H-rule — that
is, there are 1 ≤ j1, . . . , jn < i such that

ϕj1, . . . , ϕjn

ϕi

7

is an instance of a rule of H.

A theorem of H is a formula that occurs in some derivation in H. An H-logic is a set of L-
formulas that contains all H-axioms and is closed under all H-rules. The set of theorems of H is the
smallest H-logic. Sometimes we identify (notationally) H with this set, or present H implicitly by
deﬁning an H-logic.

A formula ϕ is consistent with H if ¬ϕ is not a theorem of H. A set Γ of formulas is consistent

with H ifV Γ0 is consistent with H, for every ﬁnite Γ0 ⊆ Γ.

Some familiar Hilbert systems used later are:

K: the axioms comprise (i) all instances of propositional tautologies (e.g., ϕ → (ψ → ϕ), etc.) and
(ii) all formulas of the form ✷(ϕ → ψ) → (✷ϕ → ✷ψ) (the so-called ‘normality’ schema).
The inference rules are:

• modus ponens:

ϕ, ϕ → ψ

• ✷-generalisation:

ψ

ϕ
✷ϕ

K4: this is K plus all instances of the ‘4’ schema: ✷ϕ → ✷✷ϕ.

S4: this is K plus all instances of the S4 schemata: ✷ϕ → ϕ and ✷ϕ → ✷✷ϕ.

The well known substitution rule

other systems, so we omit it.

ϕ

ϕ(ψ/q)

is not always sound in the mu-calculus and is not needed in

As usual, we denote particular Hilbert systems by sequences of letters and numbers indicating the
axioms present. For example, S4.UC denotes the extension of S4 by the axioms generated by two
schemes U and C to be seen later. The letter t will denote the schemata for the tangle operator given
in section 4.3.

2.8 Satisﬁability, validity, equivalence

Let F = (W, R) be a Kripke frame. A set Γ of Lµhtihdti
exist an assignment h into F and a world w ∈ W such that (W, R, h), w |= γ for every γ ∈ Γ.

-formulas is said to be satisﬁable in F if there

✷[d]∀

Let ϕ be an Lµhtihdti

✷[d]∀ -formula. We say that ϕ is satisﬁable in F if the set {ϕ} is so satisﬁable. We
say that ϕ is valid in F if ¬ϕ is not satisﬁable in F. We may also say in this case that F validates ϕ.

We also say that ϕ is equivalent to a formula ψ in F if ϕ ↔ ψ is valid in F.

2.9 Logics

Let K be a class of Kripke frames. In the context of a given language L ⊆ Lµhtihdti
, the (L)-logic of
K is the set of all L-formulas that are valid in every member of K. A Hilbert system H for L whose
set of theorems is T , say, is said to be

✷[d]∀

• sound over K if T is a subset of the logic of K (all H-theorems are valid in K),

• weakly complete, or simply complete, over K if T contains the logic of K (all K-valid formulas

are H-theorems),

8

• strongly complete over K if every countable H-consistent set Γ of L-formulas is satisﬁable in
some structure in K. (The restriction to countable sets will be discussed at the beginning of
subsection 11.2.)

The logic of a single frame F is deﬁned to be the logic of the class {F}; similar deﬁnitions are used
for the other terms here.

We say that a Kripke frame F is an H-frame, or that F validates H, if H is sound over F. To
establish this, it is enough to check that each axiom of H is valid in F, and that each rule of H
preserves F-validity (in the notation in (2.2) above, this means that if ϕ1, . . . , ϕn are valid in F then
so is ψ). We assume familiarity with basic results about modal validity: for example, that a frame is a
K4-frame iff it is transitive, and an S4-frame iff it is reﬂexive and transitive.

It can be checked that H is weakly complete over K iff every ﬁnite H-consistent set of formulas
is satisﬁable in some structure in K. Hence, every strongly complete Hilbert system is also weakly
complete.

A system H is said to have the ﬁnite model property over K if each H-consistent formula is
satisﬁable in some ﬁnite member of K. Equivalently, this means that H is weakly complete over the
class of ﬁnite members of K (i.e. any formula valid in all ﬁnite members of K is an H-theorem).

9

Part I

In this part of the paper, we look brieﬂy at Hilbert systems for the mu-calculus, but mainly we establish
the ﬁnite model property for the logics of concern in the paper.

3 Hilbert systems for mu-calculus

We now present a very brief diversion on a Hilbert system for the mu-calculus that is sound and
complete over the class of ﬁnite reﬂexive transitive Kripke frames. It will be used to translate µ to hti
and to axiomatise the Lµ
✷-logic of dense-in-themselves metric spaces. In this section, all formulas are
Lµ

✷-formulas, all Hilbert systems are for this language, and we assume that Var is inﬁnite.

DEFINITION 3.1. Consider the two Hilbert systems:

Kµ: standard modal logic K with the axioms comprising all instances of propositional tautologies
and of normality (✷(ϕ → ψ) → (✷ϕ → ✷ψ)), and the inference rules modus ponens, ✷-
generalisation, plus the following for each formula ϕ positive in q:

• ﬁxed point axiom: ϕ(µqϕ/q) → µqϕ, provided that no free occurrence of an atom in µqϕ
gets bound in ϕ(µqϕ/q) — consequently, ϕ(µqϕ/q) is well formed (the idea is roughly
that µqϕ is a pre-ﬁxed point of ϕ)

• ﬁxed point rule:

ϕ(ψ/q) → ψ

µqϕ → ψ

, provided that no free occurrence of an atom in ψ gets

bound in ϕ(ψ/q) — hence, ϕ(ψ/q) is well formed (the idea this time is roughly that µqϕ
is the least pre-ﬁxed point of ϕ).

We write Kµ ⊢ ϕ if ϕ is a theorem of this system. It is well known (see, e.g., [6, §6]) that the
system is equivalent to the original equational system of Kozen [17].

S4µ: this is Kµ plus the S4 schemata ✷ϕ → ϕ, ✷ϕ → ✷✷ϕ. We write S4µ ⊢ ϕ if ϕ is a theorem

of this system.

The following combines some famous and difﬁcult work in the mu-calculus.

FACT 3.2 ([17, 39, 16]). Kµ is sound and complete over the class of all ﬁnite Kripke frames.

We are going to extend it to show that S4µ is sound and complete over the class of ﬁnite reﬂex-
ive transitive frames (and, in Part 2, over every dense-in-itself metric space). First, a form of the
substitution rule can be established.

LEMMA 3.3. Suppose ϕ, ψ are formulas such that for each atom s occurring free in ψ, there is no
subformula of ϕ of the form µsθ. If S4µ ⊢ ϕ, then S4µ ⊢ ϕ(ψ/p) for any atom p.

Proof (sketch). Let ϕ, ψ, p be as stipulated. For a formula α, write α† = α(ψ/p). We show that
S4µ ⊢ α ⇒ S4µ ⊢ α† (when the stipulation holds) by induction on the length of a derivation of ϕ in
S4µ.

Suppose that ϕ is an instance α(µqα/q) → µqα of the ﬁxed point axiom. Then ϕ† is valid in all

Kripke frames, so by fact 3.2, Kµ ⊢ ϕ† and hence certainly S4µ ⊢ ϕ†.

Suppose that ϕ is derived by the ﬁxed point rule, so that ϕ = µqα → β for some α, β, q meeting
the condition of the rule, and α(β/q) → β occurs earlier in the derivation. If s occurs free in ψ then

10

there is no µs in µqα → β, so none in α(β/q) → β either. So the inductive hypothesis applies, to give
S4µ ⊢ (α(β/q) → β)†. Let us evaluate this. If p = q, it is S4µ ⊢ α(β†/q) → β†. By our stipulation,
the ﬁxed point rule applies, giving S4µ ⊢ µqα → β†. But (µqα)† = µqα. So S4µ ⊢ ϕ† as required.
If instead p 6= q, then it is S4µ ⊢ α†(β†/q) → β†. Again, the rule applies, to give S4µ ⊢ µqα† → β†.
But this is exactly S4µ ⊢ ϕ†.

All other cases of the induction are easy and left to the reader.

✷

DEFINITION 3.4. For a formula ϕ, deﬁne a new formula ϕ∗ by induction:

• p∗ = p for p ∈ Var;

• −∗ commutes with the boolean connectives and µ. That is, ⊤∗ = ⊤, (¬ϕ)∗ = ¬ϕ∗, (ϕ ∧ ψ)∗ =

ϕ∗ ∧ ψ∗, and (µqϕ)∗ = µqϕ∗.

• (✷ϕ)∗ = νq(ϕ∗ ∧ ✷q), where q ∈ Var is a ‘new’ atom not occurring in ϕ∗.

The formula ϕ∗ is plainly well formed, for all ϕ ∈ Lµ
✷.

LEMMA 3.5. Let ϕ be any formula. Then for every Kripke model (W, R, h) and w ∈ W , we have
(W, R, h), w |= ϕ∗ iff (W, R∗, h), w |= ϕ, where (recall) R∗ is the reﬂexive transitive closure of R.

Proof. The proof is by induction on ϕ. The atomic and boolean cases are easy. Assuming the
result for ϕ, it is a well known exercise in the mu-calculus to check that (W, R, h), w |= (✷ϕ)∗
iff (W, R, h), u |= ϕ∗ for every u ∈ R∗(w). Inductively, this is iff (W, R∗, h), u |= ϕ for every
u ∈ R∗(w), iff (W, R∗, h), w |= ✷ϕ as required.

Finally assume that the result holds for ϕ, positive in q, for every Kripke model. For a for-
mula ψ and Kripke model (W, R, h), write [[ψ]](W,R,h) = {w ∈ W : (W, R, h), w |= ψ}. Then
(W, R, h), w |= (µqϕ)∗ iff (W, R, h), w |= µqϕ∗, iff w is in the least ﬁxed point of the map
f : ℘(W ) → ℘(W ) given by f (S) = [[ϕ∗]](W,R,h[S/q]). But inductively, f (S) = [[ϕ]](W,R∗,h[S/q]). So
this is iff (W, R∗, h), w |= µqϕ as required.
✷

LEMMA 3.6. S4µ ⊢ ϕ ↔ ϕ∗ for every ϕ.

Proof. Again, the proof is by induction on ϕ. We write just ‘⊢’ for ‘S4µ ⊢’ in the proof. We also
write α ≡ β for ⊢ α ↔ β. First, replace all bound atoms in ϕ by fresh ones, to give a formula ϕ.
More formally, ψ is deﬁned for each subformula ψ of ϕ by induction: µqψ = µs(ψ(s/q)), where s
is a new atom associated with ψ and not occurring in ϕ, and · commutes with all other operators. By
fact 3.2, ϕ ≡ ϕ and (ϕ)∗ ≡ ϕ∗. So, replacing ϕ by ϕ, we can suppose without loss of generality that
for each atom q that occurs free in ϕ, there is no subformula of ϕ of the form µqθ. The −∗ operator
preserves this condition, so it holds for ϕ∗ as well.

For atomic ϕ, the result is trivial since ϕ∗ = ϕ, and booleans are ﬁne.
Assume inductively that ϕ ≡ ϕ∗ and consider ✷ϕ. We need to show that ✷ϕ ≡ νq(ϕ∗ ∧ ✷q),
for ‘new’ q — that is, ✷ϕ ≡ ¬µq¬(ϕ∗ ∧ ✷¬q). By a tautology, it is enough to show ¬✷ϕ ≡
µq¬(ϕ∗ ∧ ✷¬q). By fact 3.2, ¬✷ϕ ≡ ✸¬ϕ and µq¬(ϕ∗ ∧ ✷¬q) ≡ µq(¬ϕ∗ ∨ ✸q). So, letting
ψ = ¬ϕ, it is enough to prove

✸ψ ≡ µqχ, where χ = ψ∗ ∨ ✸q.

(3.1)

Note that the inductive hypothesis gives ψ ≡ ψ∗, and that χ(θ/q) is well-formed for any well-formed
θ. Let χ0 = ⊥, and χn+1 = χ(χn/q) for n < ω. The following claim, needed only for n = 2, is an
instance of a more general result.

11

Claim. ⊢ χn → µqχ for each n < ω.
Proof of claim. By induction on n. For n = 0, it is ⊢ ⊥ → µqχ, a tautology. Assume inductively that
⊢ χn → µqχ. We desire ⊢ ψ∗ ∨ ✸χn → µqχ. By the ﬁxed point axiom, it is enough to prove that
⊢ ψ∗ ∨ ✸χn → χ(µqχ/q) — that is, ⊢ ψ∗ ∨ ✸χn → ψ∗ ∨ ✸µqχ. But the inductive hypothesis plus
standard uses of generalisation and normality yield ⊢ ✸χn → ✸µqχ, and the result follows using
tautologies and modus ponens. This proves the claim.

Towards (3.1), we ﬁrst show that ⊢ ✸ψ → µqχ. Observe that inductively, χ1 = ψ∗ ∨ ✸⊥ ≡ ψ
and χ2 = ψ∗ ∨ ✸χ1 ≡ ψ ∨ ✸ψ. By the claim for n = 2, and tautologies, ⊢ ψ ∨ ✸ψ → µqχ and
applying more tautologies yields ⊢ ✸ψ → µqχ.

Now we show ⊢ µqχ → ✸ψ. By the ﬁxed point rule, it is enough to show ⊢ χ(✸ψ/q) → ✸ψ.
That is, ⊢ ψ∗ ∨ ✸✸ψ → ✸ψ. But given the inductive hypothesis, this is just what the S4 axioms say.
This proves (3.1) and completes the case of ✷ϕ.

Finally assume the result for ϕ positive in q, and consider the case µqϕ. All formulas below
meet all necessary conditions because of our initial assumption on ϕ. By the inductive hypothesis
and lemma 3.3 we get ⊢ ϕ(µqϕ∗/q) → ϕ∗(µqϕ∗/q). The ﬁxed point axiom gives ⊢ ϕ∗(µqϕ∗/q) →
µqϕ∗. Putting the two together gives ⊢ ϕ(µqϕ∗/q) → µqϕ∗. This says that µqϕ∗ is a pre-ﬁxed point
of ϕ, so the ﬁxed point rule gives ⊢ µqϕ → µqϕ∗. The converse, ⊢ µqϕ∗ → µqϕ, is similar.
✷

THEOREM 3.7. The system S4µ is sound and complete over the class of ﬁnite reﬂexive transitive
Kripke frames (ﬁnite S4 frames).

Proof. Soundness is easily checked. Conversely, assume that ϕ is consistent with S4µ. By lemma 3.6,
ϕ∗ is consistent with S4µ and hence with Kµ as well. By fact 3.2, there is a ﬁnite Kripke model
M = (W, R, h) in which ϕ∗ is satisﬁed at w, say. We do not know that (W, R) is reﬂexive or
transitive. However, by lemma 3.5 we have (W, R∗, h), w |= ϕ as well, and R∗ is reﬂexive and
transitive.
✷

4 Finite model property

The main work of our paper starts here. In this section, we establish a number of ﬁnite model property
results for sublanguages of Lhtihdti
✷[d]∀ , by modifying a ﬁltration approach pioneered in the context of L[d]
by Shehtman [31] and used later by Lucero-Bryan for L[d]∀ [23]. The ﬁnite model property for the
systems KD4Gn (and others) was proved by Zakharyaschev [40], using canonical formulas. The ﬁnite
model property for an S4-like tangle system was proved by Fernández-Duque in [11], by a different
method, and the scheme Fix and a variant of Ind in section 4.3 below appear in [11, §3].

4.1 Clusters in Transitive Frames

We work within models on K4 frames (W, R), i.e. R is a transitive binary relation on W . If xRy, we
may say that y comes R-after x, or is R-later than x, or is an R-successor of x. If xR•y, i.e. xRy but
not yRx, then y is strictly after/later, or is a proper R-successor. A point x is reﬂexive if xRx, and
irreﬂexive otherwise. R is (ir)reﬂexive on a set X ⊆ W if every member of X is (ir)reﬂexive.
An R-cluster is a subset C of W that is an equivalence class under the equivalence relation

{(x, y) : x = y or xRyRx}.

A cluster is degenerate if it is a singleton {x} with x irreﬂexive. Note that a cluster C can only contain
an irreﬂexive point if it is a singleton. For, if C has more than one element, then for each x ∈ C there

12

is some y ∈ C with x 6= y, so xRyRx and thus xRx by transitivity. On a non-degenerate cluster R
is universal. For C to be non-degenerate it sufﬁces that there exist x, y ∈ C with xRy, regardless of
whether x = y or not.

Write Cx for the R-cluster containing x. Thus Cx = {x} ∪ {y : xRyRx}. The relation R lifts to a
well-deﬁned partial ordering of clusters by putting CxRCy iff xRy. A cluster C is R-maximal when
there is no cluster that comes strictly R-after it, i.e. when CRC ′ implies C = C ′. A point x ∈ W
is R-maximal, or just maximal if R is understood, if Cx is a maximal cluster, or equivalently if xRy
implies yRx.

An R-chain is a sequence C1, C2, . . . of pairwise distinct clusters with C1RC2R · · · . In a ﬁnite
frame, such a chain is of ﬁnite length. Hence we can deﬁne a notion of rank in a ﬁnite frame by
declaring the rank of a cluster C to be the number of clusters in the longest chain of clusters starting
with C. So the rank is always ≥ 1, and a rank-1 cluster is maximal. The rank of a point x is deﬁned
to be the rank of Cx. The key property of this notion is that if xR•y, equivalently if Cy comes strictly
R-after Cx, then y has smaller rank than x.

An endless R-path is a sequence {xn : n < ω} such that xnRxn+1 for all n. Such a path starts
at/from x0. The terms of the sequence need not be distinct: for instance, any reﬂexive point x gives
rise to the endless R-path xRxRxR . . . . In a ﬁnite frame, an endless path must eventually enter some
non-degenerate cluster C and stay there, i.e. there is some n such that xm ∈ C for all m ≥ n.

Recall that R(x) = {y ∈ W : xRy} is the set of R-successors of x, and that (W ′, R′) is an inner
subframe of (W, R) if (W ′, R′) is a subframe of (W, R) that is R-closed. This means that R′ is the
restriction of R to W ′ ⊆ W , and x ∈ W ′ implies R(x) ⊆ W ′. In this situation every R′-cluster is an
R-cluster, and every R-cluster that intersects W ′ is a subset of W ′ and is an R′-cluster.

4.2 Syntax and Semantics

We will work initially in the language Lhti
✷ . Recall that we assume a set Var of propositional variables,
which may be ﬁnite or inﬁnite. Formulas are constructed from these variables by the standard Boolean
connectives, the unary modality ✷ (with dual ✸) and the tangle connective hti which assigns a formula
htiΓ to each ﬁnite set Γ of formulas.

Later we will want to add additional connectives, such as the universal modality ∀ and its dual ∃.
We use the standard notion from section 2.5 of a Kripke model M = (W, R, h) on a (transitive)
frame as given by a valuation function h : Var → ℘W , giving rise to a truth/satisfaction relation
M, x |= ϕ with M, x |= p iff x ∈ h(p) for all p ∈ Var and x ∈ W . The modality ✸ is modelled by
R in the usual Kripkean way:

M, x |= ✸ϕ iff there is a y with xRy and y |= ϕ.

(4.1)

The condition for M, x |= htiΓ is that

there exists an endless R-path {xn : n < ω} with x = x0 along which each member γ of
Γ is true inﬁnitely often, i.e. {n < ω : M, xn |= γ} is inﬁnite.

A set Γ of formulas is satisﬁed by the cluster C if each member of Γ is true in M at some point of
C. So Γ fails to be satisﬁed by C if some member of Γ is false at every point of C. In a ﬁnite model,
since an endless path must eventually enter some non-degenerate cluster and stay there, we get that

x |= htiΓ iff there is a y with xRy and yRy and Γ is satisﬁed by Cy

(4.2)

To put this another way, x |= htiΓ iff Γ is satisﬁed by some non-degenerate cluster following Cx.

13

Write htiϕ for the formula hti{ϕ}. Then htiϕ is true at x iff there is an endless path starting at x

along which ϕ is true inﬁnitely often. For ﬁnite models we have

x |= htiϕ iff there is a y with xRy and yRy and y |= ϕ,

i.e. the meaning of htiϕ is that there is a reﬂexive alternative at which ϕ is true. Thus for ﬁnite reﬂexive
models (i.e. S4 models) this reduces to the standard Kripkean interpretation (4.1) of ✸. More strongly,
it is evident that htiϕ ↔ ✸ϕ is valid in all S4 frames (and htiϕ → ✸ϕ is valid in all K4 frames).

Write ✸∗ϕ for the formula ϕ ∨ ✸ϕ, and ✷∗ϕ for ϕ ∧ ✷ϕ. In any transitive frame, deﬁne R∗ =
R ∪ {(x, x) : x ∈ W }. Then R∗ is the reﬂexive-transitive closure of R, and in any model on the frame
we have

M, x |= ✷∗ϕ iff for all y, if xR∗y then M, y |= ϕ.

and

M, x |= ✸∗ϕ iff for some y, xR∗y and M, y |= ϕ.

Note that if Cx = Cy, then xR∗y. For each x let R∗(x) = {y ∈ W : xR∗y}. Then R∗(x) =
{x} ∪ R(x).

4.3 Tangle Systems and Logics

A tangle system is any Hilbert system whose axioms include all tautologies and all instances of the
schemes

K: ✷(ϕ → ψ) → (✷ϕ → ✷ψ)

4: ✸✸ϕ → ✸ϕ

Fix: htiΓ → ✸(γ ∧ htiΓ),

all γ ∈ Γ.

Ind: ✷∗(ϕ →Vγ∈Γ

✸(γ ∧ ϕ)) → (ϕ → htiΓ).

and whose rules include modus ponens and ✷-generalisation. The smallest tangle system will be
denoted K4t.

A tangle logic (or just logic in this section) is a set L of formulas that is a K4t-logic. Any logic

includes the following:

htiϕ → ✸ϕ

4∗: ✸✸∗ϕ → ✸ϕ

4t: ✸htiΓ → htiΓ

4t will be explicitly needed in our ﬁnite model property proof, in relation to a condition called (r4).
Here is a derivation of 4t, in which the justiﬁcation “Bool” means by principles of Boolean logic,
“Reg” is the rule from ϕ → ψ infer ✸ϕ → ✸ψ, and “Nec” is the rule from ϕ infer ✷∗ϕ.

For each γ ∈ Γ we derive

14

1. htiΓ → ✸(γ ∧ htiΓ)
2. ✸(γ ∧ htiΓ) → ✸htiΓ
3. htiΓ → ✸htiΓ
4. γ ∧ htiΓ → γ ∧ ✸htiΓ
5. ✸(γ ∧ htiΓ) → ✸(γ ∧ ✸htiΓ)
6. htiΓ → ✸(γ ∧ ✸htiΓ)
7. ✸htiΓ → ✸✸(γ ∧ ✸htiΓ)
8. ✸htiΓ → ✸(γ ∧ ✸htiΓ)

Fix
K-theorem (Bool + Reg)
1, 2 Bool
3, Bool
4, Reg
1, 5 Bool
6, Reg
7, Axiom 4, Bool

Since this holds for every γ ∈ Γ we can continue with

9. ✸htiΓ →Vγ∈Γ
10. ✷∗(✸htiΓ →Vγ∈Γ
11. ✷∗(✸htiΓ →Vγ∈Γ

12. ✸htiΓ → htiΓ

✸(γ ∧ ✸htiΓ)

✸(γ ∧ ✸htiΓ))
✸(γ ∧ ✸htiΓ)) → (✸htiΓ → htiΓ)

8 for all γ ∈ Γ, Bool
9, Nec
Ind with ϕ = ✸htiΓ
10, 11 Bool

4.4 Canonical Frame

For a tangle logic L, the canonical frame is FL = (WL, RL), with WL the set of maximally L-
consistent sets of formulas, and xRLy iff {✸ϕ : ϕ ∈ y} ⊆ x iff {ϕ : ✷ϕ ∈ x} ⊆ y. RL is transitive,
by the K4 axiom 4.

Suppose F = (W, R) is an inner subframe of FL, i.e. W is an RL-closed subset of WL, and R is

the restriction of RL to W .

By standard canonical frame theory, we have that for all formulas ϕ and all x ∈ W :

✸ϕ ∈ x
✸∗ϕ ∈ x
✷ϕ ∈ x
✷∗ϕ ∈ x

iff
iff
iff
iff

for some y ∈ W, xRy and ϕ ∈ y.
for some y ∈ W, xR∗y and ϕ ∈ y.
for all y ∈ W, xRy implies ϕ ∈ y.
for all y ∈ W, xR∗y implies ϕ ∈ y.

(4.3)
(4.4)
(4.5)
(4.6)

We will say that a sequence {xn : n < ω} in F fulﬁls the formula htiΓ if each member of Γ

belongs to xn for inﬁnitely many n. The role of the axiom Fix is to provide such sequences:

LEMMA 4.1. In F, if htiΓ ∈ x then there is an endless R-path starting from x that fulﬁls htiΓ.
Moreover, htiΓ belongs to every member of this path.

Proof. Let Γ = {γ1, . . . , γk}. Put x0 = x. From htiΓ ∈ x0 by axiom Fix we get ✸(γ1 ∧ htiΓ) ∈ x0,
so by (4.3) there exists x1 ∈ W with x0Rx1 and γ1, htiΓ ∈ x1. Since htiΓ ∈ x1, by Fix again there
exists x2 ∈ W with x1Rx2 and γ2, htiΓ ∈ x2. Continuing in this way ad inﬁnitum cycling through
the list γ1, . . . , γk we generate a sequence fulﬁlling htiΓ, with γi ∈ xn whenever n ≡ i mod k, and
htiΓ ∈ xn for all n < ω.
✷

The canonical model ML on FL has ML, x |= ϕ iff ϕ ∈ x, provided that ϕ is hti-free. But
this ‘Truth Lemma’ can fail for formulas containing the tangle connective, even though all instances
of the tangle axioms belong to every member of WL. For this reason we will work directly with the
structure of FL and the relation ϕ ∈ x, rather than with truth in ML.

For an example of failure of the Truth Lemma, consider the set

Σ = {p0, q, ✷(p2n → ✸(p2n+1 ∧ ¬q)), ✷(p2n+1 → ✸(p2n+2 ∧ q)) : n < ω},

15

where q and the pn’s are distinct variables. Each ﬁnite subset of Σ ∪ {¬hti{q, ¬q}} is satisﬁable in
a transitive frame, and so is LK4t-consistent where LK4t is the smallest logic. Explanation: if Γ is a
ﬁnite subset, M a model with transitive frame, and M, x |= Γ, then {ϕ : M, y |= ϕ for all worlds y

of M} is a logic that excludes ¬V Γ, so ¬V Γ /∈ LK4t.

Since the proof theory is ﬁnitary, it follows that Σ ∪ {¬hti{q, ¬q}} is LK4t-consistent, so is
included in some member x of WLK4t. Using the fact that Σ ⊆ x, together with (4.3) and (4.5),
we can construct an endless RLK4t-path starting from x that fulﬁlls {q, ¬q}, hence satisﬁes each
of q and ¬q inﬁnitely often in MLK4t. Thus MLK4t , x |= hti{q, ¬q}. But hti{q, ¬q} /∈ x, since
¬hti{q, ¬q} ∈ x and x is LK4t-consistent.

4.5 Deﬁnable Reductions

Fix a ﬁnite set Φ of formulas closed under subformulas. Let Φt be the set of all formulas in Φ of the
form htiΓ, and Φ✸ be the set of all formulas in Φ of the form ✸ϕ.

Let F = (W, R) be an inner subframe of FL. Then by a deﬁnable reduction of F via Φ we mean a
pair (MΦ, f ), where MΦ = (WΦ, RΦ, hΦ) is a model on a ﬁnite transitive frame, and f : W → WΦ
is a surjective function, such that the following hold for all x, y ∈ W :

(r1): p ∈ x iff f (x) ∈ hΦ(p), for all p ∈ Var ∩ Φ.

(r2): f (x) = f (y) implies x ∩ Φ = y ∩ Φ.

(r3): xRy implies f (x)RΦf (y).

(r4): f (x)RΦf (y) implies y ∩ Φt ⊆ x ∩ Φt and {✸ϕ ∈ Φ : ✸∗ϕ ∈ y} ⊆ x.

(r5): For each subset C of WΦ there is a formula ϕ that deﬁnes f −1(C) in W , i.e. ϕ ∈ y iff f (y) ∈ C.

We will make crucial use of the following consequence of this deﬁnition.

LEMMA 4.2. If f (x) and f (y) belong to the same RΦ-cluster, then x ∩ Φt = y ∩ Φt and x ∩ Φ✸ =
y ∩ Φ✸.

If f (x) = f (y), then x ∩ Φ = y ∩ Φ by (r2) and so x ∩ Φt = y ∩ Φt and x ∩ Φ✸ = y ∩ Φ✸.
Proof.
But if f (x) 6= f (y), then f (x)RΦf (y)RΦf (x), and so y ∩ Φt ⊆ x ∩ Φt ⊆ y ∩ Φt by (r4). Also if
✸ϕ ∈ y ∩ Φ then ✸∗ϕ = ϕ ∨ ✸ϕ ∈ y, and so ✸ϕ ∈ x by (r4), and likewise ✸ϕ ∈ x ∩ Φ implies
✸ϕ ∈ y.
✷

Note that the second conclusion of (r4) is a concise way of expressing that both

{✸ϕ ∈ Φ : ϕ ∈ y} ⊆ x and

{✸ϕ ∈ Φ : ✸ϕ ∈ y} ⊆ x.

Given a deﬁnable reduction (MΦ, f ) of F, we will replace RΦ by a weaker relation Rt, producing
a new model Mt = (WΦ, Rt, hΦ), the untangling of MΦ, with the property that satisfaction in Mt
of any formula ϕ ∈ Φ corresponds exactly via f to membership of ϕ in points of F. In other words,
ϕ ∈ x iff Mt, f (x) |= ϕ, a result we refer to as the Reduction Lemma. The deﬁnition of Rt will cause
each RΦ-cluster to be decomposed into a partially ordered set of smaller Rt-clusters.

In what follows we will write |x| for f (x). Then as f is surjective, each member of WΦ is equal
to |x| for some x ∈ W . In later applications the set WΦ will be a set of equivalence classes |x| of
points x ∈ W , under a suitable equivalence relation, and f will be the natural map x 7→ |x|.

Our ﬁrst step makes the key use of the axiom Ind:

16

LEMMA 4.3. Let htiΓ ∈ Φ. Suppose that htiΓ /∈ x, where x ∈ W , and let |x| ∈ C ⊆ WΦ. Then
there is a formula γ ∈ Γ and some y ∈ W such that xR∗y, |y| ∈ C and

if yRz and |z| ∈ C, then γ /∈ z.

(4.7)

Proof. By (r5) there is a formula ϕ that deﬁnes {y ∈ W : |y| ∈ C}, i.e. ϕ ∈ y iff |y| ∈ C. Then
✸(γ ∧ ϕ)) /∈ x. Hence by (4.6) there is a
✸(γ ∧ ϕ)) /∈ y. Then ϕ ∈ y, so |y| ∈ C, and for some γ ∈ Γ we have
✸(γ ∧ ϕ) /∈ y. Hence by (4.3), if yRz and |z| ∈ C, then γ ∧ ϕ /∈ z and ϕ ∈ z, so γ /∈ z, which gives
(4.7).
✷

ϕ ∈ x and htiΓ /∈ x, so by the axiom Ind, ✷∗(ϕ →Vγ∈Γ
y with xR∗y and (ϕ →Vγ∈Γ

LEMMA 4.4. Let formulas htiΓ1, . . . , htiΓk belong to Φ but not to x. Suppose that |x| ∈ C ⊆ WΦ.
Then there are formulas γ1 ∈ Γ1, . . . , γk ∈ Γk and some y ∈ W such that xR∗y, |y| ∈ C and

if yRz and |z| ∈ C, then {γ1, . . . , γk} ∩ z = ∅.

(4.8)

If k = 0, take y = x; we are done. Now assume k > 0. By Lemma 4.3, there exists γ1 ∈ Γ1

Proof.
and y1 ∈ W such that xR∗y1, |y1| ∈ C and

if y1Rz and |z| ∈ C, then γ1 /∈ z.

(4.9)

Now htiΓ2 /∈ x, so ✸htiΓ2 /∈ x by scheme 4t. Hence ✸∗htiΓ2 = htiΓ2 ∨ ✸htiΓ2 /∈ x. As xR∗y1,
this implies htiΓ2 /∈ y1 by (4.4). So by Lemma 4.3 again, with y1 in place of x, there exists γ2 ∈ Γ2
and y2 ∈ W such that y1R∗y2, |y2| ∈ C and

if y2Rz and |z| ∈ C, then γ2 /∈ z.

(4.10)

Now by transitivity of R∗ we have xR∗y2. Also if y2Rz and |z| ∈ C, then from y1R∗y2Rz we get
y1Rz, and so γ1 /∈ z by (4.9). Together with (4.10) this shows that {γ1, γ2} ∩ z = ∅.

If k = 2 this proves (4.8) with y = y2. Otherwise we repeat, applying Lemma 4.3 again with y2
✷

in place of x and so on, eventually obtaining the desired y as yk.

Deﬁne a formula ϕ ∈ Φ to be realised at a member |z| of WΦ iff ϕ ∈ z. Note that this deﬁnition
does not depend on how the member is named, for if |z| = |z′|, then z ∩ Φ = z′ ∩ Φ by (r2), and so
ϕ ∈ z iff ϕ ∈ z′.

LEMMA 4.5. Let C be any RΦ-cluster. Then there is some y ∈ W with |y| ∈ C, such that for any
formula htiΓ ∈ Φt − y there is a formula in Γ that is not realised at any |z| ∈ C such that yRz.

Proof. Take any |x| ∈ C, and put Φt − x = {htiΓ1, . . . , htiΓk}. By Lemma 4.4 there is some y with
xR∗y and |y| ∈ C, and formulas γi ∈ Γi for 1 ≤ i ≤ k such that if yRz and |z| ∈ C, then γi /∈ z,
hence γi is not realised at |z|.

Now |x| and |y| belong to the same RΦ-cluster C, so y ∩ Φt = x ∩ Φt by Lemma 4.2. Hence
Φt − y = Φt − x. So if htiΓ ∈ Φt − y, then Γ = Γi for some i, and then γi is a member of Γ not
realised at any |z| ∈ C such that yRz.
✷

Now for each RΦ-cluster C, choose and ﬁx a point y as given by Lemma 4.5. Call y the critical

point for C, and put

C ◦ = {|z| ∈ C : yRz}.

17

Lemma 4.5 states that if htiΓ ∈ Φt − y, then there is a formula in Γ that is not realised at any point of
C ◦.

We call C ◦ the nucleus of the cluster C. If yRy then |y| ∈ C ◦, but in general |y| need not belong
to C ◦. Indeed the nucleus could be empty. For instance, it must be empty when C is a degenerate
cluster. To show this, suppose that C ◦ 6= ∅. Then there is some |z| ∈ C with yRz, hence |y|RΦ|z|
by (r3), so as |y| ∈ C this shows that C is non-degenerate. Consequently, if the nucleus is non-empty
then the relation RΦ is universal on it.

We introduce the subrelation Rt of RΦ to reﬁne the structure of C by decomposing it into the
nucleus C ◦ as an Rt-cluster together with a singleton degenerate Rt-cluster {w} for each w ∈ C −C ◦.
These degenerate clusters all have C ◦ as an Rt-successor but are incomparable with each other. So
the structure replacing C looks like

•

· · · · · · · · ·

•

{w}

•

&◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆◆
"❊❊❊❊❊❊❊❊❊❊❊

|①①①①①①①①①①①

`gafbecd

C ◦

with the black dots being the degenerate clusters determined by the points of C − C ◦. Doing this to
each cluster of (WΦ, RΦ) produces a new transitive frame Ft = (WΦ, Rt) with Rt ⊆ RΦ.

Rt can be more formally deﬁned on WΦ simply by specifying, for each w, v ∈ WΦ, that wRtv iff

wRΦv and either

• w and v belong to different RΦ-clusters; or

• w and v belong to the same RΦ-cluster C, and v ∈ C ◦.

This ensures that each member of C is Rt-related to every member of the nucleus of C. The restriction
of Rt to C is equal to C × C ◦, so we could also deﬁne Rt as the union of the relations C × C ◦ for all
RΦ-clusters C, plus all inter-cluster instances of RΦ.

If the nucleus is empty, then so is the relation Rt on C, and C decomposes into a set of pairwise
incomparable degenerate clusters. If C = C ◦, then Rt is universal on C, identical to the restriction of
RΦ to C.

LEMMA 4.6 (Reduction lemma). Every formula in Φ is true in Mt = (WΦ, Rt, hΦ) precisely at the
points at which it is realised, i.e. for all ϕ ∈ Φ and all x ∈ W ,

Mt, |x| |= ϕ iff ϕ ∈ x.

(4.11)

Proof. This is by induction on the formation of formulas. For the base case of a variable p ∈ Φ, we
have Mt, |x| |= p iff |x| ∈ hΦ(p), which holds iff p ∈ x by (r1). The inductive cases of the Boolean
connectives are standard.

Next, take the case of a formula ✸ϕ ∈ Φ, under the induction hypothesis that (4.11) holds for all
x ∈ W . Suppose ﬁrst that Mt, |x| |= ✸ϕ. Then there is some y ∈ W with |x|Rt|y| and Mt, |y| |= ϕ,
hence ϕ ∈ y by the induction hypothesis on ϕ. Then ✸∗ϕ ∈ y. But Rt ⊆ RΦ, so |x|RΦ|y|, implying
that ✸ϕ ∈ x, as required, by (r4). Conversely, suppose that ✸ϕ ∈ x. Let C be the RΦ-cluster of |x|,
and y the critical point for C. Then ✸ϕ ∈ y by Lemma 4.2, so there is some z with yRz and ϕ ∈ z,
hence Mt, |z| |= ϕ by induction hypothesis. Now if |z| ∈ C, then |z| belongs to the nucleus of C

18

&
"
|
and hence |x|Rt|z|. But if |z| /∈ C, then as |y|RΦ|z| by (r3), and hence |x|RΦ|z|, the RΦ-cluster of
|z| is strictly RΦ-later than C, and again |x|Rt|z|. So in any case we have |x|Rt|z| and Mt, |z| |= ϕ,
giving Mt, |x| |= ✸ϕ. That completes this inductive case of ✸ϕ.

Finally we have the most intricate case of a formula htiΓ ∈ Φ, under the induction hypothesis that

(4.11) holds for every member of Γ for all x ∈ W . Then we have to show that for all z ∈ W ,

Mt, |z| |= htiΓ iff htiΓ ∈ z.

(4.12)

The proof proceeds by strong induction on the rank of |z|. Take x ∈ W and suppose that (4.12) holds
for every z for which the rank of |z| is less than the rank of |x|. We show that Mt, |x| |= htiΓ iff
htiΓ ∈ x. Let C be the RΦ-cluster of |x|, and y the critical point for C.

Assume ﬁrst that htiΓ ∈ x. Then htiΓ ∈ y by Lemma 4.2. By Lemma 4.1, there is an endless
R-path {yn : n < ω} starting from y = y0 that fulﬁlls htiΓ and has htiΓ belonging to each point.
Then by (r3) the sequence {|yn| : n < ω} is an endless RΦ-path in WΦ starting at |y| ∈ C.

Suppose that |yn| ∈ C for all n. Then for all n > 0, since yRyn we get |yn| ∈ C ◦. So there
is the endless Rt-path π = |x|Rt|y1|Rt|y2|Rt · · · starting at |x|. As {yn : n < ω} fulﬁlls htiΓ, for
each γ ∈ Γ there are inﬁnitely many n for which γ ∈ yn and so Mt, |yn| |= γ by the induction
hypothesis on members of Γ. Thus each member of Γ is true inﬁnitely often along π, implying that
Mt, |x| |= htiΓ.

If however there is an n > 0 with |yn| /∈ C, then the RΦ-cluster of |yn| is strictly RΦ-later than
C, so |x|Rt|yn| and |yn| has smaller rank than |x|. Since htiΓ ∈ yn, the induction hypothesis (4.12)
on rank then implies that Mt, |yn| |= htiΓ. So there is an endless Rt-path π from |yn| along which
each member of Γ is true inﬁnitely often. Since |x|Rt|yn|, we can append |x| to the front of π to
obtain such an Rt-path starting from |x|, showing that Mt, |x| |= htiΓ (this last part is an argument
for soundness of 4t). So in both cases we get Mt, |x| |= htiΓ. That proves the forward implication of
(4.11) for htiΓ.

For the converse implication, suppose Mt, |x| |= htiΓ. Since WΦ is ﬁnite, it follows by (4.2)
that there exists a z ∈ W with |x|Rt|z| and |z|Rt|z| and the Rt-cluster of |z| satisﬁes Γ. By the
induction hypothesis (4.11) on members of Γ, every formula in Γ is realised at some point of this
cluster. Suppose ﬁrst there is such a z for which the rank of |z| is less than that of |x|. Then as the
Rt-cluster of |z| is non-degenerate and satisﬁes Γ, we have Mt, |z| |= htiΓ. Induction hypothesis
(4.12) then implies that htiΓ ∈ z. But |x|RΦ|z|, as |x|Rt|z|, so by (r4) we get the required conclusion
that htiΓ ∈ x.

If however there is no such z with |z| of lower rank than |x|, then the |z| that does exist must have
the same rank as |x|, so it belongs to C. Hence as |x|Rt|z|, the deﬁnition of Rt implies that |z| ∈ C ◦.
Thus the Rt-cluster of |z| is C ◦. Therefore every formula in Γ is realised at some point of C ◦, i.e.
at some |z′| ∈ C with yRz′. But Lemma 4.5 states that if htiΓ /∈ y, then some member of Γ is not
realised in C ◦. Therefore we must have htiΓ ∈ y. Then htiΓ ∈ x as required, by Lemma 4.2. That
ﬁnishes the inductive proof that Mt satisﬁes the Reduction Lemma.
✷

4.6 Adding Seriality

Suppose the logic L contains the D-axiom ✸⊤. Then RL is serial: ∀x∃y(xRLy). Hence the relation
R of the inner subframe F is serial. From this we can show that Rt is serial. The key point is that any
maximal RΦ-cluster C must have a non-empty nucleus. For, if y is the critical point for C, then there
is a z with yRz, as R is serial. But then |y|RΦ|z| by (r3) and so |z| ∈ C as C is maximal. Hence
|z| ∈ C ◦, making the nucleus non-empty. Now every member of C is Rt-related to any member of
C ◦ so altogether this implies that Rt is serial on the rank 1 cluster C. But any point of rank > 1 will

19

be Rt-related to points of lower rank, and indeed to points in the nucleus of some rank 1 cluster. Since
Rt is reﬂexive on a nucleus, this shows that Rt satisﬁes the stronger condition that ∀w∃v(wRtvRtv)
— “every world sees a reﬂexive world”.

4.7 Adding Reﬂexivity

Suppose that L contains the scheme

T: ϕ → ✸ϕ.

Then it contains

Tt: V Γ → htiΓ.
To see this, let ϕ =V Γ. Then ϕ →Vγ∈Γ(γ ∧ ϕ) is a tautology, hence derivable. From that we derive

✸(γ ∧ ϕ))

(4.13)

✷∗(ϕ →Vγ∈Γ

using the instances (γ ∧ ϕ) → ✸(γ ∧ ϕ) of axiom T and K-principles. But (4.13) is an antecedent of
axiom Ind, so we apply it to derive ϕ → htiΓ, which is Tt in this case.

Axiom T ensures that the canonical frame relation RL is reﬂexive, and hence so is RΦ by (r3).
Thus no RΦ-cluster is degenerate. We modify the deﬁnition of Rt to make it reﬂexive as well. The
change occurs in the case of an RΦ-cluster C having C 6= C ◦. Then instead of making the singletons
{w} for w ∈ C − C ◦ be degenerate, we make them all into non-Rt-degenerate clusters by requiring
that wRtw. Formally this is done by adding to the deﬁnition of wRtv the third possibility that

• w and v belong to the same RΦ-cluster C, and w = v ∈ C − C ◦.

Equivalently, the restriction of Rt to C is equal to (C × C ◦) ∪ {(w, w) : w ∈ C − C ◦}.

The proof of the Reduction Lemma for the resulting reﬂexive and transitive model Mt now re-
quires an adjustment in one place, in its last paragraph, where |x|Rt|z| ∈ C. In the original proof
above, this implied that the Rt-cluster of |z| is C ◦. But now we have the new possibility that
|x| = |z| ∈ C − C ◦. Then the Rt-cluster of |z| is {|z|}, so every formula of F is realised at |z|,

implying V Γ ∈ z. The scheme Tt now ensures that htiΓ ∈ z, so by Lemma 4.2 we still get the

required result that htiΓ ∈ x, and the Reduction Lemma still holds for this modiﬁed reﬂexive version
of Mt.

4.8 Finite model property over K4, KD4 and S4

Given a logic L and a ﬁnite set Φ of formulas closed under subformulas, we can construct a deﬁnable
reduction of any inner subframe F = (W, R) of FL by ﬁltration through Φ. An equivalence relation
∼ on W is given by putting x ∼ y iff x ∩ Φ = y ∩ Φ. Then with |x| = {y ∈ W : x ∼ y} we put
WΦ = {|x| : x ∈ W }.

Letting Rλ = {(|x|, |y|) : xRy} (the least ﬁltration of R through Φ), we deﬁne RΦ ⊆ WΦ × WΦ
to be the transitive closure of Rλ. Thus wRΦv iff there exist w1, . . . , wn ∈ WΦ, for some n > 1, such
that w = w1Rλ · · · Rλwn = v. The deﬁnition of MΦ is completed by putting hΦ(p) = {|x| : p ∈ x}
for p ∈ Φ, and hΦ(p) = ∅ (or anything) otherwise. We call MΦ the standard transitive ﬁltration
through Φ.

The surjective function f : W → WΦ is given by f (x) = |x|. The conditions (r1) and (r2)
for a deﬁnable reduction are then immediate, and the deﬁnability condition (r5) is standard. For (r3)
observe that xRy implies |x|Rλ|y| and hence |x|RΦ|y|.

20

(r4) takes more work, but is also standard for the case of ✸, and similar for hti. To prove it, let
|x|RΦ|y|. Then by deﬁnition of RΦ as the transitive closure of Rλ, there are ﬁnitely many elements
x1, y1, . . . , xn, yn of W (for some n ≥ 1) such that

x ∼ x1Ry1 ∼ x2Ry2 ∼ · · · ∼ xnRyn ∼ y.

Then htiΓ ∈ y ∩ Φt implies htiΓ ∈ yn as yn ∼ y, hence ✸htiΓ ∈ xn as xnRy, which implies
htiΓ ∈ xn by the scheme 4t. If n = 1 we then get htiΓ ∈ x because x ∼ x1. But if n > 1, we repeat
this argument back along the above chain of relations, leading to htiΓ ∈ xn−1, . . . ,htiΓ ∈ x1, and
then htiΓ ∈ x as required to conclude that y ∩ Φt ⊆ x ∩ Φt.

To show that {✸ϕ ∈ Φ : ✸∗ϕ ∈ y} ⊆ x, note that if ✸∗ϕ ∈ y, then either ϕ ∈ y or ✸ϕ ∈ y. If
ϕ ∈ y, then ϕ ∈ yn as yn ∼ y and ϕ ∈ Φ, hence ✸ϕ ∈ xn as xnRyn. But if ✸ϕ ∈ y then ✸ϕ ∈ yn,
hence ✸✸ϕ ∈ xn, and so again ✸ϕ ∈ xn, this time by scheme 4. Repeating this back along the chain
leads to ✸ϕ ∈ x as required.

Thus (MΦ, f ) as deﬁned is a deﬁnable reduction of F.
From this we can obtain a proof that the the smallest tangle system K4t has the ﬁnite model
property over transitive frames. If LK4t is its set of theorems, put F = FLK4t. If ϕ is a K4t-consistent
formula then ϕ ∈ x for some point x of F. Let Φ be the set of subformulas of ϕ, and Mt the model
derived from the model MΦ just deﬁned. Then Mt, |x| |= ϕ by the Reduction Lemma. But the ﬁnite
frame Ft = (WΦ, Rt) is transitive, so K4t has the ﬁnite model property over transitive frames, i.e. K4
frames.

If we replace K4t here by the smallest tangle system KD4t containing ✸⊤, then the frame Ft of
the last paragraph is serial, so {ψ : Ft |= ψ} is then a logic that contains ✸⊤, hence includes LKD4t.
Thus KD4t has the ﬁnite model property over serial transitive (i.e. KD4) frames.

Similarly, since Mt is reﬂexive when L contains the scheme T, we get that the smallest tangle

system S4t containing T has the ﬁnite model property over reﬂexive transitive (i.e. S4) frames.

4.9 Universal Modality

Extend the syntax to include the universal modality ∀ with semantics M, x |= ∀ϕ iff for all y, M, y |=
ϕ. Let K4t.U be the smallest tangle system that includes the S5 axioms and rules for ∀, and the scheme

U: ∀ϕ → ✷ϕ,

equivalently ✸ϕ → ∃ϕ, where ∃ = ¬∀¬ is the dual modality to ∀.

Let L be any K4t.U-logic. Deﬁne a relation SL on WL by: xSLy iff {ϕ : ∀ϕ ∈ x} ⊆ y iff

{∃ϕ : ϕ ∈ y} ⊆ x. Then SL is an equivalence relation with RL ⊆ SL. Also

∀ϕ ∈ x iff for all y ∈ WL, xSLy implies ϕ ∈ y.

For any ﬁxed x ∈ WL, let W x be the equivalence class SL(x) = {y ∈ WL : xSLy}. Then for
z ∈ W x,

∀ϕ ∈ z iff for all y ∈ W x, ϕ ∈ y.

(4.14)

Let Rx be the restriction of RL to W x. Since RL ⊆ SL it follows that F x = (W x, Rx) is an inner
subframe of (WL, RL). If MΦ is a deﬁnable reduction of F x, and Mt its untangling, then using
(4.14) it can be shown that if a formula ϕ ∈ Φ satisﬁes the Reduction Lemma

Mt, |z| |= ϕ iff ϕ ∈ z

21

for all z in Mt, then so does ∀ϕ. So the Reduction Lemma holds for all members of Φ.

Now the standard transitive ﬁltration can be applied to F x to produce a deﬁnable reduction of it.
Consequently, if ϕ is an L-consistent formula, x is a point of WL with ϕ ∈ x, and Φ is the set of all
subformulas of ϕ, then Mt, |x| |= ϕ where Mt is the untangling of the standard transitive ﬁltration
of F x through Φ. That establishes the ﬁnite model property for K4t.U over transitive frames.

This construction preserves seriality and reﬂexiveness in passing from RL to Rx and then Rt. The
outcome is that the ﬁnite model property continues to hold for the tangle systems KD4t.U and S4t.U
over the KD4 and S4 frames, respectively.

4.10 Path Connectedness

A connecting path between w and v in a frame (W, R) is a ﬁnite sequence w = w0, . . . , wn = v,
for some n ≥ 0, such that for all i < n, either wiRwi+1 or wi+1Rwi. We say that such a path has
length n. The points w and v of W are path connected if there exists a connecting path between
them of some ﬁnite length. Note that any point w is connected to itself by a path of length 0 (put
n = 0 and w = w0). The relation “w and v are path connected” is an equivalence relation whose
equivalence classes are the path components of the frame. The frame is path connected if it has a
single path component, i.e. any two points have a connecting path between them. This is iff the frame
is connected in the sense of section 2.2.

Later we will make use of the fact that a path component P is R-closed. For if x ∈ P and xRy,
then x and y are path connected, so y ∈ P . It follows that any R-cluster C that intersects P must be
included in P , for if x ∈ P ∩ C and y ∈ C, then xR∗y and so y ∈ P , showing that C ⊆ P .

We now wish to show that in passing from the frame FΦ = (WΦ, RΦ) to its untangling Ft, there
is no loss of path connectivity. The two frames have the same path connectedness relation and so
have the same path components. The idea is that the relations that are broken by the untangling only
occur between elements of the same RΦ-cluster, so it sufﬁces to show that such elements are still path
connected in Ft. For this we need to make the assumption that Φ contains the formula ✸⊤. This is
harmless as we can always add it and its subformula ⊤, preserving ﬁniteness of Φ.

LEMMA 4.7. Let ✸⊤ ∈ Φ. If w, w′ are points in WΦ with wRΦw′ or w′RΦw, but neither wRtw′
or w′Rtw, then there exist a v with wRtv and w′Rtv.

If wRΦw′, then since not wRtw′ we must have w and w′ in the same cluster. The same

Proof.
follows if w′RΦw, since not w′Rtw.

Thus there is an RΦ-cluster C with w, w′ ∈ C, so both wRΦw′ and w′RΦw. If C is not RΦ-
maximal, then there is an RΦ-cluster C ′ with CRΦC ′ and C 6= C ′. Taking any v ∈ C ′ we then get
wRtv and w′Rtv.

The alternative is that C is RΦ-maximal. Then we show that the nucleus C ◦ is non-empty. Let
w = |u| and w′ = |t|. Since |u|RΦ|t| and ⊤ ∈ t, and ✸⊤ ∈ Φ, property (r4) implies that ✸⊤ ∈ u.
Now if y is the critical point for C, then ✸⊤ ∈ y by Lemma 4.2. Hence there is a z with yRz. So
|y|RΦ|z| by (r3). Maximality of C then ensures that |z| ∈ C, so this implies that |z| ∈ C ◦. Then by
deﬁnition of Rt, since w, w′ ∈ C we have wRt|z| and w′Rt|z|.
✷

LEMMA 4.8. If ✸⊤ ∈ Φ, then two members of WΦ are path connected in FΦ if, and only if, they
are path connected in Ft. Hence the two frames have the same path components.

Proof. Since Rt ⊆ RΦ, a connecting path in Ft is a connecting path in FΦ, so points that are path
connected in Ft are path connected in FΦ.

22

Conversely, let π = w0, . . . , wn be a connecting path in FΦ. If, for all i < n, either wiRtwi+1 or
wi+1Rtwi, then π is a connecting path in Ft. If not, then for each i for which this fails, by Lemma
4.7 there exists some vi with wiRtvi and wi+1Rtvi. Insert vi between wi and wi+1 in the path. Doing
this for all “defective” i < n, creates a new sequence that is now a connecting path in Ft between the
same endpoints.
✷

Now let K4t.UC be the smallest extension of system K4t.U in the language with ∀ that includes

the scheme

C: ∀(✷∗ϕ ∨ ✷∗¬ϕ) → (∀ϕ ∨ ∀¬ϕ),

or equivalently ∃ϕ ∧ ∃¬ϕ → ∃(✸∗ϕ ∧ ✸∗¬ϕ).

Let L be any K4t.UC-logic. Let F x be a point-generated subframe of (WL, RL) as above, and
MΦ its standard transitive ﬁltration through Φ. Then the frame FΦ = (WΦ, RΦ) of MΦ is path
connected, as shown by Shehtman [32] as follows. If P is the path component of |x| in MΦ, take a
formula ϕ that deﬁnes f −1(P ) in W x, i.e. ϕ ∈ y iff |y| ∈ P , for all y ∈ W x. Suppose, for the sake of
contradiction, that P 6= WΦ. Then there is some z ∈ W x with |z| /∈ P , hence ¬ϕ ∈ z. Since ϕ ∈ x,
this gives ∃ϕ ∧ ∃¬ϕ ∈ x. By the scheme C it follows that for some y ∈ W x, ✸∗ϕ ∧ ✸∗¬ϕ ∈ y.
Hence there are z, w ∈ W x with yR∗z, ϕ ∈ z, yR∗w and ¬ϕ ∈ w.

From this we get |y|RΦ

∗|w| so the sequence |z|, |y|, |w| is a connecting path be-
tween |z| and |w| in FΦ. But |z| ∈ P as ϕ ∈ z, so this implies |w| ∈ P . Hence ϕ ∈ w, contradicting
the fact that ¬ϕ ∈ w. The contradiction forces us to conclude that P = WΦ, and hence that FΦ is
path connected.

∗|z| and |y|RΦ

From Lemma 4.8 it now follows that the untangling Ft of FΦ is also path connected when L
includes scheme C and ✸⊤ ∈ Φ. Hence the ﬁnite model property holds for K4t.UC over path-
connected transitive frames.

The arguments for the preservation of seriality and reﬂexiveness by Ft continue to hold here.
This gives us proofs of the ﬁnite model property for the systems, KD4t.UC and S4t.UC over path-
connected KD4 and S4 frames, respectively.

Note that for the L✷∀-fragments of these logics (i.e. their restrictions to the language without
hti), our analysis reconstructs the ﬁnite model property proof of [32] by using MΦ instead of Mt.
For, restricting to this language, if MΦ is a standard transitive ﬁltration of an inner subframe of FL,
then any hti-free formula is true in MΦ precisely at the points at which it is realised (for L✷ this is
a classical result ﬁrst formulated and proved in [30]). Thus a ﬁnite satisfying model for a consistent
L✷∀-formula can be obtained as a model of this form MΦ. Since seriality and reﬂexivity are preserved
in passing from RL to RΦ, and FΦ is path connected in the presence of axiom C, it follows that the
ﬁnite model property holds for each of the systems K4.UC, KD4.UC and S4.UC in the language L✷∀.

4.11 The Schemes Gn
Fix n ≥ 1 and take n + 1 variables p0, . . . , pn. For each i ≤ n, deﬁne the formula

Gn is the scheme consisting of all uniform substitution instances of the formula

Qi = pi ∧ ^i6=j≤n

¬pj.

^i≤n

✸Qi → ✸(^i≤n

✸∗¬Qi).

23

(4.15)

(4.16)

This is equivalent in any logic to

✷(_i≤n

✷∗Qi) → _i≤n

✷¬Qi,

the form in which the Gn’s were introduced in [31]. When n = 1, (4.16) is

✸(p0 ∧ ¬p1) ∧ ✸(p1 ∧ ¬p0) → ✸(✸∗¬(p0 ∧ ¬p1) ∧ ✸∗¬(p1 ∧ ¬p0)).

(4.17)

As an axiom, (4.17) is equivalent to

✸p ∧ ✸¬p → ✸(✸∗p ∧ ✸∗¬p),

(4.18)

or in dual form ✷(✷∗p ∨ ✷∗¬p) → ✷p ∨ ✷¬p, which is the form in which G1 was ﬁrst deﬁned in
[31]. To derive (4.18) from (4.17), substitute p for p0 and ¬p for p1 in (4.17). Conversely, substituting
p0 ∧ ¬p1 for p in (4.18) leads to a derivation of (4.17).

For the semantics of Gn, we use the set R(x) = {y ∈ W : xRy} of R-successors of x in a frame
(W, R). We can view R(x) as a frame in its own right, under the restriction of R to R(x), and consider
whether it is path connected, or how many path components it has etc. (W, R) is called locally n-
connected if, for all x ∈ W , the frame F(x) = (R(x), R↾R(x)) has at most n path components.
This is equivalent to the deﬁnition in section 2.2. Note that path components in F(x) are deﬁned by
connecting paths in (W, R) that lie entirely within R(x).

FACT 4.9. A K4 frame validates Gn iff it is locally n-connected.

For a proof of this see [23, Theorem 3.7].

4.12 Weak Models

We now assume that the set Var of variables is ﬁnite. The adjective “weak” is sometimes applied
to languages with ﬁnitely many variables, as well as to models for weak languages and to canonical
frames built from them. Weak models may enjoy special properties. For instance, a proof is given
in [31, Lemma 8] that in a weak distinguished2 model on a transitive frame, there are only ﬁnitely
many maximal clusters. This was used to show that a weak canonical model for the L✷-system
K4DG1 is locally 1-connected, and from this to obtain the ﬁnite model property for that system. The
corresponding versions of these results for K4DGn with n ≥ 2 are worked out in [23].

We wish to lift these results to the language Lhti

✷ with tangle. One issue is that the property of
a canonical model being distinguished depends on it satisfying the Truth Lemma: ML, x |= ϕ iff
ϕ ∈ x. As we have seen, this fails for tangle logics. Therefore we must continue to work directly with
the relation of membership of formulas in points of WL, rather than with their truth in ML. We will
see that it is still possible to recover Shehtman’s analysis of maximal clusters in FL, with the aid of
both tangle axioms.

Another issue is that we want to work over K4Gn without assuming the seriality axiom. This

requires further adjustments, and care with the distinction between R and R∗.

Let L be any tangle logic in our weak language. Put At = Var ∪ {✸⊤}. For each s ⊆ At deﬁne

the formula

χ(s) = ^ϕ∈s

ϕ ∧ ^ϕ∈At\s

¬ϕ.

2A model is distinguished if for any two of its distinct points there is a formula that is true in the model at one of the

points and not the other.

24

For each point x of WL deﬁne τ (x) = x ∩ At. Think of At as a set of “atoms” and τ (x) as the “atomic
type” of x. It is evident that for any x ∈ WL and s ⊆ At we have

χ(s) ∈ x iff s = τ (x).

(4.19)

Writing χ(x) for the formula χ(τ (x)), we see from (4.19) that χ(x) ∈ x, and in general χ(y) ∈ x iff
τ (y) = τ (x).

Now ﬁx an inner subframe F = (W, R) of FL. If C is an R-cluster in F, let

δC = {τ (x) : x ∈ C}

be the set of atomic types of members of C. We are going to show that maximal clusters in F are
determined by their atomic types. They key to this is:

LEMMA 4.10. Let C and C ′ be maximal clusters in F with δC = δC ′. Then for all formulas ϕ, if
x ∈ C and x′ ∈ C ′ have τ (x) = τ (x′), then ϕ ∈ x iff ϕ ∈ x′. Thus, x = x′.

Proof. Suppose C and C ′ are maximal with δC = δC ′. The key property of maximality that is used
is that if x ∈ C and xRy, then y ∈ C, and likewise for C ′.

The proof proceeds by induction on the formation of ϕ. The base case, when ϕ ∈ Var, is imme-
diate from the fact that then ϕ ∈ x iff ϕ ∈ τ (x). The induction cases for the Boolean connectives are
straightforward from properties of maximally consistent sets.

Now take the case of a formula ✸ϕ under the induction hypothesis that the result holds for ϕ,
i.e. ϕ ∈ x iff ϕ ∈ x′ for any x ∈ C and x′ ∈ C ′ such that τ (x) = τ (x′). Take such x and x′, and
assume ✸ϕ ∈ x. Then ϕ ∈ y for some y such that xRy. Then y ∈ C as C is maximal. Hence
τ (y) ∈ δC = δC ′, so τ (y) = τ (y′) for some y′ ∈ C ′. Therefore ϕ ∈ y′ by the induction hypothesis
on ϕ. But ✸⊤ ∈ x (as xRy), so ✸⊤ ∈ τ (x) = τ (x′). This gives ✸⊤ ∈ x′ which ensures that x′Rz
for some z, with z ∈ C ′ as C ′ is maximal, hence C ′ is a non-degenerate cluster.3 It follows that x′Ry′,
so ✸ϕ ∈ x′ as required. Likewise ✸ϕ ∈ x′ implies ✸ϕ ∈ x, and the Lemma holds for ✸ϕ.

Finally we have the case of a formula htiΓ under the induction hypothesis that the result holds for
every γ ∈ Γ. Suppose x ∈ C and τ (x) = τ (x′) for some x′ ∈ C ′. Let htiΓ ∈ x. Then by axiom Fix,
for each γ ∈ Γ we have ✸(γ ∧ htiΓ) ∈ x, implying that ✸γ ∈ x. Then applying to ✸γ the analysis of
✸ϕ in the previous paragraph, we conclude that C ′ is non-degenerate and there is some yγ ∈ C ′ with
γ ∈ yγ. Now if x′R∗z, then z ∈ C ′ so for each γ ∈ Γ we have zRyγ, implying that ✸γ ∈ z. This

proves that ✷∗(Vγ∈Γ

✸γ) ∈ x′. But putting ϕ = ⊤ in axiom Ind shows that the formula

✷∗(⊤ → ^γ∈Γ

✸(γ ∧ ⊤)) → (⊤ → htiΓ)

is an L-theorem, From this we can derive that ✷∗(Vγ∈Γ

✸γ) → htiΓ is an L-theorem, and hence
belongs to x′. Therefore htiΓ ∈ x′ as required. Likewise htiΓ ∈ x′ implies htiΓ ∈ x, and so the
Lemma holds for htiΓ.
✷

COROLLARY 4.11. If C and C ′ are maximal clusters in F with δC = δC ′, then C = C ′.

Proof.
then implies that x = x′ ∈ C ′, showing C ⊆ C ′. Likewise C ′ ⊆ C.

If x ∈ C, then τ (x) ∈ δC = δC ′, so there exists x′ ∈ C ′ with τ (x) = τ (x′). Lemma 4.10
✷

3That is the reason for including ✸⊤ in At.

25

COROLLARY 4.12. The set M of all maximal clusters of F is ﬁnite.

Proof. The map C 7→ δC is an injection of M into the double power set ℘℘At of the ﬁnite set At.
This gives an upper bound of 22n+1 on the number of maximal clusters, where n is the size of Var. ✷

Given subsets X, Y of W with X ⊆ Y , we say that X is deﬁnable within Y in F if there is a
formula ϕ such that for all y ∈ Y , y ∈ X iff ϕ ∈ y. We now work towards showing that within each
inner subframe R(x) in F, each path component is deﬁnable. For each cluster C, deﬁne the formula

α(C) = ^s∈δC

✸∗χ(s) ∧ ^s∈℘At\δC

¬✸∗χ(s).

The next result shows that a maximal cluster is deﬁnable within the set of all maximal elements of F.

LEMMA 4.13. If C is a maximal cluster and x is any maximal element of F, then x ∈ C iff α(C) ∈ x.

If s ∈ δC, then s = τ (y) for some y such that y ∈ C, hence xR∗y, and
Proof. Let x ∈ C.
χ(s) = χ(y) ∈ y, showing that ✸∗χ(s) ∈ x. The converse of this also holds: if ✸∗χ(s) ∈ x, then for
some y, xR∗y and χ(s) ∈ y. Hence y ∈ C by maximality of C, and s = τ (y) by (4.19), so s ∈ δC.
Contrapositively then, if s /∈ δC, then ✸∗χ(s) /∈ x, so ¬✸∗χ(s) ∈ x. Altogether this shows that all
conjuncts of α(C) are in x, so α(C) ∈ x.

In the opposite direction, suppose α(C) ∈ x. Let C ′ be the cluster of x. Then we want C = C ′ to
conclude that x ∈ C. Since x is maximal, i.e. C ′ is maximal, it is enough by Corollary 4.11 to show
that δC = δC ′.

Now if s ∈ δC, then s = τ (y) for some y ∈ C. But ✸∗χ(s) is a conjunct of α(C) ∈ x, so
✸∗χ(s) ∈ x. Hence there exists z with xR∗z and χ(s) ∈ z. Then z ∈ C ′ by maximality of C ′, and
by (4.19) s = χ(z) ∈ δC ′.

Conversely, if s ∈ δC ′, with s = τ (y) for some y ∈ C ′, then xR∗y as x ∈ C ′, and so ✸∗χ(s) ∈ x
as χ(s) = χ(y) ∈ y. Hence ¬✸∗χ(s) /∈ x. But then we must have s ∈ δC, for otherwise ¬✸∗χ(s)
would be a conjunction of α(C) and so would belong to x.
✷

It is shown in [31] that any transitive canonical frame (weak or not) has the Zorn property:

∀x ∃y(xR∗y and y is R-maximal).

Note the use of R∗: the statement is that either x is R-maximal, or it has an R-maximal successor.
The essence of the proof is that the relation {(x, y) : xR•y or x = y} is a partial ordering for which
every chain has an upper bound, so by Zorn’s Lemma R(x) has a maximal element provided that it is
non-empty.

The Zorn property is preserved under inner substructures, so it holds for our frame F. One inter-

esting consequence is:

LEMMA 4.14. For each x ∈ W , the frame F(x) = (R(x), R↾R(x)) has ﬁnitely many path compo-
nents, as does F itself.

Proof. The following argument works for both F and F(x), noting that the R↾R(x)-cluster of an
element of F(x) is the same as its R-cluster in F, and that all maximal clusters of F(x) are maximal
in F.

26

Let P be a path component and y ∈ P . By the Zorn property there is an R-maximal z with yR∗z.
Then z ∈ P as P is R∗-closed. So the R-cluster of z is a subset of P . Since this cluster is maximal,
that proves that every path component contains a maximal cluster.

Now distinct path components are disjoint and so cannot contain the same maximal cluster.
Since there are ﬁnitely many maximal clusters (Corollary 4.12), there can only be ﬁnitely many path
components.
✷

LEMMA 4.15. Let C be a maximal cluster in F. Then for all x ∈ W :

(1) C ⊆ R(x) iff ✸✷∗α(C) ∈ x.

(2) C ⊆ R∗(x) iff ✸∗✷∗α(C) ∈ x.

Proof. For (1), ﬁrst let C ⊆ R(x). Take any y ∈ C. Then if yR∗z we have z ∈ C as C is maximal,
therefore α(C) ∈ z by Lemma 4.13. Thus ✷∗α(C) ∈ y. But y ∈ R(x), so then ✸✷∗α(C) ∈ x.

Conversely, if ✸✷∗α(C) ∈ x then for some y, xRy and ✷∗α(C) ∈ y. By the Zorn property, take
a maximal z with yR∗z. Then α(C) ∈ z, so z ∈ C by Lemma 4.13. From xRyR∗z we get xRz, so
z ∈ R(x) ∩ C. Since R(x) is R∗-closed, this is enough to force C ⊆ R(x).

The proof of (2) is similar to (1), replacing R by R∗ where required.

✷

For a given x ∈ W , let P be a path component of the frame F(x) = (R(x), R↾R(x)). Let M (P )
be the set of all maximal R-clusters C that have C ⊆ P . Then M (P ) ⊆ M, where M is the set of all
maximal clusters of F, so M (P ) is ﬁnite by Corollary 4.12. Deﬁne the formula

Then α(P ) deﬁnes P within R(x):

α(P ) =_{✸∗✷∗α(C) : C ∈ M (P )}.

LEMMA 4.16. For all y ∈ R(x), y ∈ P iff α(P ) ∈ y.

Proof. Let y ∈ R(x). If y ∈ P , take an R-maximal z with yR∗z, by the Zorn property. Then
z ∈ R(x), and z is path connected to y ∈ P , so z ∈ P . The cluster Cz of z is then included in P (if
w ∈ Cz then zR∗w so w ∈ P ), and Cz is maximal, so Cz ∈ M (P ). The maximality of Cz together
with Lemma 4.13 then ensure that ✷∗α(Cz) ∈ z. Hence ✸∗✷∗α(Cz) ∈ y. But ✸∗✷∗α(Cz) is a
disjunct of α(P ), so α(P ) ∈ y.

Conversely, if α(P ) ∈ y, then ✸∗✷∗α(C) ∈ y for some C ∈ M (P ). By Lemma 4.15(2),
✷

C ⊆ R∗(y). Taking any z ∈ C, since also C ⊆ P we have yR∗z ∈ P , hence y ∈ P .

THEOREM 4.17. Suppose that L includes the scheme Gn. Then every inner subframe F of FL is
locally n-connected.

Proof. Let x ∈ W . We have to show that R(x) has at most n path components. If it has fewer
than n there is nothing to do, so suppose R(x) has at least n path components P0, . . . , Pn−1. Put
Pn = R(x) \ (P0 ∪ · · · ∪ Pn−1). We will prove that Pn = ∅, conﬁrming that there can be no more
components.

For each i < n, let ϕi be the formula α(Pi) that deﬁnes Pi within R(x) according to Lemma 4.16.

Let ϕn be ¬W{α(Pi) : 0 ≤ i < n}, so ϕn deﬁnes Pn within R(x). Now for all i ≤ n let ψi be the

formula obtained by uniform substitution of ϕ0, . . . , ϕn for p0, . . . , pn in the formula Qi of (4.15).

27

Observe that since the n + 1 sets P0, . . . , Pn form a partition of R(x), each y ∈ R(x) contains ψi for
exactly one i ≤ n, and indeed ψi deﬁnes the same subset of R(x) as ϕi.

element yi ∈ Pi. Then xRyi and ψi ∈ yi. It follows thatVi≤n
are in x, we then get ✸(Vi≤n

Now suppose, for the sake of contradiction, that Pn 6= ∅.4 Then for each i ≤ n we can choose an
✸ψi ∈ x. Since all instances of Gn
✸∗¬ψi) ∈ x. So there is some y ∈ R(x) such that for each i ≤ n there
exists a zi ∈ R∗(y) such that ¬ψi ∈ zi, hence ψi /∈ zi. Now let P be the path component of y. If
P = Pi for some i < n, then as y ∈ Pi and yR∗zi, we get zi ∈ Pi, and so ψi ∈ zi – which is false.
Hence it must be that P is disjoint from Pi for all i < n, and so is a subset of Pn. But then as yR∗zn
we get zn ∈ P ⊆ Pn, and so ψn ∈ zn. That is also false, and shows that the assumption that Pn 6= ∅
is false.
✷

4.13 Completeness and ﬁnite model property for K4Gn
For the language L✷ without hti, Theorem 4.17 provides a completeness theorem for any system
extending K4Gn by showing that any consistent formula ϕ is satisﬁable in a locally n-connected
weak canonical model (take a ﬁnite Var that includes all variables of ϕ and enough variables to have
Gn as a formula in the weak language). But the “satisﬁable” part of this depends on the Truth Lemma,
which is unavailable in the presence of hti. We will need to apply ﬁltration/reduction to establish
completeness itself, as well as the ﬁnite model property.

Let L be a weak tangle logic that includes Gn; F = (W, R) an inner subframe of FL; and Φ a

ﬁnite set of formulas that is closed under subformulas.

Recall that M is the set of all maximal clusters of F, shown to be ﬁnite in Corollary 4.12. For

each x ∈ W , deﬁne

M (x) = {C ∈ M : C ⊆ R(x)}.

Then M (x) is ﬁnite, being a subset of M.

Deﬁne an equivalence relation ≈ on W by putting

x ≈ y iff x ∩ Φ = y ∩ Φ and M (x) = M (y).

We then repeat the earlier standard transitive ﬁltration construction, but using the ﬁner relation ≈ in
place of ∼. Thus we put |x| = {y ∈ W : x ≈ y} and WΦ = {|x| : x ∈ W }. The set WΦ is ﬁnite,
because the map |x| 7→ (x ∩ Φ, M (x)) is a well-deﬁned injection of WΦ into the ﬁnite set ℘Φ × ℘M.
The surjective function f : W → WΦ is given by f (x) = |x|.

Let MΦ = (WΦ, RΦ, hΦ), where RΦ ⊆ WΦ × WΦ is the transitive closure of Rλ = {(|x|, |y|) :

xRy}, hΦ(p) = {|x| : p ∈ x} for p ∈ Φ, and hΦ(p) = ∅ otherwise.

We now verify that the pair (MΦ, f ) as just deﬁned satisﬁes the axioms (r1)–(r5) of a deﬁnable

reduction of F via Φ.

(r1): p ∈ x iff |x| ∈ hΦ(p), for all p ∈ Var ∩ Φ.

By deﬁnition of hΦ.

(r2): |x| = |y| implies x ∩ Φ = y ∩ Φ.

If |x| = |y| then x ≈ y, so x ∩ Φ = y ∩ Φ by deﬁnition of ≈.

(r3): xRy implies |x|RΦ|y|.

xRy implies |x|Rλ|y| and Rλ ⊆ RΦ.

4In that case Pn is the union of ﬁnitely many path components, by Lemma 4.14, but we do not need that fact.

28

(r4): |x|RΦ|y| implies y ∩ Φt ⊆ x ∩ Φt and {✸ϕ ∈ Φ : ✸∗ϕ ∈ y} ⊆ x.

The proof is the same as the proof given earlier of (r4) for the standard transitive ﬁltration, but
using ≈ in place of ∼ and the fact that x ≈ y implies x ∩ Φ = y ∩ Φ.

(r5): For each subset C of WΦ there is a formula ϕ that deﬁnes f −1(C) in W , i.e. ϕ ∈ y iff |y| ∈ C.
To see this, for each x ∈ W let γx be the conjunction of (x ∩ Φ) ∪ {¬ψ : ψ ∈ Φ \ x}. Then for
any y ∈ W ,

Next, let µx be the conjunction of the ﬁnite set of formulas

γx ∈ y

iff x ∩ Φ = y ∩ Φ.

{✸✷∗α(C) : C ∈ M (x)} ∪ {¬✸✷∗α(C) : C ∈ M \ M (x)}.

Lemma 4.15 showed that each C ∈ M has C ∈ M (x) iff ✸✷∗α(C) ∈ x. From this it follows
readily that for any y ∈ W ,

µx ∈ y

iff M (x) = M (y).

So putting ϕx = γx ∧ µx, we get that in general

ϕx ∈ y

iff x ≈ y

iff

|y| ∈ {|x|}.

Now if C = ∅, then ⊥ deﬁnes f −1(C) in W . Otherwise if C = {|x1|, . . . , |xn|}, then the
disjunction ϕx1 ∨ · · · ∨ ϕxn deﬁnes f −1(C) in W .

Consequently, the reduction Mt of MΦ satisﬁes the Reduction Lemma. We will show that Gn is
valid in the frame of Mt. But ﬁrst we show that it is valid in the frame of MΦ. Both cases involve
some preliminary analysis, involving linking points of RΦ(|y|) and Rt(|y|) back to points of R(y).
This requires further work with maximal elements and clusters.

LEMMA 4.18. For all x, y ∈ W , |x|R∗

Φ|y| implies M (y) ⊆ M (x).

If |x|R∗

Φ|y| there is a ﬁnite sequence x = z0, . . . , zk = y for some k ≥ 1 such that for all
Proof.
i < k, either zi ≈ zi+1 or ziRzi+1. But zi ≈ zi+1 implies M (zi) = M (zi+1), and ziRzi+1 implies
M (zi+1) ⊆ M (zi) by transitivity of R. This yields M (zk) ⊆ M (z0) by induction on k.
✷

LEMMA 4.19. Suppose At ⊆ Φ and a ∈ W is R-maximal. Then for all x ∈ W , xRa iff |x|RΦ|a|.

Proof. xRa implies |x|RΦ|a| by (r3). For the converse, suppose |x|RΦ|a| and let K be the maximal
R-cluster of a.

If K is non-degenerate then K ⊆ R(a), so K ∈ M (a). Then from |x|RΦ|a| we get K ∈ M (x)

by Lemma 4.18, implying xRa as required.

But if K is degenerate, then K = {a} and R(a) = M (a) = ∅. Also ✸⊤ /∈ a. Since |x|RΦ|a|, by
deﬁnition of RΦ there are z, w ∈ W with |x|R∗
Φ|z| and zRw ≈ a. As At ⊆ Φ, from w ≈ a we get
w ∩ At = a ∩ At, i.e. τ (w) = τ (a). In particular ✸⊤ /∈ w, hence w is also R-maximal. Therefore
a and w are maximal elements with the same atomic type, so w = a by Lemma 4.10. Thus zRa and
so K ∈ M (z). Since |x|R∗
Φ|z| this implies K ∈ M (x) by Lemma 4.18, giving the required xRa
again.

✷

LEMMA 4.20. For any y ∈ W , let A be the set of all R-maximal points in R(y). Then each point
v ∈ RΦ(|y|) has vR∗

Φ|a| for some a ∈ A.

29

Proof. Let v = |z| ∈ RΦ(|y|). By the Zorn property there exists an a with zR∗a and a is R-maximal.
If z = a, then z is R-maximal, so as |y|RΦ|z| we have z ∈ R(y) by Lemma 4.19. Hence z ∈ A, so in
this case we get |z|R∗

Φ|a| with a ∈ A by taking a = z.

If however z 6= a, then zRa, hence |z|RΦ|a| by (r3). Also, if C is the R-cluster of a, then C ⊆
R(z) and C is maximal, hence C ∈ M (z). But |y|RΦ|z|, so Lemma 4.18 then implies C ∈ M (y),
therefore a ∈ R(y). So in this case we have |z|RΦ|a| with a ∈ A.
✷

THEOREM 4.21. If At ⊆ Φ, the frame FΦ = (WΦ, RΦ) is locally n-connected.

Proof. For any point |y| ∈ WΦ, we have to show that RΦ(|y|) has at most n path components. But
if it had more than n, then by picking points from different components we would get a sequence of
more than n points no two of which were path connected. We show that this is impossible, by taking
an arbitrary sequence v0, . . . , vn of n + 1 points in RΦ(|y|), and proving that there must exist distinct
i and j such that vi and vj are path connected in RΦ(|y|).

For each i ≤ n, by Lemma 4.20 there is an R-maximal ai ∈ R(y) with viR∗

Φ|ai|. This gives us
a sequence a0, . . . , an of members of R(y). But R(y) has at most n path components, by Theorem
4.17. Hence there exist i 6= j ≤ n such that there is a connecting R-path ai = w0, . . . , wn = aj
between ai and aj that lies in R(y). So for all i < n we have yRwi and either wiRwi+1 or wi+1Rwi,
hence |y|RΦ|wi| and either |wi|RΦ|wi+1| or |wi+1|RΦ|wi|.

This shows that |ai| and |aj| are path connected in RΦ(|y|) by the sequence |w0|, . . . , |wn|. Since
Φ|ai| and vjR∗
✷

Φ|aj|, it follows that vi and vj are path connected in RΦ(|y|), as required.

viR∗

From this result we can infer that in the language L✷, for all n ≥ 1 the ﬁnite model property holds
for K4Gn and KD4Gn over locally n-connected K4 and KD4 frames, respectively. For the proof, we
take a consistent L✷-formula ϕ and let Φ be the closure under L✷-subformulas of At ∪ {ϕ}. Then Φ
is ﬁnite and ϕ is satisﬁable in the model MΦ (see the remarks about MΦ at the end of section 4.10).
But the frame FΦ of MΦ is locally n-connected by the theorem just proved, so validates Gn. Together
with the preservation of seriality by FΦ, this implies the ﬁnite model property results for K4Gn and
KD4Gn.

Extending to the language L✷∀, and using that FΦ is path connected in the presence of axiom
C, these ﬁnite model property results hold correspondingly for the four systems K4Gn.U, K4Gn.UC,
KD4Gn.U, and KD4Gn.UC.

We turn now to the corresponding results for the versions of these systems that include the tangle

connective.

LEMMA 4.22. If y ∈ W is the critical point for some RΦ-cluster, then z ∈ R(y) implies |z| ∈
Rt(|y|).

Proof. Let y be critical for cluster C. If z ∈ R(y), then |y|RΦ|z| (r3), so if |z| /∈ C then immediately
|y|Rt|z|. But if |z| ∈ C, then |z| ∈ C ◦ and again |y|Rt|z|.
✷

LEMMA 4.23. Suppose ✸⊤ ∈ Φ. Let y ∈ W be a critical point, and z, z′ ∈ R(y). If z and z′ are
path connected in R(y), then |z| and |z′| are path connected in Rt(|y|).

Proof. Let z = z0, . . . , zn = z′ be a connecting path between z and z′ within R(y). The criticality
of y ensures, by Lemma 4.22, that |z0|, . . . , |zn| are all in Rt(|y|). We apply Lemma 4.7 to convert
this sequence into a connecting Rt-path within Rt(|y|).

For each i < n we have ziRzi+1 or zi+1Rzi, hence |zi|RΦ|zi+1| or |zi+1|RΦ|zi| by (r3). So
if there is such an i that is “defective” in the sense that neither |zi|Rt|zi+1| nor |zi+1|Rt|zi|, then

30

by Lemma 4.7, which applies since ✸⊤ ∈ Φ, there exists a vi with |zi|Rtvi and |zi+1|Rtvi. Then
vi ∈ Rt(|y|) by transitivity of Rt, as |zi| ∈ Rt(|y|). We insert vi between |zi| and |zi+1| in the
sequence. Doing this for all defective i < n turns the sequence into a connecting Rt-path in Rt(|y|)
with unchanged endpoints |z| and |z′|.
✷

LEMMA 4.24. Suppose ✸⊤ ∈ Φ and a ∈ W is R-maximal. Then for all x ∈ W , |x|Rt|a| iff
|x|RΦ|a|.

|x|Rt|a| implies |x|RΦ|a| by deﬁnition of Rt. For the converse, suppose |x|RΦ|a|, let C be

Proof.
the RΦ-cluster of |x|, and let K be the maximal R-cluster of a.

If |a| /∈ C, then since |x|RΦ|a| it is immediate that |x|Rt|a| as required. We are left with the
case |a| ∈ C. Since ✸⊤ ∈ Φ and |x|RΦ|a| we get ✸⊤ ∈ x by (r4). As |x| and |a| both belong
to C, Lemma 4.2 then gives ✸⊤ ∈ a. So R(a) 6= ∅, implying that R(a) = K and M (a) = {K}.
Moreover, since |x|RΦ|a| we see that C is non-degenerate, so if y is the critical point for C then
|y|RΦ|a|, hence M (a) ⊆ M (y) by Lemma 4.18. Thus K ∈ M (y), making yRa, hence |a| ∈ C ◦ and
so again |x|Rt|a| as required.
✷

THEOREM 4.25. If At ⊆ Φ, the frame Ft = (WΦ, Rt) is locally n-connected.

Proof. This reﬁnes the proof of Theorem 4.21. If u ∈ WΦ, we have to show that Rt(u) has at most
n path components. Now if C is the RΦ-cluster of u, then Rt(u) is the union of the nucleus C ◦ and
all the RΦ-clusters coming strictly RΦ-after C. Hence Rt(u) = Rt(w) for all w ∈ C. In particular,
Rt(u) = Rt(|y|) where y is the critical point of C. So we show that Rt(|y|) has at most n path
components. We take an arbitrary sequence v0, . . . , vn of n + 1 points in Rt(|y|), and prove that there
must exist distinct i and j such that vi and vj are path connected in Rt(|y|).

Let A be the set of all R-maximal points in R(y). For each i ≤ n we have vi ∈ RΦ(|y|) and
so by Lemma 4.20 there is an ai ∈ A ⊆ R(y) such that viR∗
t |ai| by Lemma 4.24.
This gives us a sequence a0, . . . , an of members of R(y). But R(y) has at most n path components,
by Theorem 4.17. Hence there exist i 6= j ≤ n such that ai and aj are path connected in R(y).
Therefore by Lemma 4.23, |ai| and |aj| are path connected in Rt(|y|). Since viR∗
t |aj|,
and vi, vj ∈ Rt(|y|), it follows that vi and vj are path connected in Rt(|y|). That shows that Rt(|y|)
does not have more than n path components.
✷

Φ|ai|. Hence viR∗

t |ai| and vjR∗

This result combines with the analysis as in other cases to give the ﬁnite model property for the
tangle systems K4Gnt, K4Gnt.U, K4Gnt.UC, KD4Gnt, KD4Gnt.U, and KD4Gnt.UC for all n ≥ 1.

31

Part II

In the second part of the paper, we prove topological completeness theorems for the logics discussed
in part 1. The results in part 1 will of course be used, but much of part 2 can be read independently —
indeed, nearly all of it, if the reader takes the results of part 1 on trust.

5 Further basic deﬁnitions

In this section, the main deﬁnitions, notation, and basic results needed in Part 2 are developed.

5.1 Topological spaces

We will assume some familiarity with topology, but we take some time to reprise the main concepts
and notation. A topological space is a pair (X, τ ), where X is a set and τ ⊆ ℘(X) satisﬁes:

1. if S ⊆ τ thenS S ∈ τ ,
2. if S ⊆ τ is ﬁnite thenT S ∈ τ , on the understanding thatT ∅ = X.

So τ is a set of subsets of X closed under unions and ﬁnite intersections. By taking S = ∅, it
follows that ∅, X ∈ τ . The elements of τ are called open subsets of X, or just open sets. An open
neighbourhood of a point x ∈ X is an open set containing x. A subset C ⊆ X is called closed if
X \ C is open. The set of closed subsets of X is closed under intersections and ﬁnite unions. If O is
open and C closed then O \ C is open and C \ O is closed.

We use the signs int, cl, hdi to denote the interior, closure, and derivative operators, respectively.

So for S ⊆ X,

• int S =S{O ∈ τ : O ⊆ S} — the largest open set contained in S,
• cl S = T{C ⊆ X : C closed, S ⊆ C} — the smallest closed set containing S; we have

cl S = {x ∈ X : S ∩ O 6= ∅ for every open neighbourhood O of x},

• hdiS = {x ∈ X : S ∩ O \ {x} 6= ∅ for every open neighbourhood O of x}.

Then int S ⊆ S ⊆ cl S ⊇ hdiS. For all subsets A, B of X, we have

cl(A ∪ B) = cl A ∪ cl B,

hdi(A ∪ B) = hdiA ∪ hdiB,
int(A ∩ B) = int A ∩ int B.

That is, closure and hdi are additive and interior is multiplicative.

We follow standard practice and identify (notationally) the space (X, τ ) with X. The reader
should note that we do allow empty topological spaces, where X = ∅. This is particularly useful
when dealing with subspaces.

A subspace of X is a topological space of the form (Y, {O ∩ Y : O ∈ τ }), for (possibly empty)
It is a subset of X, made into a topological space by endowing it with what is called
Y ⊆ X.
the subspace topology.
It is said to be an open subspace if Y is an open subset of X. As with
X, we identify (notationally) the subspace with its underlying set, Y . We write intY , clY for the
operations of interior and closure in the subspace Y . It can be checked that for every S ⊆ Y we have
clY S = Y ∩ cl S, and if Y is an open subspace then intY S = int S.

32

We will be considering various properties that a topological space X may have. We leave most of
them for later, but we mention now that X is said to be dense in itself if no singleton subset is open,
connected if it is not the union of two disjoint non-empty open sets, and separable if it has a countable
subset D with X = cl D. X is T1 if every singleton subset {x} is closed, and TD if the derivative
hdi{x} of every singleton is closed, which is equivalent to requiring hdihdi{x} ⊆ hdi{x}. The TD
property, introduced in [2], is strictly weaker than T1.

5.2 Metric spaces

A metric space is a pair (X, d), where X is a set and d : X × X → R is a ‘distance function’ (having
nothing to do with the modal operator hdi) satisfying, for all x, y, z ∈ X,

1. d(x, y) ≥ 0,

2. d(x, y) = 0 iff x = y,

3. d(x, y) = d(y, x),

4. d(x, z) ≤ d(x, y) + d(y, z) (the ‘triangle inequality’).

We assume some experience of working with this deﬁnition, in particular with the triangle inequality.
Examples of metric spaces abound and include the real numbers R with the standard distance function
d(x, y) = |x−y|, Rn with Pythagorean distance, etc. As usual, we often identify (notationally) (X, d)
with X.

Let (X, d) be a metric space, and x ∈ X. For non-empty S ⊆ X, deﬁne

d(x, S) = inf{d(x, y) : y ∈ S}.

We leave d(x, ∅) undeﬁned. For a real number ε > 0, we let Nε(x) denote the so-called ‘open ball’
{y ∈ X : d(x, y) < ε}. A metric space (X, d) gives rise to a topological space (X, τd) in which a
subset O ⊆ X is declared to be open (i.e., in τd) iff for every x ∈ O, there is some ε > 0 such that
Nε(x) ⊆ O. In other words, the open sets are the unions of open balls. We frequently regard a metric
space (X, d) equally as a topological space (X, τd). So, we will say that a metric space has a given
topological property (such as being dense in itself) if the associated topological space has the property.
As an example, every metric space is TD, since it has the stronger Hausdorff (or T2) property.

A subspace of a metric space (X, d) is a pair of the form (Y, d ↾ Y × Y ), where Y ⊆ X. It is

plainly a metric space, and the topological space (Y, τd↾Y ×Y ) is a subspace of (X, τd).

5.3 Topological semantics

Given a topological space X, an assignment into X is simply a map h : Var → ℘(X). A topological
model is a pair (X, h), where X is a topological space and h an assignment into X. We will also
be considering topological models where Var is replaced by some other set of atoms. Details will be
given later.

As with Kripke models, we attribute a topological property to a topological model if the underlying

topological space has the property.

For every topological model (X, h) and every point x ∈ X, we deﬁne (X, h), x |= ϕ, for a

Lµhtihdti
✷[d]∀ -formula ϕ, by induction on ϕ:
1. (X, h), x |= p iff x ∈ h(p), for p ∈ Var.

33

2. (X, h), x |= ⊤.

3. (X, h), x |= ¬ϕ iff (X, h), x 6|= ϕ.

4. (X, h), x |= ϕ ∧ ψ iff (X, h), x |= ϕ and (X, h), x |= ψ.

5. (X, h), x |= ✷ϕ iff there is an open neighbourhood O of x with (X, h), y |= ϕ for every y ∈ O.

6. (X, h), x |= [d]ϕ iff there is an open neighbourhood O of x with (X, h), y |= ϕ for every

y ∈ O \ {x}. We do not require ϕ to hold at x itself.

7. (X, h), x |= ∀ϕ iff (X, h), y |= ϕ for every y ∈ X.

8. For a non-empty ﬁnite set ∆ of formulas for which we have inductively deﬁned semantics, write

[[δ]] = {x ∈ X : (X, h), x |= δ}, for each δ ∈ ∆. Then deﬁne:

• (X, h), x |= hti∆ iff there is some S ⊆ X such that x ∈ S ⊆Tδ∈∆ cl([[δ]] ∩ S),
• (X, h), x |= hdti∆ iff there is some S ⊆ X such that x ∈ S ⊆Tδ∈∆ hdi([[δ]] ∩ S).

9. Suppose inductively that [[ϕ]]h = {x ∈ X : (X, h), x |= ϕ} is well deﬁned, for every assign-

ment h into X. Deﬁne a map f : ℘(X) → ℘(X) by

f (S) = [[ϕ]]h[S/q]

for S ⊆ X,

where h[S/q] is deﬁned as in Kripke semantics (section 2.5). Again, f is monotonic, and we
deﬁne (X, h), x |= µqϕ iff x ∈ LF P (f ).

The deﬁnition makes sense but has no content if X is empty: there are no points x ∈ X to evaluate
at. Writing [[ϕ]]h = {x ∈ X : (X, h), x |= ϕ}, we have [[✷ϕ]]h = int([[ϕ]]h), [[✸ϕ]]h = cl([[ϕ]]h), and
[[hdiϕ]]h = hdi([[ϕ]]h) for each ϕ, h. Again, [[νqϕ]] = GF P (f ), where ϕ, f are as in the last clause.

REMARK 5.1. Again we brieﬂy discuss the semantics of hti and hdti (see clause 8 above). With
ϕ ≡ ψ redeﬁned to mean that (X, h), x |= ϕ ↔ ψ for every topological model (X, h) and x ∈ X,
the equivalences in (2.1) above continue to hold, and indeed they motivate clause 8. However, there
is a perhaps more intuitive meaning for hti and hdti in terms of games, which are used extensively in
the mu-calculus. Let players ∀, ∃ play a game of length ω on X. Initially, the position is x. In each
round, if the current position is y ∈ X, player ∀ chooses an open neighbourhood O of y and a formula
δ ∈ ∆. Player ∃ must select a point z ∈ O at which δ is true (and with z 6= y in the case of hdti). If
she cannot, player ∀ wins. That is the end of the round, and the next round commences from position
z. Player ∃ wins if she survives every round. It can be checked that (X, h), x |= hti∆ (respectively,
(X, h), x |= hdti∆) iff ∃ has a winning strategy in this game (respectively, the game where she must
additionally choose z 6= y).

5.4 Topological semantics in open subspaces

Let X be a topological space and Y a subspace of X. Each assignment h : Var → ℘(X) into
X induces an assignment hY into Y , via hY (p) = Y ∩ h(p), for each p ∈ Var. Thus, we can
evaluate formulas at points in Y in both (X, h) and (Y, hY ). Because the semantics of the connectives
✷, [d], hti, hdti depend on only arbitrarily small open neighbourhoods of the evaluation point, it is
easily seen that if Y is an open subspace of X, we get the same result for every formula not involving
∀. That is, the following analogue of lemma 2.1 holds:

34

LEMMA 5.2. Whenever Y is an open subspace of X, we have (X, h), y |= ϕ iff (Y, hY ), y |= ϕ, for
every y ∈ Y and ϕ ∈ Lµhtihdti

.

✷[d]

(This holds vacuously if Y is empty.)

5.5 Satisﬁability, validity, equivalence

Let X be a topological space. A set Γ of Lµhtihdti
an assignment h into X and a point x ∈ X such that (X, h), x |= γ for every γ ∈ Γ.

✷[d]∀ -formulas is said to be satisﬁable in X if there exist

Let ϕ be an Lµhtihdti

-formula. We say that ϕ is satisﬁable in X if the set {ϕ} is so satisﬁable. We
say that ϕ is valid in X, or that X validates ϕ, if ¬ϕ is not satisﬁable in X. We also say that ϕ is
equivalent to a formula ψ in X if ϕ ↔ ψ is valid in X.

✷[d]∀

In any space X, the ‘4’ schema: ✷ϕ → ✷✷ϕ is valid under the interpretation [[✷ϕ]] = int[[ϕ]].
But the schema [d]ϕ → [d][d]ϕ, or equivalently hdihdiϕ → hdiϕ, is valid under the interpretation
[[hdiϕ]] = hdi[[ϕ]] if, and only if, X is a TD space. This is because in any space the derivatives of all
subsets are closed iff the derivatives of all singletons are closed (see [2, Theorem 5.1]).

5.6 Logics

Let K be a class of topological spaces. In the context of a given language L ⊆ Lµhtihdti
✷[d]∀ , the (L)-logic
of K is the set of all L-formulas that are valid in every member of K. Exactly as for Kripke semantics,
a Hilbert system H for L with set of theorems T is said to be

• sound over K if T is a subset of the logic of K (all H-theorems are valid in K),

• weakly complete, or simply complete, over K if T contains the logic of K (all K-valid formulas

are H-theorems),

• strongly complete over K if every countable H-consistent set Γ of L-formulas is satisﬁable in

some structure in K.

For example the L[d]-system K4 is sound and complete over the class of all TD-spaces, a result due to
Esakia (see [9]).

The logic of a single space X is deﬁned to be the logic of the class {X}; similar deﬁnitions are

used for the other terms here.

We say that a topological space X validates H if H is sound over X. To establish this, it is enough

to check that each axiom of H is valid in X, and that each rule of H preserves X-validity.

It can be checked that H is weakly complete over K iff every ﬁnite H-consistent set of formulas
is satisﬁable in some space in K. Hence, every strongly complete Hilbert system is also weakly
complete. The main aim of this part of the paper is to provide Hilbert systems that are (where possible)
sound and strongly complete over various topological spaces, with respect to various sublanguages of
Lµhtihdti
✷[d]∀ .

6 Translations

The language Lµhtihdti
has some redundancy. We can express ✷ with [d], and hti with hdti (but not
vice versa). We can also express hti, hdti with µ — and often vice versa, using results of Dawar and
Otto [7].

✷[d]∀

35

Later, we will need translations that work in both topological spaces and (possibly restricted)
Kripke models. In this section, we will explore translations — but only to the extent needed for later
work. We will again assume that Var is inﬁnite.

6.1 Translating hdi and hdti to µ

This is the simplest case. We have already seen the idea, in the equivalence of hti- and hti-formulas
to ν-formulas given in (2.1) in section 2.5.

DEFINITION 6.1. For each Lµhtihdti

✷[d]∀ -formula ϕ, we deﬁne a Lµ

✷[d]∀-formula ϕµ as follows:

1. pµ = p for p ∈ Var.

2. −µ commutes with the boolean connectives, ✷, [d], ∀, and µ (cf. deﬁnition 3.4).

✸(δµ ∧ q), where q ∈ Var does not occur in any δµ (δ ∈ ∆).

3. (hti∆)µ = νqVδ∈∆
4. (hdti∆)µ = νqVδ∈∆ hdi(δµ ∧ q), where q ∈ Var does not occur in any δµ (δ ∈ ∆).

These formulas can be checked to be well formed. The translation simply replaces hti by an
then

✷ then ϕµ ∈ Lµ

expression using µ and ✷, and similarly for hdti. So if ϕ ∈ Lhti
ϕµ ∈ Lµ

✷, if ϕ ∈ Lhdti
[d]

[d], etc.

This translation is faithful in all relevant semantics:

LEMMA 6.2. Let ϕ be any Lµhtihdti
frame and in every topological space. (See sections 2.8 and 5.5 for the deﬁnition of equivalence.)

-formula. Then ϕ is equivalent to ϕµ in every transitive Kripke

✷[d]∀

Proof. An easy induction on ϕ. We consider only the case hti∆ (for ﬁnite ∆ 6= ∅), and only in
Kripke semantics (the case hdti∆ is of course identical). Assume the lemma for each δ ∈ ∆. Take
any transitive Kripke model M = (W, R, h) and any w ∈ W . Inductively, M, w |= (hti∆)µ iff
✸(δ ∧ q). By the post-ﬁxed point characterisation of greatest ﬁxed points, this
holds iff (∗) there is S ⊆ W with w ∈ S and such that for every s ∈ S and δ ∈ ∆, there is t ∈ S with
sRt and M, t |= δ.

M, w |= νqVδ∈∆

Assuming (∗), it is easy to choose a sequence w = s0Rs1Rs2 . . . in S by induction so that
{n < ω : M, sn |= δ} is inﬁnite for every δ ∈ ∆. It follows that M, w |= hti∆. Conversely, if
M, w |= hti∆ then there are worlds w = w0Rw1Rw2 . . . in W with {n < ω : M, wn |= δ} inﬁnite
for every δ ∈ ∆. Let S = {wn : n < ω}. Then w ∈ S, and for each wn ∈ S and δ ∈ ∆, there is
m > n with M, wm |= δ. Then wm ∈ S, and by transitivity of R we have wnRwm. So (∗) holds. ✷

6.2 Translating ✷ to [d] and hti to hdti

Just replacing ✷ by [d] and hti by hdti in a formula ϕ ∈ Lµhtihdti
[d]∀ -formula equivalent
to ϕ in all Kripke frames. But the two are not equivalent in topological spaces, so we seek a better
translation that works in both semantics.

yields an Lµhdti

✷[d]∀

DEFINITION 6.3. For each Lµhtihdti

✷[d]∀ -formula ϕ, we deﬁne a Lµhdti

[d]∀ -formula ϕd as follows:

1. pd = p for p ∈ Var.

2. −d commutes with the boolean connectives, [d], hdti, ∀, and µ.

36

3. (✷ϕ)d = ϕd ∧ [d]ϕd.

4. (hti∆)d = (V ∆d) ∨ hdi(V ∆d) ∨ (hdti∆d), where ∆d = {δd : δ ∈ ∆}.

Again, ϕd is always well formed. The translation −d is pretty good:

LEMMA 6.4. Each Lµhtihdti

✷[d]∀

-formula ϕ is equivalent to ϕd in every reﬂexive Kripke frame.

Proof. An easy induction on ϕ. To show, e.g., that ✷ϕ implies (✷ϕ)d, we need reﬂexivity. We also
✷

note thatV ∆ and hdiV ∆ both imply hti∆ in reﬂexive Kripke models.

-formula ϕ is equivalent to ϕd in a topological space X if, and only if,

LEMMA 6.5. Each Lµhtihdti
X is TD.

✷[d]∀

Proof. Let X be a TD topological space. We prove by induction on ϕ that each Lµhtihdti
-formula
ϕ is equivalent to ϕd in X. We consider only two cases: ✷ϕ and hti∆.
Inductively assume the
result for ϕ and each formula in the ﬁnite set ∆ of formulas, let h be an assignment into X, and let
x ∈ X. In the proof, we write ‘x |= ’ as short for ‘(X, h), x |=’, and for a formula ϕ, we write
[[ϕ]] = {y ∈ X : y |= ϕ}.

✷[d]∀

We prove that x |= ✷ϕ ↔ (✷ϕ)d. We have x |= ✷ϕ iff for some open neighbourhood O of x,
we have (X, h), y |= ϕ for every y ∈ O. This is plainly iff x |= ϕ ∧ [d]ϕ. Inductively, this is iff
x |= ϕd ∧ [d]ϕd — i.e., iff x |= (✷ϕ)d.

Now we prove that x |= hti∆ ↔ (hti∆)d. Recall that

(hti∆)d = (^ ∆d) ∨ hdi(^ ∆d) ∨ (hdti∆d).

First we prove that x |= (hti∆)d → hti∆. Suppose that x |= (hti∆)d. To show that x |= hti∆, we

So for every y ∈ U, there is δy ∈ ∆ with y |= ¬δd
y.

need to ﬁnd S ⊆ X with x ∈ S ⊆Tδ∈∆ cl([[δ]] ∩ S). If x |=V ∆d, take S = {x}. If x |= hdiV ∆d,
take S = {x} ∪ [[V ∆d]]. And if x |= hdti∆d, there is S ⊆ X with x ∈ S ⊆Tδ∈∆ hdi([[δ]] ∩ S); then
x ∈ S ⊆Tδ∈∆ cl([[δ]] ∩ S) as required.
It remains to prove that x |= hti∆ → (hti∆)d. So suppose that x |= hti∆. If x |= (V ∆d) ∨
hdi(V ∆d), we are done.
So suppose not. Thus, there is an open neighbourhood U of x with y |= ¬V ∆d for every y ∈ U.
Since x |= hti∆, there is S ⊆ X with x ∈ S ⊆Tδ∈∆ cl([[δ]] ∩ S).
Claim. Put S′ = U ∩ S. Then x ∈ S′ ⊆Tδ∈∆ hdi([[δd]] ∩ S′).

Proof of claim. Plainly, x ∈ S′. For the other half, let y ∈ S′ and δ ∈ ∆ be arbitrary; we show that
y ∈ hdi([[δd]]∩S′). So let O be any open neighbourhood of y. As X is TD, hdi{y} is closed, so since it
does not contain y, O ∩ U \ hdi{y} is an open neighbourhood of y too. As y ∈ S′ ⊆ S ⊆ cl([[δy]] ∩ S),
there is some z ∈ O ∩ U ∩ S \ hdi{y} with z |= δy. But y |= ¬δd
y, so inductively, y |= ¬δy. It follows
that z 6= y.

We prove that x |= hdti∆d.

Now we have z /∈ {y} ∪ hdi{y} = cl{y}, so O ∩ U \ cl{y} is an open neighbourhood of z. Since
z ∈ S ⊆ cl([[δ]] ∩ S), there is some t ∈ O ∩ U ∩ S \ cl{y} = O ∩ S′ \ cl{y} with t |= δ. Then t 6= y.
Since O was arbitrary, this shows that y ∈ hdi([[δ]] ∩ S′). Since inductively, [[δ]] = [[δd]], this proves
the claim.

37

By deﬁnition of the semantics, the claim immediately yields x |= hdti∆d as required. This
completes the induction and the proof that each ϕ is equivalent to ϕd. (The reader may like to construct
an alternative proof using the games described in remark 5.1.)

Conversely, to show that the TD hypothesis is necessary, we ﬁrst prove

LEMMA 6.6. In any space X, for any x ∈ X, cl hdi{x} \ hdi{x} ⊆ {x}. Hence hdi{x}
is closed iff x /∈ cl hdi{x}.

Proof. For the ﬁrst part, since hdi{x} ⊆ cl{x} and the latter is closed, cl hdi{x} ⊆
cl{x} = hdi{x} ∪ {x}. This implies cl hdi{x} \ hdi{x} ⊆ {x}.
For the second part, hdi{x} is closed iff cl hdi{x} \ hdi{x} = ∅. By the ﬁrst part,
this holds iff x /∈ cl hdi{x} \ hdi{x}. But x /∈ hdi{x}, so x /∈ cl hdi{x} \ hdi{x} iff
x /∈ cl hdi{x}.
✷

Now suppose the space X is not TD. Then there is some point x of X with hdi{x} not closed. By
Lemma 6.6, x ∈ cl hdi{x}. Hence cl{x} ⊆ cl hdi{x}. Let p ∈ Var and h : Var → ℘X satisfy
h(p) = {x} for some (arbitrary) x. Then (X, h), x |= hti{p, hdip}, but (X, h), x 6|= (hti{p, hdip})d,
i.e. (X, h), x 6|= (p ∧ hdip) ∨ hdi(p ∧ hdip) ∨ hdti{p, hdip}, giving a case of ϕ not being equivalent
to ϕd. That x 6|= (p ∧ hdip) ∨ hdi(p ∧ hdip) follows because [[p ∧ hdip]] = {x} ∩ hdi{x} = ∅. That
x 6|= hdti{p, hdip} follows as no punctured neighbourhood O \ {x} contains a point of [[p]] = {x}. To
see that x |= hti{p, hdip}, let S = cl{x}. Then S is included in both cl([[p]] ∩ S) = cl{x} = S and
cl([[hdip]] ∩ S) = cl(hdi{x}) (because cl{x} ⊆ cl hdi{x} as noted above). Since x ∈ S, it follows
that x |= hti{p, hdip} .
✷

6.3 Translating µ to hti
We use this translation only to prove strong completeness for Lµ
✷ in theorem 10.3(2). Fortunately,
most of the hard work involved has already been done by others. We will need only the fact below,
but its proof was a major enterprise.

FACT 6.7 (Dawar–Otto, [7, theorem 4.57(5)]). For each formula ϕ of Lµ
Lhti

✷ that is equivalent to ϕ in every ﬁnite transitive Kripke frame.

✷, there is a formula ϕt of

To lift this to topological spaces, we will use the proof theory from section 3.

COROLLARY 6.8. Each Lµ

✷-formula ϕ is equivalent to ϕt in every topological space.

Proof. By fact 6.7 and lemma 6.2, ϕ ↔ (ϕt)µ is an Lµ
frame. By theorem 3.7, S4µ ⊢ ϕ ↔ (ϕt)µ.

✷-formula valid in every ﬁnite transitive Kripke

Now it is easy to check that S4µ is sound over every topological space. (The S4 axioms are sound
by deﬁnition of the topological semantics of ✷, and the ﬁxed point axiom and rule are sound by the
semantics of µ.) Hence, ϕ ↔ (ϕt)µ is valid in every topological space. But by lemma 6.2, (ϕt)µ is
equivalent to ϕt in every topological space. We conclude that ϕ is equivalent to ϕt in every topological
space, as required.
✷

38

By the corollary and lemma 6.2, Lµ
topological space.

✷ and Lhti

✷ uniformly have the same expressive power in every

[d] to Lhdti

Since ✷, [d] and hti, hdti are indistinguishable in Kripke semantics, a similar analysis would give
a translation from Lµ
(For this purpose, the T axiom
✷ϕ → ϕ would be dropped in section 3, and the translation in deﬁnition 3.4 adapted to represent
transitive closure.) The translation would show that Lµ
[d] are equally expressive over all
TD topological spaces. We could use it to lift weak completeness for Lµ
[d] to strong completeness.
Unfortunately, we do not have a weak completeness result for Lµ

[d] valid in every topological space.

[d] and Lhdti

[d] to lift.

7 More topology

The ﬁnite model property theorems of Part 1 will be instrumental in our completeness theorems for
(some) topological spaces. Not surprisingly, we will also need some simple and standard topological
deﬁnitions and results, together with some more substantial ones. The ﬁrst one is very simple.

LEMMA 7.1. Let X be a dense-in-itself TD topological space. Then every non-empty open subset of
X is inﬁnite.

It sufﬁces to show that every non-empty open subset O has a non-empty open proper subset
Proof.
O′, since inﬁnitely many iterations of that fact will produce an inﬁnite sequence of distinct points
in O. Take any x ∈ O. Then x belongs to O \ hdi{x}, which is open as hdi{x} is closed in the
TD-space. Since X is dense-in-itself, there must then be some y 6= x with y ∈ O \ hdi{x}. As y 6= x
and y /∈ hdi{x}, y has an open neighbourhood U with x /∈ U. Put O′ = O ∩ U to get that O′ is open,
non-empty as it contains y, and a proper subset of O as it does not contain x.
✷

7.1 The hdi operator on sets

Let X be a topological space. For a set S ⊆ X, recall that hdiS = {x ∈ X : S ∩ O \ {x} 6= ∅
for every open neighbourhood O of x}, the set of strict limit points of S. The hdi operator has the
following basic properties.

LEMMA 7.2. Let S, T ⊆ X.

1. cl S = S ∪ hdiS.

2. hdi is additive: hdi(S ∪ T ) = hdiS ∪ hdiT .

3. If X is dense in itself, then (i) int S ⊆ hdiS, and (ii) if S is open then hdiS = cl S.

Proof. Easy.

7.2 Regular open sets

✷

Let X be a topological space. A regular open subset of X is one equal to the interior of its closure.
We will mainly be interested in regular open subsets of open subspaces of X, so we give deﬁnitions
directly for such situations.

DEFINITION 7.3. Let U be an open subset of X. A subset S of X is said to be a regular open
subset of U if S = int(U ∩ cl S).

39

As ‘int’ is multiplicative and U is open, it is equivalent to say that S = U ∩ int cl S, and we
sometimes prefer this formulation. In such a case, S ⊆ U and S is open. So S = intU clU S: S
is a regular open subset of the subspace U of X. It is worth noting that if S ⊆ U is arbitrary then
intU clU S is a regular open subset of U.

It is known (see, e.g., [14, chapter 10]) that for every open subset U of X, the set RO(U ) of

regular open subsets of U is closed under the operations +, ·, −, 0, 1 deﬁned by

• S + S′ = U ∩ int cl(S ∪ S′)

• S · S′ = S ∩ S′

• −S = U \ cl S

• 0 = ∅ and 1 = U,

and (RO(U ), +, ·, −, 0, 1) is a (complete) boolean algebra. We will also use the notation RO(U ) to
denote this boolean algebra. The standard boolean ordering ≤ on RO(U ) coincides with set inclusion,
because for S, T ∈ RO(U ) we have S ≤ T iff S · T = S, iff S ∩ T = S, iff S ⊆ T . We will need
the following general lemma.

LEMMA 7.4. Let V ⊆ U be open subsets of X, and S, S′ be regular open subsets of U.

1. If T = U \ cl S, then T is also a regular open subset of U, with S = U \ cl T and U \ S ⊆ cl T .

2. If U ∩ cl S ∩ cl S′ = ∅, then S + S′ = S ∪ S′.

3. If S ⊆ V , then S is a regular open subset of V .

4. Every regular open subset of S is a regular open subset of U.

Proof.

1. The ﬁrst two points follow from boolean algebra considerations, and can easily be

shown directly. The third point, U \ S ⊆ cl T , follows from U \ cl T = S.

2. Since S, S′ ≤ S +S′ and ≤ coincides with ⊆, we obtain S, S′ ⊆ S +S′ and so S ∪S′ ⊆ S +S′.

Conversely, it is easy to check5 that

int cl(S ∪ S′) ⊆ int cl S ∪ int cl S′ ∪ (cl S ∩ cl S′).

Since U ∩ cl S ∩ cl S′ = ∅,

S + S′ = U ∩ int cl(S ∪ S′) ⊆ (U ∩ int cl S) ∪ (U ∩ int cl S′) = S ∪ S′,

as required.

3. V ∩ int cl S = (V ∩ U ) ∩ int cl S = V ∩ (U ∩ int cl S) = V ∩ S = S.

4. Let T be a regular open subset of S. Clearly, int cl T ⊆ int cl S. So U ∩ int cl T = U ∩

(int cl S ∩ int cl T ) = (U ∩ int cl S) ∩ int cl T = S ∩ int cl T = T .

✷

5Indeed, ✷✸(p ∨ q) → ✷✸p ∨ ✷✸q ∨ (✸p ∧ ✸q) is valid in S4 frames, so provable in S4. Since S4 is sound over X,

the formula is valid in X.

40

7.3 Normal spaces

DEFINITION 7.5. A topological space X is said to be Hausdorff (or T2) if for every two distinct
points x0, x1 ∈ X, there are disjoint open sets O0, O1 with x0 ∈ O0 and x1 ∈ O1, and normal (or
T4) if it is Hausdorff and for every two disjoint closed subsets C0, C1 of X, there are disjoint open
sets O0, O1 with C0 ⊆ O0 and C1 ⊆ O1.

Equivalently, X is normal iff it is Hausdorff and if C ⊆ O ⊆ X, C closed, and O open, then there

is open P with C ⊆ P ⊆ cl P ⊆ O.

LEMMA 7.6. Let C0, C1 be disjoint closed subsets of a normal topological space X. Then there are
regular open subsets O0, O1 of X with disjoint closures, such that C0 ⊆ O0 and C1 ⊆ O1.

Proof. By normality, there are disjoint open sets O−
0 ⊆ X \U, a closed
set. So O0 = int cl O−
0 ⊆ O0 ⊆
cl O0 ⊆ X \ U, so cl O0 and C1 are disjoint closed sets. By normality again, there are disjoint open
sets V ⊇ cl O0 and O−
1 , a regular open subset of X disjoint from V . Then
C1 ⊆ O−

0 is a regular open subset of X disjoint from U. We have C0 ⊆ O−

0 ⊇ C0 and U ⊇ C1. Then O−

1 ⊇ C1. Let O1 = int cl O−

1 ⊆ O1 ⊆ cl O1 ⊆ X \ V , so cl O0 ∩ cl O1 = ∅. Now O0, O1 are as required.

✷

The following is well known (see, e.g., [29, III, 6.1]), but is so important for us that we include a

quick proof.

LEMMA 7.7. Every metric space is normal.

Proof. Let X be a metric space. It is easy to check that X is Hausdorff, and we leave this to the
reader. Let C, D be disjoint closed subsets of X. By symmetry, it is enough to show that there is open
O ⊇ C with cl(O) ∩ D = ∅. If C = ∅, take O = ∅. If D = ∅ take O = X. So we can suppose
C, D 6= ∅, and thus deﬁne

O = {x ∈ X : d(x, C) < d(x, D)/2}

(recall from section 5.2 that d(x, S) = inf{d(x, s) : s ∈ S} for non-empty S ⊆ X). Then C ⊆ O,
because if x ∈ C then d(x, C) = 0, while x /∈ D, so d(x, D) > 0 as D is closed. It is easily seen
that O is open and cl(O) ⊆ {x ∈ X : d(x, C) ≤ d(x, D)/2}, so it is enough to show that this latter
set is disjoint from D. If x is in both, then d(x, C) ≤ d(x, D)/2 = 0 so x ∈ C as C is closed. This
contradicts the assumption that C ∩ D = ∅.
✷

7.4 Tarski’s theorem and relatives

The primary topological results needed later (for representing ﬁnite Kripke frames in proposition 8.10)
are provided by the next theorem. A recent related result is [21, proposition 11].

THEOREM 7.8. Let X be a dense-in-itself metric space.

1. Let T, U be open subsets of X, with ∅ 6= T ⊆ U. Let k < ω. Then there are pairwise disjoint

non-empty subsets I0, . . . , Ik ⊆ T satisfying

hdiIi = cl(T) \ U for each i ≤ k.

41

2. Let G be a non-empty open subset of X, and let r, s < ω. Then G can be partitioned into

non-empty open subsets G1, . . . , Gr and other non-empty sets B0, . . . , Bs such that, letting

D = cl(G) \ [1≤l≤r

Gl,

we have cl(Gi) \ Gi = D for each i = 1, . . . , r, and hdiBj = D for each j = 0, . . . , s.

Part 2 above is essentially known. Paraphrasing slightly, Tarski [36, satz 3.10] proved the fol-
lowing. Let X be a dense-in-itself normal topological space with a countable basis of open sets (see
below). Then for every r < ω, every non-empty open subset G of X can be partitioned into non-empty
open sets G1, . . . , Gr and a non-empty set B0 such that cl(G) \ G ⊆ cl B0 ⊆ cl G1 ∩ . . . ∩ cl Gr. Here
and below, the empty intersection (when r = 0) is taken to be X. This statement is equivalent to the
statement in part 2 of theorem 7.8 above in the case s = 0 and with hdiBj replaced by cl Bj.

A topological space (X, τ ) has a countable basis of open sets iff there is countable τ0 ⊆ τ such
that τ is the smallest topology on X containing τ0. Given this and normality, Urysohn’s theorem [38]
yields that τ = τd for some metric d on X. Any metric space is normal, and has a countable basis of
open sets iff it is separable (see section 5.1). So Tarski’s stipulation on X boils down to stipulating
that X is a separable dense-in-itself metric space.

Removing the restriction to s = 0 but with the same hypotheses on X, McKinsey and Tarski
[25, theorem 3.5] proved that for every r, s < ω, every non-empty open set G can be partitioned into
non-empty open sets G1, . . . , Gr and non-empty sets B0, . . . , Bs with cl(G) \ G ⊆ cl B0 = · · · =
cl Bs ⊆ cl G1 ∩ . . . ∩ cl Gr. This statement is equivalent to the statement of theorem 7.8(2) above,
with hdiBj replaced by cl Bj. It was used in [25] to prove (in our terminology) that the L✷-logic of
X is S4.

Removing the assumption of separability, Rasiowa and Sikorski [29, III, 7.1] proved theorem 7.8(2)
as formulated above, but with hdiBj replaced by cl Bj. Our use of hdiBj is only a formal strength-
ening of [29, III, 7.1], since the same effect can be achieved by ﬁrst obtaining disjoint sets Bi
j with
cl Bi
j ∩ B1
j = ∅,
using lemma 7.2 we have

j = D for j = 0, . . . , s and i = 0, 1, and then deﬁning Bj = B0

j for each j. As B0

j ∪ B1

D ⊆ (D \ B0

j ) ∪ (D \ B1

j ) = (cl B0

j \ B0

j ) ∪ (cl B1

j \ B1

j ) ⊆ hdiB0

j ∪ hdiB1
j

⊆ cl B0

j ∪ cl B1

j = D,

so hdiBj = D as required. Given this, the reader may ask why we give a proof of part 2 at all. The
answer is that we wish to make clear the afﬁnity between the two parts of the theorem, as well as make
our paper more self contained and explicit as to the topological arguments needed in our completeness
proof.

|

hdiBj

{z

}

Proof. We will get to the theorem shortly, but ﬁrst, ﬁx k < ω. We deﬁne a game, Gk, to build pairwise
disjoint subsets I0, . . . , Ik of X. The game has two players, ∀ (male) and ∃ (female), and ω rounds,
numbered 0, 1, 2, . . . . At the start of round n (for each n < ω), pairwise disjoint sets I n
k ⊆ X
are in play, satisfying

0 , . . . , I n

Observe that each I n
i

is closed, because by lemma 7.2, cl I n

i ∪ hdiI n

i = I n

i . Also,

hdiI n

i = ∅

for each i ≤ k.
i = I n

int(cid:16)[j≤k

I n

j(cid:17) = ∅.

42

(7.1)

(7.2)

For if U ⊆Sj≤k I n

j is open, then by lemma 7.2 and (7.1),

U ⊆ cl U = hdiU ⊆ hdi[j≤k

I n

j = [j≤k

hdiI n

j = ∅.

The game starts off with all of the sets empty: I 0
k = ∅. Round n is played as follows.
Player ∀ moves ﬁrst, by playing a triple (εn, in, On), of his choice, where εn > 0 is a real number,
in ≤ k, and On is a non-empty open subset of X. Let

0 = · · · = I 0

Pn = On \ [j≤k

I n
j .

(7.3)

Then Pn 6= ∅: for otherwise, ∅ 6= On ⊆Sj≤k I n

j , contradicting (7.2). Player ∃ responds to ∀’s move
by using Zorn’s lemma to choose a maximal subset Zn ⊆ Pn such that d(x, y) ≥ εn for each distinct
x, y ∈ Zn. Observe that

Z1. hdiZn = ∅ (because for all x ∈ X, the set Nεn/2(x) ∩ Zn has at most one element). Just as

with I n

i above, it follows that Zn is closed.

Z2. Zn is non-empty (because Pn is non-empty and any singleton subset of Pn satisﬁes the εn-

condition).

Z3. d(x, Zn) < εn for every x ∈ Pn (else x can be added to Zn, contradicting its maximality).
Recall again that d(x, Zn) = inf{d(x, z) : z ∈ Zn}, which is deﬁned because Zn is non-
empty.

Player ∃ then extends I n
in

by Zn, leaving the other sets I n

i unchanged. Formally, she deﬁnes

I n+1
in
I n+1
i

in ∪ Zn,

= I n
= I n
i

for each i ≤ k with i 6= in.

, . . . , I n+1
This completes the round, and the sets I n+1
k
that (7.1) holds for these sets, since hdiI n+1
in ∪ hdiZn = ∅ by lemma 7.2, (7.1) for I n
= hdiI n
in
i , so the I n+1
Z1 above. Also, by (7.3), Zn is disjoint from each I n
(i ≤ k) are pairwise disjoint.
i for each i ≤ k. Plainly, I0, . . . , Ik are pairwise

are passed to the start of round n + 1. Note
, and

in

0

i

At the end of the game, we deﬁne Ii =Sn<ω I n

disjoint.

We say that ∀ plays well in Gk if his choices of εn tend to zero, the set {n < ω : in = i} is inﬁnite

for each i ≤ k, and his choices of On form a descending chain: O0 ⊇ O1 ⊇ · · · .

It is clear by condition Z2 above that if ∀ plays well then I0, . . . , Ik are all non-empty.

Claim. In any play (match?) of the game in which ∀ plays well, for each i ≤ k we have

hdiIi = \n<ω

cl On.

Proof of claim. Let n < ω. Deﬁne I >n
round n. By the game rules and because ∀ played well, I >n
Obviously, Ii = I n

. So by lemma 7.2 and (7.1),

i = Ii \ I n

i ∪ I >n

i

i . This is the set of points that ∃ added to Ii in or after

i ⊆Sn≤m<ω Zm ⊆Sn≤m<ω Om = On.

hdiIi = hdi(I n

i ∪ I >n

i

) = hdiI n

i ∪ hdiI >n

i = hdiI >n

i ⊆ hdiOn ⊆ cl On.

43

This holds for all n, so hdiIi ⊆Tn<ω cl On.
Conversely, let x ∈ Tn<ω cl On. Let a real number ε > 0 be given. Since ∀ plays well, we can
Nε(x) ∩ On \Sj≤k I n

pick a round, say n, such that ∀ chose εn ≤ ε and in = i, and such that if x ∈ Ii then already x ∈ I n
i .
Since x ∈ cl On, the set Nε(x) ∩ On is non-empty, and plainly it is open. As before, (7.2) implies that
j is non-empty as well. Fix a point y in this set. Then y ∈ Pn and d(x, y) < ε.
In round n, player ∃ picks Zn ⊆ Pn satisfying conditions Z1–Z3 above. Observe that x /∈ Zn,
because otherwise, x ∈ Zn ⊆ Ii (since in = i), so by assumption on n we have x ∈ I n
i , so by (7.3),
x /∈ Pn ⊇ Zn, a contradiction. Since y ∈ Pn, by Z3 we have d(y, Zn) < εn. Since d(x, y) < ε, we
have d(x, Zn) < ε + εn ≤ 2ε. So there is z ∈ Zn ⊆ Ii with z 6= x (since x /∈ Zn) and d(x, z) < 2ε.
This holds for all ε > 0, and it follows that x ∈ hdiIi, proving the claim.

Now we prove part 1 of the theorem. Suppose ﬁrst that cl(T) \ U = ∅. Noting that T is inﬁnite
(by lemma 7.1), we can take I0, . . . , Ik to be disjoint singleton subsets of T. Plainly, all requirements
are met.

So suppose that cl(T) \ U 6= ∅. Let ∀ and ∃ play the game Gk. We suppose that ∀ plays well, and

also so that for each n < ω,

On = T ∩ [x∈cl(T)\U

Nεn(x).

Note that On is open, and non-empty because cl(T) \ U 6= ∅, so ∀ can legally play it. Then I0, . . . , Ik
are pairwise disjoint, and non-empty since ∀ plays well. We have Zn ⊆ On ⊆ T for each n, so

I0, . . . , Ik are subsets of T. By the claim, hdiIi = Tn<ω cl On for each i ≤ k, so it sufﬁces to show
thatTn<ω cl On = cl(T) \ U.

Certainly, each x ∈ cl(T) \ U lies in cl On for each n, because for every ε > 0,

On ∩ Nε(x) ⊇(cid:16)T ∩ [y∈cl(T)\U

Nεn(y)(cid:17) ∩ Nmin(ε,εn)(x) = T ∩ Nmin(ε,εn)(x) 6= ∅.

So cl(T) \ U ⊆ Tn<ω cl On. Conversely, ﬁrst note that O0 ⊆ T, soTn<ω cl On ⊆ cl O0 ⊆ cl T.
It remains to show that U ∩Tn<ω cl On = ∅. Suppose for contradiction that there is some x ∈
U ∩Tn<ω cl On. As U is open, we can choose δ > 0 with Nδ(x) ⊆ U. As ∀ played well, we can pick
is a contradiction. We conclude that indeed U ∩Tn<ω cl On = ∅, soTn<ω cl On ⊆ cl(T) \ U, as

n < ω such that εn ≤ δ. Then x ∈ cl On, so d(x, On) = 0. By deﬁnition of On, for each y ∈ On
we have d(y, cl(T) \ U) < εn. So d(x, cl(T) \ U) < εn as well. As εn ≤ δ and Nδ(x) ⊆ U, this

required. We have proved part 1 of the theorem.

To prove part 2, let ∀ and ∃ play Gs+r. As we will see, ∀ will play so that I0, . . . , Is+r ⊆ G. In
the end, B1, . . . , Bs will be I1, . . . , Is, G1, . . . , Gr will be ‘fattened’ versions of Is+1, . . . , Is+r, and
B0 will be the rest of G (we will have B0 ⊇ I0). For the fattening, at the start of round n (for each
n < ω), for each j = s + 1, . . . , s + r, ∀ deﬁnes an auxiliary open set Gn

j such that

I n
0 , . . . , I n

s , cl Gn

s+1, . . . , cl Gn

j ⊆ Gn
I n
j
j ⊆ G1
j ⊆ · · ·
s+r are pairwise disjoint subsets of G.

G0

(7.4)
(7.5)
(7.6)

The sets Gn
s+1 = · · · = G0
j in range and he does nothing.) At the start of round 0, he simply puts G0
Suppose we are at the start of round n, for arbitrary n < ω, and that ∀ has deﬁned open Gn

j are for ∀’s own private use and are not formally part of the game. (If r = 0, there are no
s+r = ∅.
j ⊇ I n
j

44

(s + 1 ≤ j ≤ s + r) satisfying (7.4)–(7.6). In round n he plays (εn, in, On), where i0 = 0,

On = G \ [s+1≤j≤s+r

cl Gn
j ,

(7.7)

and the εn, in are chosen so that overall, he plays well. By (7.5), O0 ⊇ O1 ⊇ · · · , as required for him
to play well. (We remark that if r = 0 then On = G for all n.)

We check that this is always a legal move for ∀. Certainly, On is open. We show that it is always
non-empty. For n = 0 we plainly have O0 = G 6= ∅. In round 0, ∀ plays i0 = 0, and ∃ deﬁnes
I 1
0 = Z0 6= ∅ by condition Z2 above. Since the I n
0 6= ∅ for all n > 0, and
by (7.6) and (7.7), I n

0 form a chain, I n

0 ⊆ On. So On 6= ∅ for all n.

0 ⊇ I 1

Player ∃ continues round n by selecting Zn ⊆ Pn and deﬁning I n+1

= I n

in ∪ Zn according to the

in

rules.

It is now time for ∀ to deﬁne Gn+1

j

for j = s+1, . . . , s+r. If in ≤ s, he leaves the sets unchanged,
j for all j. Trivially, conditions (7.4)–(7.5) continue to hold. We check (7.6).
for in 6= j ≤ s. Second, if s + 1 ≤ j ≤ s + r then
, and by (7.7), On is

is disjoint from I n+1

is disjoint from cl Gn

j = cl Gn+1

j

j
in ∪ On; by (7.6), I n
in
as well.

If instead, in > s, then ∀ deﬁnes Gn+1

j = Gn

j for j 6= in, and uses normality of X to choose an

j

= Gn

deﬁning Gn+1
First, Zn ⊆ Pn, so I n+1
in
I n+1
in ∪ Zn ⊆ I n
in
disjoint from cl Gn+1

= I n

j

open set Gn+1

in

satisfying

closed
in) ∪ Zn ⊆ Gn+1

in

cl(Gn

}|

{

z

open

⊆ cl(Gn+1

in

) ⊆

z
G \(cid:0)[j≤s

I n

j ∪ [s+1≤j≤s+r

}|

j6=in

cl(Gn

{
j )(cid:1) .

(7.8)

We need to check some things here. First, by condition Z1 above, Zn is closed and so the left-hand
side of (7.8) is closed. Similarly, we saw just after (7.1) that each I n
j is closed, so the right-hand side
of (7.8) is open. Second, it follows from (7.6) that cl(Gn
in ) is contained in the right-hand side of (7.8).
Also Zn ⊆ Pn ⊆ On, and it follows from (7.3) and (7.7) that Zn is contained in the right-hand side
of (7.8) as well. So Gn+1

in

can be found as stated.
We also need to check (7.4)–(7.6) for the Gn+1
, and for j 6= in we have Gn+1

in ∪ Zn ⊆ Gn+1

Gn
clear from the deﬁnitions and (7.8).

in

j
j = Gn

. Condition (7.4) holds because I n+1

in ∪Zn ⊆
. Conditions (7.5) and (7.6) are

= I n

in

j ⊇ I n

j = I n+1

j

As promised, at the end of play we deﬁne

s+i

Gn

Bj = Ij

Gi = [n<ω
B0 = G \(cid:16) [1≤i≤r
D = cl(G) \ [1≤l≤r

Gi ∪ [1≤j≤s

Gl.

for 1 ≤ i ≤ r,

for 1 ≤ j ≤ s,

Bj(cid:17)

Note that Is+i ⊆ Gi for 1 ≤ i ≤ r by (7.4), and Ij ⊆ Bj for j ≤ s by the deﬁnitions. Because ∀
played well, the Gj are non-empty (and plainly open) and the Bj are non-empty. It follows from (7.6)
that together they partition G.

45

For the ﬁnal piece of the theorem, there are two preliminaries. First, we observe that each set Gi
(1 ≤ i ≤ r) has a nice property. Each time ∀ plays in = s + i in some round n, by (7.5), (7.8), and
the deﬁnition of Gi, for every m ≤ n we have cl Gm
s+i ⊆ Gi. Since ∀ played
in = s + i inﬁnitely often, it follows that

s+i ⊆ Gn+1

s+i ⊆ cl Gn

cl Gm

s+i ⊆ Gi

for each m < ω and 1 ≤ i ≤ r.

Second, we use this to show that

(7.9)

(7.10)

D = \n<ω

cl On.

Note that if C ⊆ S ⊆ X and C is closed, then S = C ∪ (S \ C) ⊆ C ∪ cl(S \ C); the right-hand side
is closed, so cl S ⊆ C ∪ cl(S \ C), whence cl(S) \ C ⊆ cl(S \ C). Now, for each n < ω we have

D = cl(G) \S1≤i≤r Gi
⊆ cl(G) \S1≤i≤r cl Gn
s+i(cid:1)
⊆ cl(cid:0)G \S1≤i≤r cl Gn

= cl On

s+i

by deﬁnition
by (7.9)
by the observation above
by (7.7).

So D ⊆ Tn<ω cl On. Conversely, we certainly have Tn<ω cl On ⊆ cl O0 = cl G since O0 = G.

Now ﬁx i with 1 ≤ i ≤ r. By (7.7), for each n < ω we have Gn
Gn

s+i ∩ On = ∅, so as Gn

s+i ∩ cl On = ∅. It follows that

s+i is open,

Gi ∩ \n<ω

cl On = ([n<ω

Gn

s+i) ∩ \n<ω

cl On = ∅.

hdiBj.

This holds for each i, soTn<ω cl On ⊆ cl(G) \S1≤i≤r Gi = D, proving (7.10).
Now we can ﬁnish easily. For each 0 ≤ j ≤ s, we plainly have Bj ⊆ G \S1≤l≤r Gl ⊆ D. Since
D is closed, hdiBj ⊆ cl Bj ⊆ D. Conversely, by (7.10) and the claim, D =Tn<ω cl On = hdiIj ⊆
G, we have cl Gi ⊆ cl(G) \Sl6=i Gl and hence cl(Gi) \ Gi ⊆ cl(G) \S1≤l≤r Gl = D. Conversely,
by (7.10), the claim, and lemma 7.2 we have D = Tn<ω cl On = hdiIs+i ⊆ hdiGi ⊆ cl Gi. By

Similarly, take i with 1 ≤ i ≤ r. Since the Gl (1 ≤ l ≤ r) are pairwise disjoint open subsets of

deﬁnition, D ∩ Gi = ∅. So D ⊆ cl(Gi) \ Gi, as required.

✷

COROLLARY 7.9. Let U be an open subspace of a dense-in-itself metric space X, and suppose that
S0, S1 are open subsets of U such that U ∩ cl S0 ∩ cl S1 = ∅ and T = U \ cl(S0 ∪ S1) 6= ∅. Then there
are regular open subsets U0, U1 of U such that U ∩ cl U0 ∩ cl U1 = ∅, and for each i = 0, 1:

1. U ∩ cl Si ⊆ Ui,

2. writing Ti = Ui \ cl Si, we have Ti 6= ∅ and cl(T) \ U ⊆ cl Ti.

Proof. Since T is a non-empty open subset of U, we can use theorem 7.8 to choose disjoint non-empty
subsets I0, I1 ⊆ T such that hdiI0 = hdiI1 = cl(T) \ U.

We now work in the subspace U. Recall that clU denotes the closure operator in the subspace

topology on U, so clU K = U ∩ cl K for subsets K ⊆ U. The sets

clU S0, clU S1, I0, I1

46

are pairwise disjoint (by assumptions) and closed in U. (Each Ii is closed in U because by lemma 7.2,
clU Ii = U ∩ cl Ii = U ∩ (Ii ∪ hdiIi) = U ∩ (Ii ∪ (cl(T) \ U)) = U ∩ Ii = Ii.) Hence, I0 ∪ clU S0 and
I1 ∪ clU S1 are disjoint closed subsets of U. The subspace U is a metric space in its own right, and so,
by lemma 7.7, normal. Using lemma 7.6 in U, we can ﬁnd regular open subsets U0, U1 of U with

and clU U0 ∩ clU U1 = ∅. Working back in X again, this says that

Ii ∪ clU Si ⊆ Ui ⊆ U for i = 0, 1,

U ∩ cl U0 ∩ cl U1 = ∅.

(7.11)

(7.12)

Now for each i = 0, 1, write Ti = Ui \ cl Si. By deﬁnition, Ii ⊆ Ui. Also, Ii ∩ (U ∩ cl Si) = ∅, and
since Ii ⊆ U, this gives Ii ∩ cl Si = ∅. Hence, Ii ⊆ Ti, so Ti 6= ∅. We now obtain

Lines (7.11), (7.12), and (7.13), together with Ti 6= ∅, establish the corollary.

cl(T) \ U = hdiIi ⊆ cl Ii ⊆ cl Ti.

(7.13)

✷

8 Representations of frames over topological spaces

Our next aim is to use the results of the preceding section to construct a ‘representation’ from an
arbitrary dense-in-itself metric space to any given ﬁnite connected locally connected KD4 Kripke
frame. The notion of representation is chosen so as to preserve Lµ
[d]∀-formulas, and this will allow us
to prove completeness theorems in the next two sections.

Until the end of section 8.6, we ﬁx a topological space X and a ﬁnite Kripke frame F = (W, R).

We will frequently regard the elements of W as propositional atoms.

8.1 Representations

The following deﬁnition seems to originate with Shehtman: see equation (71) in [31, §5, p.25].

DEFINITION 8.1. A map ρ : X → W is said to be a representation of F over X if for every x ∈ X
and w ∈ W we have

(X, ρ−1), x |= hdiw ⇐⇒ R(ρ(x), w).

Here, ρ−1 assigns an atom w ∈ W to the possibly empty subset {x ∈ X : ρ(x) = w} of X.
The condition says that for every x ∈ X, the set of points of W with preimages under ρ in every
open neighbourhood of x but distinct from x itself is precisely R(ρ(x)). Equivalently, hdiρ−1(w) =
ρ−1(R−1(w)) for every w ∈ W , where R−1 is the converse relation of R.

Note that ρ need not be surjective. Indeed, the empty map is vacuously a representation of F over

the empty space — and we deﬁnitely do allow empty representations.

It can be checked that if ρ : X → W is a representation then R ↾ rng ρ is transitive. Endow W
with the topology generated by {R(w) : w ∈ W } (so the open sets are those A ⊆ W such that a ∈ A
implies R(a) ⊆ A). Then every representation of F over X is an interior map from X to W : that
is, a map that is both continuous and open. (Many other topological completeness proofs use interior
maps.) The converse, however, does not hold in general. See [3, 23] for more information.

Although Shehtman uses the term ‘d-p-morphism’ (when ρ is surjective), here we will call ρ a
‘representation’ because it is closely related to the representations of algebras of relations seen in
Indeed, if ρ is a surjective representation of (W, R) over X then ρ−1 induces an
algebraic logic.
embedding from ℘(W ) into ℘(X) that preserves the algebraic structure with which these power sets
can be naturally endowed.

47

8.2 Representations over subspaces

Our main interest is in representations over X itself, but representations over subspaces are also
useful in proofs. Given a subspace U of X, a map ρ : U → W induces a well deﬁned assignment
ρ−1 : W → ℘(X) by ρ−1(w) = {x ∈ X : x ∈ U and ρ(x) = w}, for w ∈ W . Put simply, preimages
under ρ of elements of W are obviously subsets of U, but they are also subsets of X, and so ρ−1 can
be regarded equally as an assignment into U or X, as appropriate. The following easy lemma gives
some connections between the two views.

LEMMA 8.2. Let U be a subspace of X and let ρ : U → W be a map. Let x ∈ U and w ∈ W be
arbitrary.

1. If (U, ρ−1), x |= hdiw then (X, ρ−1), x |= hdiw.

2. If U is open in X, then (U, ρ−1), x |= hdiw iff (X, ρ−1), x |= hdiw.

Proof. For the ﬁrst part, assume that (U, ρ−1), x |= hdiw and let O be any open neighbourhood of x
in X. Then O ∩ U is an open neighbourhood of x in U, so by assumption, there is y ∈ O ∩ U \ {x}
with (U, ρ−1), y |= w. Then y ∈ O \ {x} and (X, ρ−1), y |= w. Hence, (X, ρ−1), x |= hdiw.

For the second part, assume that (X, ρ−1), x |= hdiw. Let N be an arbitrary open neighbourhood
of x in U, so that N = O ∩ U for some open neighbourhood O of x in X. As U is assumed open in
X, we see that N is also open in X, so by assumption, there is y ∈ N \ {x} with (X, ρ−1), y |= w.
Plainly, (U, ρ−1), y |= w. This shows that (U, ρ−1), x |= hdiw, and the converse follows from the
ﬁrst part.
✷

By part 2 of the lemma, if ρ is a representation of F over an open subspace U of X, then (X, ρ−1), x |=
hdiw iff R(ρ(x), w) for every x ∈ U and w ∈ W . So we can work in (X, ρ−1) instead of (U, ρ−1).
To avoid too much jumping around between subspaces, we will do this below, often without mention.
Part 3 of the next lemma makes it a little more explicit. The lemma gives some general information on
how representations of different generated subframes of F over different subspaces of X are related.

LEMMA 8.3. Let G = (W ′, R′) be a generated subframe of F. Let T , U, and Ui (i ∈ I) be open

subspaces of X, with T ⊆ U =Si∈I Ui. Finally, let ρ : U → W ′ be a map. Then:

1. ρ is a representation of F over U iff it is a representation of G over U.

2. ρ is a representation of F over U iff for each i ∈ I, the restriction ρ ↾ Ui is a representation of

F over Ui.

3. If ρ ↾ T is a representation of F over T , then (X, ρ−1), x |= hdiw iff R(ρ(x), w), for each

x ∈ T and w ∈ W .

Proof. Simple.

✷

8.3 Representations preserve formulas

Here, we will show that surjective representations preserve all formulas of Lµ
[d]∀. Since representations
are like p-morphisms, albeit between different kinds of structure, this is entirely expected and the proof
is essentially quite standard — see [31, lemma 20] and [3, corollary 2.9], for example. We do need,
however, that F is ﬁnite. We will be able to handle larger sublanguages of Lµhtihdti
by using the
translations of section 6.

✷[d]∀

48

Let us explain the setting. Suppose we are given a representation ρ : X → W of F over X.
Recall that Var is our ﬁxed base set of propositional variables, or atoms. For each assignment h :
Var → ℘(W ) of atoms in Var into W , the map ρ−1 ◦ h : Var → ℘(X) is an assignment of atoms into
X, given of course by

(ρ−1 ◦ h)(p) = {x ∈ X : ρ(x) ∈ h(p)},

for each p ∈ Var.

So ρ, or rather ρ−1, gives us a way to transform an assignment into F to one into X, and then to
evaluate a formula in the resulting model on X. The following deﬁnition encapsulates when we get
the same result as in the original model on F:

DEFINITION 8.4. Let ρ : X → W be a map, and let ϕ be a formula of Lµhtihdti
preserves ϕ if for every assignment h : Var → ℘(W ) and every x ∈ X,

✷[d]

. We say that ρ

(X, ρ−1 ◦ h), x |= ϕ iff

(W, R, h), ρ(x) |= ϕ.

(8.1)

We are now ready for our main preservation result.

PROPOSITION 8.5. Let ρ : X → W be a surjective representation of F over X. Then ρ preserves
every formula of Lµ

[d]∀.

Proof. The proof is by induction on ϕ. The atomic and boolean cases are easy and left to the reader.
Let ϕ be a formula, and inductively assume (8.1) for every assignment h : Var → ℘(W ) and every
x ∈ X. It is sufﬁcient to consider the cases hdiϕ, ∀ϕ, and µqϕ.

First, consider hdiϕ. Fix h, x. Suppose that (W, R, h), ρ(x) |= hdiϕ. Choose w ∈ R(ρ(x)) with
(W, R, h), w |= ϕ. As ρ is a representation, (X, ρ−1), x |= hdiw. So for every open neighbourhood
O of x, there is y ∈ O \ {x} with ρ(y) = w. Since (W, R, h), w |= ϕ, for any such y we inductively
have (X, ρ−1 ◦ h), y |= ϕ. It follows that (X, ρ−1 ◦ h), x |= hdiϕ.

Conversely, suppose that (X, ρ−1 ◦ h), x |= hdiϕ. Let [[ϕ]] = {y ∈ X : (X, ρ−1 ◦ h), y |= ϕ}. As

F is ﬁnite and hdi is additive (lemma 7.2(2)), we have

x ∈ hdi[[ϕ]] = hdi([[ϕ]] ∩ X) = hdi(cid:16)[[ϕ]] ∩ [w∈W
= hdi(cid:16) [w∈W(cid:0)[[ϕ]] ∩ ρ−1(w)(cid:1)(cid:17) = [w∈W

ρ−1(w)(cid:17)

hdi([[ϕ]] ∩ ρ−1(w)).

So we can take w ∈ W with x ∈ hdi([[ϕ]] ∩ ρ−1(w)). Then (X, ρ−1), x |= hdiw, so as ρ is a
representation, R(ρ(x), w). Moreover, [[ϕ]]∩ρ−1(w) 6= ∅. Take any y ∈ [[ϕ]]∩ρ−1(w). Then (X, ρ−1◦
h), y |= ϕ and ρ(y) = w. Inductively, (W, R, h), w |= ϕ. By Kripke semantics, (W, R, h), ρ(x) |=
hdiϕ, as required.

Next, consider ∀ϕ. Then (X, ρ−1 ◦ h), x |= ∀ϕ iff (X, ρ−1 ◦ h), y |= ϕ for all y ∈ X, iff
(W, R, h), ρ(y) |= ϕ for all y ∈ X (by the inductive hypothesis (8.1)), iff (W, R, h), w |= ϕ for all
w ∈ W (since ρ is surjective), iff (W, R, h), ρ(x) |= ∀ϕ.

Finally consider the case µqϕ, assumed well formed. Fix arbitrary h : Var → ℘(W ). We deﬁne
an assignment hα : Var → ℘(W ) for each ordinal α. For each atom p 6= q, we set hα(p) = h(p). We
deﬁne hα(q) by induction on α as follows:

• h0(q) = ∅,

49

• hα+1(q) = {w ∈ W : (W, R, hα), w |= ϕ},

• hδ(q) =Sα<δ hα(q) for limit ordinals δ.

Of course, W is ﬁnite, but we need all ordinals for the argument below. Let η = ρ−1 ◦ h : Var →
℘(X). Deﬁne an assignment ηα : Var → ℘(X) in the same way as for hα: let ηα(p) = η(p) for all
atoms p 6= q and all α, and

• η0(q) = ∅,

• ηα+1(q) = {x ∈ X : (X, ηα), x |= ϕ},

• ηδ(q) =Sα<δ ηα(q) for limit ordinals δ.

Claim. ηα(q) = ρ−1(hα(q)) for each ordinal α.
Proof of claim. By induction on α. For α = 0 this is saying that ρ−1(∅) = ∅, which is true. Assume
the result for α inductively. So ηα = ρ−1 ◦ hα. We now obtain

ηα+1(q) = {x ∈ X : (X, ηα), x |= ϕ}

= {x ∈ X : (X, ρ−1 ◦ hα), x |= ϕ}
= {x ∈ X : (W, R, hα), ρ(x) |= ϕ}
= {x ∈ X : ρ(x) ∈ hα+1(q)}
= ρ−1(hα+1(q)).

by deﬁnition of ηα+1
since ηα = ρ−1 ◦ hα
by inductive hypothesis (8.1)
by deﬁnition of hα+1

For limit δ we have

ηα(q) = ηδ(q).

ρ−1(hδ(q)) = ρ−1([α<δ

hα(q)) = [α<δ

ρ−1(hα(q)) =IH [α<δ

This completes the induction on α, and proves the claim.

By semantics of µ, we have (X, η), x |= µqϕ iff x ∈ Sα∈On ηα(q), iff x ∈ Sα ρ−1(hα(q)) by
the claim, iff ρ(x) ∈Sα hα(q), iff (W, R, h), ρ(x) |= µqϕ. This completes the induction and proves

the proposition.

✷

8.4 Basic representations

Certain very primitive representations called basic representations will play an important role later,
because they can easily be extended to more interesting representations.
DEFINITION 8.6. Let S, U be open subspaces of X, with S ⊆ U, and let σ : S → W be
a representation of F over S. We say that σ is U-basic if for every x ∈ U and w, v ∈ W , if
(X, σ−1), x |= ✸w ∧ ✸v then Rwv.

Note that we use ✸ and not hdi here.

REMARK 8.7. In the setting of this deﬁnition:

1. Vacuously, if σ is empty then it is U-basic.

2. More generally, but equally trivially, if rng σ is contained in a nondegenerate cluster C in F,
then σ is U-basic. For, (X, σ−1), x |= ✸w ∧ ✸v implies that w, v ∈ rng σ ⊆ C, and so Rwv
as C is a nondegenerate cluster.

We remark (but will not formally use) that σ is U-basic iff rng σ is a (possibly empty) union of R-
maximal clusters in F whose preimages under σ have pairwise disjoint closures within U. Moreover,
each such preimage is a regular open subset of S.

50

8.5 Full representations

In induction proofs, one often needs a stronger inductive hypothesis than formally required for the
ﬁnal result. This will be the case in proposition 8.10 below, and the notion of T -full representation
will be used to formulate it.

DEFINITION 8.8. Let T ⊆ U be open subspaces of X. A representation ρ : U → W of F over U
is said to be T -full if:

1. for every x ∈ cl(T ) \ U and w ∈ W , we have (X, ρ−1), x |= hdiw,

2. if T is non-empty then ρ : U → W is surjective.

Every representation is vacuously ∅-full.

8.6 Full representability

DEFINITION 8.9. We say that F is fully representable (over X) if whenever

1. U ⊆ X is open,

2. S is a regular open subset of U,

3. σ : S → W is a U-basic representation of F over S,

4. T = U \ cl S,

then σ extends to a T -full representation ρ : U → W of F over U.

Notice that in the boolean algebra RO(U ) of regular open subsets of U, we have T = −S, so {S, T }
is a partition of 1. That is, S, T ∈ RO(U ), S · T = 0, and S + T = 1.

In proposition 8.10 below, we will fulﬁl our main aim, to prove (surjective) representability of
every ﬁnite connected locally connected KD4-frame. We are going to do it by induction on the size
of the frame; we appear to need a stronger inductive hypothesis, namely full representability, than is
needed for the conclusion; T -fullness and extending σ are mainly to do with this, but the σ part is also
helpful in the proof of strong completeness in theorem 10.1 later. Note that if F is fully representable
over X, and X 6= ∅, then by taking U = X and S = σ = ∅, we see that there exists a surjective
representation of F over X. So we do obtain our desired conclusion from the stronger hypothesis of
full representability.

8.7 Main proposition

The following proposition has relatives in the literature: see, e.g., [25, theorem 3.7], [31, proposition
22], [23, lemma 4.4], and [21, lemma 16]. It actually holds for any dense-in-itself topological space
X for which theorem 7.8 and corollary 7.9 can be proved.

PROPOSITION 8.10. Suppose that X is a dense-in-itself metric space. Then every ﬁnite connected
locally connected KD4 frame F = (W, R) is fully representable over X.

Proof. The proof is by induction on the number of worlds in F. Let F = (W, R) be a ﬁnite connected
locally connected KD4 frame, and assume the result inductively for all smaller frames. Note that R
is transitive. Recall that we write

51

• R◦ = {(w, v) ∈ W 2 : Rwv ∧ Rvw},

• R• = {(w, v) ∈ W 2 : Rwv ∧ ¬Rvw},

and for w ∈ W ,

• F(w) for the subframe (R(w), R ↾ R(w)) of F with domain R(w),

• F ∗(w) for the subframe (R∗(w), R ↾ R∗(w)) = (R(w)∪{w}, R ↾ R(w)∪{w}) of F generated

by w.

Let U ⊆ X be open, let S be a regular open subset of U, and let σ : S → W be a U-basic

representation of F over S. Write

T = U \ cl S.

We need to extend σ to a T -full representation ρ : U → W of F over U.

If T = ∅, then U ⊆ cl S, so S = int(U ∩ cl S) = int U = U. Thus, σ : S → W is already a

representation of F over U, and it is vacuously T -full. So we can take ρ = σ. We are done.

So assume from now on that T 6= ∅. There are three cases.

Case 1: F = F ∗(w0) for some reﬂexive w0 ∈ W Choose such a w0 (it may not be unique).
Then R(w0) = W and w0 ∈ R◦(w0) since w0 is reﬂexive. So R◦(w0) 6= ∅. Since T is clearly a non-
empty open set, we can use theorem 7.8(2) to partition T into non-empty open sets Gv• (v• ∈ R•(w0))
and other non-empty sets Bv◦ (v◦ ∈ R◦(w0)) such that for each v• ∈ R•(w0) and v◦ ∈ R◦(w0) we
have

cl(Gv• ) \ Gv• = hdiBv◦ = cl(T ) \ [v∈R•(w0)

Gv = D, say.

(8.2)

For each v• ∈ R•(w0), the frame F ∗(v•) is connected (as it is rooted) and locally connected KD4
(as it is a generated subframe of F). Since w0 is a world of F but not of F ∗(v•), the frame F ∗(v•)
is smaller than F. By the inductive hypothesis, F ∗(v•) is fully representable over X. So, taking
the regular open subset ‘S’ of Gv• to be ∅ and ‘T ’ to be Gv• \ cl ∅ = Gv•, we can ﬁnd a Gv•-full
representation ρv• of F ∗(v•) over Gv• .

Deﬁne ρ : U → W by:

ρ(x) =

ρv• (x),
v◦,
σ(x),
w0,

if x ∈ Gv• for some (unique) v• ∈ R•(w0),
if x ∈ Bv◦ for some (unique) v◦ ∈ R◦(w0),
if x ∈ S,
otherwise,




for each x ∈ U. The map ρ is well deﬁned because the Gv•, the Bv◦, and S are pairwise disjoint, and
plainly it is total and extends σ.

We aim to show that ρ is a T -full representation of F over U. The following claim will help.

Claim. Let x ∈ D (see (8.2)). Then (X, ρ−1), x |= hdiw for every w ∈ W .
Proof of claim. Let x ∈ D and w ∈ W be given. There are two cases. The ﬁrst is when w ∈ R•(w0).
Now (8.2) gives x ∈ cl Gw \ Gw. As ρw is a Gw-full representation of F ∗(w), a frame of which w is
a world, we have (X, ρ−1

w ), x |= hdiw, and hence (X, ρ−1), x |= hdiw (since ρw ⊆ ρ).

The second case is when w /∈ R•(w0). Since w ∈ W = R(w0) = R•(w0) ∪ R◦(w0), we have
w ∈ R◦(w0). By (8.2), x ∈ hdiBw (since x ∈ D). Since ρ ↾ Bw has constant value w, we obtain
again that (X, ρ−1), x |= hdiw. This proves the claim.

52

We now check that ρ is a representation of F over U. Let x ∈ U and w ∈ W . We require

(X, ρ−1), x |= hdiw iff R(ρ(x), w). There are four cases.

1. Suppose that x ∈ Gv• for some v• ∈ R•(w0). Since Gv• is open and ρ ↾ Gv• = ρv•, a represen-
tation over Gv• of the generated subframe F ∗(v•) of F, lemma 8.3 yields (X, ρ−1), x |= hdiw
iff R(ρ(x), w).

2. Suppose that x ∈ Bv◦ for some v◦ ∈ R◦(w0). Then ρ(x) = v◦. As v◦ ∈ R◦(w0), we have
Rv◦w0. By transitivity of R, we have R(ρ(x), w) for every w ∈ W . So we need to prove that
(X, ρ−1), x |= hdiw for every w ∈ W . But x ∈ Bv◦ ⊆ D by deﬁnition of D (8.2), so this
follows from the claim.

3. If x ∈ S, then since S is open and ρ ↾ S = σ, a representation of F over S, the result follows

from lemma 8.3 again.

4. Suppose ﬁnally that x ∈ U \ (S ∪ T ). Then ρ(x) = w0. Since R(w0, w) for all w ∈ W , we

require that (X, ρ−1), x |= hdiw for all w ∈ W as well.
Now as S is a regular open subset of U, by lemma 7.4 we obtain U \ S = cl T . Hence,
x ∈ cl T \ T ⊆ D by (8.2). As in case 2, the claim now gives (X, ρ−1), x |= hdiw for all
w ∈ W .

So ρ is indeed a representation of F over U. We check that it is T -full. First let x ∈ cl T \ U.

Then x ∈ cl T \ T ⊆ D by (8.2). By the claim, (X, ρ−1), x |= hdiw for every w ∈ W , as required.

We also need that ρ is surjective. Take any x ∈ Bw0. Then x ∈ D by deﬁnition of D in (8.2). By

the claim, (X, ρ−1), x |= hdiw, and so ρ−1(w) 6= ∅, for every w ∈ W . Hence, ρ is surjective.

Case 2: F = F ∗(w0) for some irreﬂexive w0 ∈ W Choose such a w0 (it is unique this time).
Then W is the disjoint union of {w0} and R(w0). Using theorem 7.8(1), select non-empty I ⊆ T
with

Write

hdiI = cl T \ U.

U ′ = U \ I,
T ′ = T \ I.

(8.3)

We aim to use the inductive hypothesis on these sets and σ : S → F(w0), so we check the necessary
conditions.

Claim 1. U ′ is open, S is a regular open subset of U ′, and T ′ = U ′ \ cl S.
Proof of claim. First, U ′ is open. For, by lemma 7.2 and (8.3),

U \ cl I = U \ (I ∪ hdiI) = U \ (I ∪ (cl(T ) \ U )) = U \ I = U ′,

and the left-hand side is open.

We are given that S is a regular open subset of U. Since S ⊆ U and I ⊆ T = U \ cl S, we have

S ⊆ U \ I = U ′. By lemma 7.4(3), S is a regular open subset of U ′.

Finally, U ′ \ cl S = (U \ I) \ cl S = (U \ cl S) \ I = T \ I = T ′. This proves the claim.

Claim 2. σ is a U ′-basic representation of F(w0) over S.
Proof of claim. First we show that σ : S → R(w0). We know that σ : S → W = {w0} ∪ R(w0).
Assume for contradiction that there is some x ∈ S with σ(x) = w0. Then plainly, x ∈ U and

53

(X, σ−1), x |= ✸w0. As σ is a U-basic representation of F over S, we obtain Rw0w0, contradicting
the choice of w0 as irreﬂexive. So indeed, rng σ ⊆ W \ {w0} = R(w0). Since σ is a representation
of F over S, by lemma 8.3 it is also a representation (over S) of the generated subframe F(w0) of F.
It is trivially U ′-basic, since if x ∈ U ′, w, v ∈ R(w0), and (X, σ−1), x |= ✸w ∧ ✸v, then x ∈ U and
w, v ∈ W as well, so Rwv since σ is U-basic. This proves the claim.

In summary, U ′ is open, S is a regular open subset of U ′, σ is a U ′-basic representation of F(w0)

over S, and T ′ = U ′ \ cl S.

Now F(w0) is smaller than F (since w0 /∈ R(w0)), connected (since F is locally connected), and
locally connected KD4 (since it is a generated subframe of F). By the inductive hypothesis, F(w0)
is fully representable over X.

So σ extends to a T ′-full representation ρ′ : U ′ → R(w0) of F(w0) over U ′. By T ′-fullness,

(X, ρ′−1), x |= hdiv for every v ∈ R(w0) and x ∈ cl T ′ \ U ′.

(8.4)

We extend ρ′ to a map ρ : U → W by deﬁning

ρ(x) =(ρ′(x),

w0,

if x ∈ U ′,
if x ∈ I,

for x ∈ U. This is plainly well deﬁned and total. Since ρ extends ρ′, it also extends σ. We will show
that ρ is a T -full representation of F over U. To do it, we need another claim.
Claim 3. cl T \ U ⊆ cl I ⊆ cl T ′ \ U ′.
Proof of claim. By (8.3) and lemma 7.2, we have cl T \ U = hdiI ⊆ cl I.

Using openness of T = T ′ ∪ I, the assumption that X is dense in itself, and lemma 7.2(3,2), we
have I ⊆ T ⊆ cl T = hdiT = hdiT ′ ∪ hdiI. But by (8.3), I ∩ hdiI ⊆ U ∩ cl T \ U = ∅. So in
fact, I ⊆ hdiT ′ ⊆ cl T ′. Hence, cl I ⊆ cl T ′. Since I ∩ U ′ = ∅ and U ′ is open (claim 1), we have
cl I ∩ U ′ = ∅. So cl I ⊆ cl T ′ \ U ′, proving the claim.

Claim 4. ρ is a representation of F over U.
Proof of claim. Let x ∈ U. We require (X, ρ−1), x |= hdiw iff R(ρ(x), w), for each w ∈ W .

There are two cases here. The ﬁrst is when x ∈ I. Then ρ(x) = w0, so we require ﬁrst that
(X, ρ−1), x |= hdiw for each w ∈ R(w0). So pick any w ∈ R(w0). By claim 3, x ∈ I ⊆ cl I ⊆
cl T ′ \ U ′, so by (8.4), (X, ρ′−1), x |= hdiw. As ρ′ ⊆ ρ, the result follows.

We also require that (X, ρ−1), x 6|= hdiw for each w ∈ W \ R(w0) — that is, (X, ρ−1), x 6|=
hdiw0. But as x ∈ U, we have x /∈ cl T \ U = hdiI by (8.3). Since ρ−1(w0) = I, we do indeed have
(X, ρ−1), x 6|= hdiw0.

The second case is when x /∈ I. In this case, x ∈ U ′, an open set, and ρ ↾ U ′ = ρ′, a representation
over U ′ of the generated subframe F(w0) of F. By lemma 8.3, (X, ρ−1), x |= hdiw iff R(ρ(x), w)
for every w ∈ W , as required. The claim is proved.
Claim 5. ρ is T -full.
Proof of claim. Let x ∈ cl T \ U and w ∈ W . We require (X, ρ−1), x |= hdiw.

Suppose ﬁrst that w = w0. By (8.3), x ∈ hdiI. Since I = ρ−1(w0), we obtain (X, ρ−1), x |=
hdiw0. Suppose instead that w ∈ R(w0). By claim 3, x ∈ cl T ′\U ′. So by (8.4), (X, ρ′−1), x |= hdiw.
As ρ′ ⊆ ρ, we obtain (X, ρ−1), x |= hdiw as required.

We must also show that ρ(U ) = W . Well, I 6= ∅, and it follows from claim 3 that T ′ 6= ∅ as well.

As ρ′ is T ′-full, ρ′(U ′) = R(w0). So

ρ(U ) = ρ′(U ′) ∪ ρ(I) = R(w0) ∪ {w0} = W,

54

as required. This proves the claim and completes case 2 of proposition 8.10. Only case 3 remains, but
this is the hardest case.

Case 3: otherwise As F is ﬁnite and connected, we can choose worlds a0, b0, a1, b1, . . . , bn−1,
an ∈ W , for some least possible n < ω, such that Raibi and Rai+1bi for each i < n, each bi is

R-maximal (so that R•(bi) = ∅), and W =Si≤n R∗(ai). By the case assumption, n ≥ 1.

Write F ∗(a0) as F0 = (W0, R0), say. Let F1 = (W1, R1) be the smallest generated subframe
of F containing a1, . . . , an. We have W0 ∪ W1 = W and b0 ∈ W0 ∩ W1. Plainly, F0 and F1
are connected generated subframes of F. Therefore, they are locally connected KD4 frames. By
minimality of n, they are proper subframes of F. By the inductive hypothesis, F0 and F1 are fully
representable over X. Our plan is to combine suitable representations of them to give a representation
of F over U.

Recall that S is a regular open subset of U and σ : S → W is a U-basic representation of F. We

use W0, W1 to split S (and, later, σ) in two. Let

S0 = σ−1(W0) = {x ∈ S : σ(x) ∈ W0},
S1 = S \ S0.

So σ(S0) ⊆ W0 and σ(S1) ⊆ W \ W0 ⊆ W1. Also, S0 = S \ S1.
Claim 1. S0 and S1 are regular open subsets of U, and U ∩ cl(S0) ∩ cl(S1) = ∅.
Proof of claim. We prove the last point ﬁrst. Suppose for contradiction that there is some x ∈

U ∩ cl(S0) ∩ cl(S1). As x ∈ cl S0, we have (X, σ−1), x |= ✸Ww∈W0 w. As ✸ is additive, it

follows that there is some w0 ∈ W0 such that (X, σ−1), x |= ✸w0. Similarly, as x ∈ cl S1 and
σ(S1) ⊆ W \ W0, there is some w1 ∈ W \ W0 with (X, σ−1), x |= ✸w1. As σ is a U-basic
representation, we obtain Rw0w1. Since F0 is a generated subframe of F, this implies that w1 ∈ W0,
a contradiction. So U ∩ cl(S0) ∩ cl(S1) = ∅ as required.

Now let i < 2. We show that Si is regular open in U. First note that Si is open. To see this,

observe that

Si ⊆ S ∩ U ∩ cl Si

as Si ⊆ S ⊆ U by deﬁnition and assumption

⊆ S ∩ U \ cl S1−i by the ﬁrst part
= S \ cl S1−i
⊆ S \ S1−i
= Si

as S ⊆ U by assumption
as S1−i ⊆ cl S1−i
by deﬁnition of Si.

Hence, Si = S \ cl S1−i, an open set.

It follows that cl(Si) ∩ S1−i = ∅, so Si ⊆ S ∩ cl Si ⊆ S \ S1−i = Si. Thus, S ∩ cl Si = Si, and
so int(S ∩ cl Si) = int Si = Si as Si is open. So Si is regular open in S, and as S is regular open in
U, lemma 7.4(4) yields that Si is regular open in U. The claim is proved.

The claim and the assumption at the outset that T 6= ∅ are more than enough to apply corollary 7.9,

to obtain open subsets Ui, Ti of U, for i = 0, 1, satisfying the following conditions:

C1. U ∩ cl U0 ∩ cl U1 = ∅,

C2. U ∩ cl Si ⊆ Ui,

C3. Ti = Ui \ cl Si 6= ∅,

C4. cl(T ) \ U ⊆ cl(Ti),

55

z }| {
{z
|

V0

z

}

}|
{
| {z }

U1

C5. Ui is a regular open subset of U.

We now work in the boolean algebra RO(U ) of regular open subsets of U. By C5, we have U0, U1 ∈
RO(U ). We deﬁne further elements of RO(U ):

C6. M = −(U0 + U1),

C7. Vi = M + Ui for i = 0, 1.

The main property of these sets is as follows.

Claim 2.
elements are pairwise disjoint regular open subsets of U, with

{M, S0, S1, T0, T1} is a partition of 1 in the boolean algebra RO(U ). That is, the ﬁve

U0

V1

U =

S0 + T0 +

M + S1 + T1

.

(8.5)

Proof of claim. Let i < 2. By claim 1 and condition C5 above, Si, Ui ∈ RO(U ). By this and
condition C3,

Ti = Ui \ cl Si = Ui ∩ U \ cl Si = Ui · −Si ∈ RO(U ).

(8.6)

So Si · Ti = ∅ and, since Si ⊆ Ui by condition C2, also Ui = Ui · Si + Ui · −Si = Si + Ti.
Condition C1 above gives U0 · U1 = ∅. By deﬁnition, M = −(U0 + U1), so M ∈ RO(U ) and M
is disjoint from Ti, Si. Also, U = U0 + U1 + M = S0 + T0 + S1 + T1 + M. It is now plain that
M + Si + Ti = M + Ui = Vi. This proves the claim.

We aim to apply the inductive hypothesis to Vi, M + Si, Ti, Fi, for each i = 0, 1. We will need a

Vi-basic representation of Fi over M + Si, and the next claim helps us get one.
Claim 3. For each i < 2 we have U ∩ cl M ∩ cl Si = ∅, and M + Si = M ∪ Si in RO(U ).
Proof of claim. By deﬁnition, M = −(U0 + U1) = U \ cl(U0 + U1) ⊆ U \ Ui. Since Ui is open,
cl M ∩ Ui = ∅. But U ∩ cl Si ⊆ Ui by condition C2 above, so U ∩ cl M ∩ cl Si = ∅. By lemma 7.4,
M + Si = M ∪ Si. This proves the claim.
So all we need is to ﬁnd suitable representations over M and Si and take their union.

Clearly, F ∗(b0) is a subframe of F0, and so a proper subframe of F. It is obviously connected
(since rooted), and a generated subframe of F, so a locally connected KD4 frame. By the inductive
hypothesis, it is fully representable over X. So we can ﬁnd an (M-full) representation µ : M → R(b0)
of F ∗(b0) over M.

For each i < 2 let

σi = (σ ↾ Si) : Si → Wi.

Claim 4. For each i < 2, µ ∪ σi : M ∪ Si → Wi is a well deﬁned Vi-basic representation of Fi over
M ∪ Si.
Proof of claim. Since F ∗(b0) is a generated subframe of Fi, it follows from lemma 8.3(1) that µ is
a representation of Fi over M. Similarly, σi is a representation of Fi over Si. Since M and Si are
disjoint open sets, µ ∪ σi : M ∪ Si → Wi is well deﬁned and, by lemma 8.3(2), a representation of
Fi over M ∪ Si.

To prove that it is Vi-basic, let x ∈ Vi and v, w ∈ Wi be given, and suppose that (X, (µ ∪

σi)−1), x |= ✸w ∧ ✸v. We require Rwv.

56

Plainly, x ∈ cl(M ∪ Si) = cl M ∪ cl Si, and x ∈ Vi ⊆ U. But U ∩ cl M ∩ cl Si = ∅ by claim 3.

So there are two possibilities.

The ﬁrst one is that x /∈ cl M. In this case, we must have (X, σ−1

we also have (X, σ−1), x |= ✸w ∧ ✸v. As σ is U-basic, we obtain Rwv.

), x |= ✸w ∧ ✸v. As σi ⊆ σ,

i

The other possibility is that x /∈ cl Si. So (X, µ−1), x |= ✸w ∧ ✸v. Since µ is a representation
of F ∗(b0), we have w, v ∈ R(b0). But b0 is R-maximal, so R•(b0) = ∅. Hence, w ∈ R◦(b0), so
Rwb0, and since Rb0v, we deduce Rwv by transitivity. (Essentially we are using that F ∗(b0) is a
non-degenerate cluster.) This proves the claim.

In summary, for each i < 2 we have:

• Vi is open (by claim 2)

• M + Si, Vi ∈ RO(U ) and M + Si ⊆ Vi, so by lemma 7.4, M + Si is a regular open subset of

Vi

• working in RO(U ), we have Vi = (M + Si) + Ti and (Mi + Si) · Ti = ∅ by claim 2. So

Ti = Vi · −(M + Si) = Vi ∩ U \ cl(M + Si) = Vi \ cl(M + Si).

• M + Si = M ∪ Si (by claim 3), and µ ∪ σi : M ∪ Si → Wi is a Vi-basic representation of Fi

over M + Si (by claim 4)

So for each i < 2, recalling that Fi is fully representable, we see that µ ∪ σi : M ∪ Si → Wi extends
to a Ti-full representation ρi : Vi → Wi of Fi over Vi. We have

(X, ρ−1

i

), x |= hdiw for every w ∈ Wi and x ∈ cl Ti \ Vi.

Finally deﬁne

ρ = ρ0 ∪ ρ1 : U → W.

(8.7)

(8.8)

We check ﬁrst that ρ is well deﬁned and total. Working in RO(U ) again, we have dom ρ0 ∩ dom ρ1 =
V0 ∩ V1 = V0 · V1 = M by (8.5). But ρ0 ↾ M = µ = ρ1 ↾ M. So ρ is well deﬁned. Also,
Vi = −U1−i = U \ cl U1−i (for i = 0, 1) by (8.5), and U ∩ cl U0 ∩ cl U1 = ∅ by condition C1 above,
so

dom ρ = V0 ∪ V1 = (U \ cl U1) ∪ (U \ cl U0) = U \ (cl U1 ∩ cl U0) = U.

(8.9)

Hence, ρ is total. Plainly, ρ extends σ, since ρ = ρ0 ∪ ρ1 ⊇ (µ ∪ σ0) ∪ (µ ∪ σ1) = µ ∪ σ.
Claim 5. ρ is a representation of F over U.
Proof of claim. Let i < 2. Then ρ ↾ Vi = ρi, a representation of Fi over Vi. By lemma 8.3(1), this
is also a representation of F over Vi, which is an open set by claim 2. By (8.9), U = V0 ∪ V1, so by
lemma 8.3(2), ρ is a representation of F over U, proving the claim.

Claim 6. ρ is T -full.
Proof of claim. Let x ∈ cl T \ U. We require (X, ρ−1), x |= hdiw for every w ∈ W .

For each i < 2, as cl T \U ⊆ cl Ti by condition C4 above, and x /∈ U ⊇ Vi, we have x ∈ cl Ti \Vi.
Since ρi ⊆ ρ, it follows from (8.7) that (X, ρ−1), x |= hdiw for every w ∈ Wi. This holds for each
i = 0, 1. Since W0 ∪ W1 = W , we have (X, ρ−1), x |= hdiw for every w ∈ W .

Finally, we show that ρ(U ) = W . Since each ρi is a Ti-full representation of Fi over Vi, and Ti 6=
∅ by condition C3, by (8.9) we obtain ρ(U ) = ρ(V0) ∪ ρ(V1) = ρ0(V0) ∪ ρ1(V1) = W0 ∪ W1 = W .
This proves the claim, and with it, proposition 8.10.
✷

57

REMARK 8.11. We end with some technical remarks on the deﬁnition of ‘fully representable’ (def-
inition 8.9) and its relation to the proof just completed. They are not needed later, and the reader can
of course skip them if desired.

It is very helpful throughout the proof that U is open — see, e.g., lemma 8.3. However, we cannot
assume in deﬁnition 8.9 that U is regular open in X. For if we did, then in case 2 of the proof, we have
cl I ⊆ cl T ′ ⊆ cl U ′ by claim 3 and T ′ ⊆ U ′, so U ′ 6= U = int cl U = int(cl U ′ ∪ cl I) = int cl U ′.
Therefore, U ′ is not regular open in X, and we can not apply the inductive hypothesis to it. We use
that X is dense in itself to show that I ⊆ cl T ′.

At least according to the construction we gave, S should be open. In case 1, if S is not open then
there is x ∈ S \ int S ⊆ cl(U \ S), and a little thought shows that (X, ρ−1), x |= hdiw0 for any such
x. For ρ to be a representation, we would need R(ρ(x), w0). Since ρ ⊇ σ and x ∈ S, this says that
R(σ(x), w0), which we have no reason to suppose is true.

The problem if S is not regular open in U is that, again in case 1, we used that U \ S = cl T . If
this were to fail, there may be points x ∈ U \ (S ∪ cl T ) (so x ∈ U ∩ int cl S). We have to deﬁne ρ
on these x, and deﬁning ρ(x) = w0 as in the proof may not give a representation. However, as σ is
U-basic, it is possible to deﬁne ρ(x) using σ instead. This effectively extends σ to U ∩ int cl S. So
we can assume without loss of generality that S is regular open in U. It is therefore easier to do so
and avoid the problem completely.

We could just suppose in deﬁnition 8.9 that S is regular open in X, but we cannot suppose this of

U, and we have to work in RO(U ), so there is little gain in doing so.

We need that σ is U-basic in order that in case 3, the subsets S0, S1 have disjoint closures in U.

This in turn is needed to apply normality in the proof of corollary 7.9.

We cannot assume instead in deﬁnition 8.9 that σ is X-basic, because in case 3, we cannot guar-
antee that µ ∪ σi is X-basic. This is because we do not know that M ∩ cl Si = ∅, but only that
U ∩ M ∩ cl Si = ∅. We could solve this problem by assuming further that cl S ⊆ U (which im-
plies that S is regular open in X), but this weakens the proposition sufﬁciently to cause trouble in
theorem 10.1 later, where we would need to ensure that cl Sn ∪ cl Sn+1 ⊆ Un for each n.

Finally, we mention that actually ρ(T ) = W when T 6= ∅ — not only ρ but also ρ ↾ T is surjective.
We might try to drop the second, surjectivity part of deﬁnition 8.8 and simply prove it from the ﬁrst
part, as in cases 1 and 2 of the proof, but it is not clear how to do this in case 3.

9 Weak completeness

We are now ready to prove our ﬁrst tranche of main results, showing that Hilbert systems for various
sublanguages of Lµhtihdti
are sometimes sound and always complete over any non-empty dense-in-
itself metric space. Several of the proofs use the translations −d and −µ of section 6. We establish
only weak completeness. We will discuss strong completeness later, in section 10.4.

✷[d]∀

Here and later, we include ‘t’ in the name of a Hilbert system to indicate that it includes the tangle
axioms Fix and Ind of section 4.3. Recall that by lemma 7.7, metric spaces, regarded as topological
spaces, are Huasdorff and hence TD.

9.1 Weak completeness for Lµ

✷ and Lhti

✷

The pioneering result in this ﬁeld was the theorem of [25] that the L✷-logic of every separable dense-
in-itself metric space is S4. The assumption of separability was removed in [29]. We begin by gener-
alising this theorem, establishing (weak) completeness results for Lµ
✷ over any dense-in-itself

✷ and Lhti

58

metric space. We will go on to prove strong completeness in theorem 10.3.

THEOREM 9.1. Let X be a non-empty dense-in-itself metric space.
1. The Hilbert system S4µ is sound and complete over X for Lµ

✷-formulas.

2. The Hilbert system S4t is sound and complete over X for Lhti

✷ -formulas.

Proof. For part 1, soundness is easy to check and indeed we have already mentioned it in corol-
lary 6.8. For completeness, let ϕ be an Lµ
✷-formula that is not a theorem of S4µ. By theorem 3.7,
we can ﬁnd a ﬁnite S4 frame F = (W, R), an assignment h into F, and a world w ∈ W with
(W, R, h), w |= ¬ϕ. By replacing F by F(w), we can suppose that w is a root of F — this can
be justiﬁed in a standard way using lemma 2.1. Since F is rooted, it is clearly connected. Since it
is reﬂexive and transitive, it is a locally connected KD4 frame. So by proposition 8.10, F is fully
representable over X. So, taking U = X and S = σ = ∅ in the deﬁnition of ‘fully representable’
(deﬁnition 8.9), we may choose an X-full, hence surjective, representation ρ of F over X. Choose
x ∈ X with ρ(x) = w. Then

(W, R, h), w |= ϕ iff
iff
iff

(W, R, h), w |= ϕd
by lemma 6.4, since F is reﬂexive,
(X, ρ−1 ◦ h), x |= ϕd by proposition 8.5, since ϕd ∈ Lµ
(X, ρ−1 ◦ h), x |= ϕ

by lemma 6.5, since X is TD.

[d]∀,

We obtain (X, ρ−1 ◦ h), x |= ¬ϕ. Thus, ϕ is not valid over X, proving completeness.

The proof of part 2 is similar. For the soundness of the tangle axioms see [13, Theorem 6.1]. For
completeness, the differences are: ϕ is assumed to be an Lhti
✷ -formula that is not a theorem of S4t; we
use the results of section 4.8 in place of theorem 3.7 to obtain a ﬁnite S4 Kripke model satisfying ¬ϕ
at a root; and having obtained a surjective representation ρ of F over X and x ∈ X with ρ(x) = w,
we use the additional translation −µ from section 6, as follows. Note that ϕ ∈ Lhti
[d] , and
(ϕd)µ ∈ Lµ

✷ , ϕd ∈ Lhdti

[d] ⊆ Lµ

[d]∀.

(W, R, h), w |= ϕ iff
iff
iff
iff
iff

by lemma 6.4, since F is reﬂexive,
by lemma 6.2, since F is transitive,

(W, R, h), w |= ϕd
(W, R, h), w |= (ϕd)µ
(X, ρ−1 ◦ h), x |= (ϕd)µ by proposition 8.5, since (ϕd)µ ∈ Lµ
(X, ρ−1 ◦ h), x |= ϕd
(X, ρ−1 ◦ h), x |= ϕ

by lemma 6.2 again,
by lemma 6.5, since X is TD.

[d]∀,

✷

9.2 Weak completeness for L✷∀ and Lhti
✷∀
Completeness for languages with ∀ follows the same lines, although soundness requires that the space
be connected.

THEOREM 9.2. Let X be a non-empty dense-in-itself metric space.

1. The Hilbert system S4.UC is complete over X for L✷∀-formulas, and sound if X is connected.6
6In [32, theorem 18], Shehtman states this result when X is additionally assumed separable. However, [21, footnote
7] states that [32] “contains a stronger claim: [the L✷∀-logic of X is S4.UC] for any connected dense-in-itself separable
metric X. However, recently we found a gap in the proof of Lemma 17 from that paper. Now we state the main result
only for the case X = Rn; a proof can be obtained by applying the methods of the present Chapter, but we are planning to
publish it separately.”

59

2. The Hilbert system S4t.UC is complete over X for Lhti

✷∀-formulas, and sound if X is connected.

Proof. For part 1, soundness when X is connected is again clear: connectedness is needed so that the
C axiom is valid in X. For completeness, even when X is not connected, suppose that ϕ ∈ L✷∀ is
not a theorem of S4.UC. By the results of section 4.10, or by [32, theorem 10], S4.UC has the ﬁnite
model property, so we can ﬁnd a ﬁnite connected S4 frame F = (W, R), an assignment h into F, and
a world w ∈ W such that (W, R, h), w |= ¬ϕ. The proof that ϕ is not valid in X is now exactly as in
theorem 9.1.

Part 2 is proved similarly, using the results of section 4.10 to obtain a ﬁnite model.

✷

We have no results for Lµ

✷∀ because we are not aware of any completeness theorem for this lan-
guage with respect to ﬁnite connected S4 frames. If one is proved in future, we could take advantage
of it.

9.3 Weak completeness for L[d] and Lhdti

[d]

In one way this is even easier, as we do not need the translation ϕd. But again, soundness requires a
condition on the space.

THEOREM 9.3. Let X be a non-empty dense-in-itself metric space.

1. The Hilbert system KD4G1 is complete over X for L[d]-formulas, and sound if G1 is valid in

X.

2. The Hilbert system KD4G1t is complete over X for Lhdti

[d] -formulas, and sound if G1 is valid in

X.

Proof. For part 1, soundness is clear. For completeness, even when X does not validate G1, suppose
that ϕ ∈ L[d] is not a theorem of KD4G1. As we mentioned in section 4.12, KD4G1 has the ﬁnite
model property [31, theorem 15], so we can ﬁnd a ﬁnite KD4G1 frame F = (W, R), an assignment h
into F, and a world w ∈ W such that (W, R, h), w |= ¬ϕ. As usual, by replacing F by F(w), we can
suppose that F is connected. It is also locally connected because it validates G1 (see fact 4.9). Using
proposition 8.10, let ρ be a surjective representation of F over X. Let x ∈ X satisfy ρ(x) = w. Then
(X, ρ−1 ◦ h), x |= ¬ϕ by proposition 8.5. So ϕ is not valid in X.

The proof of part 2 is similar, except that we use the results of section 4.13 to obtain a ﬁnite
into an
✷

model, and in order to apply proposition 8.5, we ﬁrst use the translation −µ to turn ϕ ∈ Lhdti
[d]
Lµ
[d]-formula ϕµ equivalent to ϕ in transitive frames and in X.
REMARK 9.4. Theorem 9.3(1) is related to earlier work of Shehtman [31]. In [31, theorem 23,
p.39], the following is proved for the language L[d]:

(i) Let X be a topological space having an open set homeomorphic to some Rn, n > 0.

Then L(D(X)) ⊆ D4G1 [the L[d]-logic of X is contained in KD4G1].

(ii) If additionally X satisﬁes conditions of lemma 2 then L(D(X)) = D4G1.

Lemma 2 [31, p.3] states the following.

Let X be a topological space satisfying the following condition: for any open U and any
x ∈ U there is open V ⊆ U such that x ∈ V and (V \ {x}) is connected [as a subspace
of X]. Then X |= G1.

60

Shehtman’s results (i), (ii) above follow from theorem 9.3(1). We remark that the converse of his
lemma 2 fails in general — a counterexample is given by the subspace X = R2 \ {(1/n, y) :
n a positive integer, y ∈ R} of R2.
[23, theorems 3.12, 3.14] give a characterisation of when a
topological space validates Gn, for n ≥ 1.

Shehtman [31, p.43] also states two open problems:

1. To describe all [L[d]-]logics [of] dense-in-itself metric spaces X. In particular, is [K]D4G1 the

greatest of them?

2. Is theorem 23(ii) extended to the inﬁnite dimensional case? In particular, does it hold for Hilbert

space ℓ2 (with the weak or with the strong topology)?

Theorem 9.3(1) appears to resolve problem 2 and the second part of problem 1, both positively.

Shehtman also proved in [31, theorem 29] that the L[d]-logic of every zero-dimensional separable

dense-in-itself metric space is KD4. This does not follow from theorem 9.3.

9.4 Weak completeness for L[d]∀ and Lhdti
The following is now purely routine.

[d]∀

THEOREM 9.5. Let X be a non-empty dense-in-itself metric space.

1. The Hilbert system KD4G1.UC is complete over X for L[d]∀-formulas, and sound if X is

connected and validates G1.

2. The Hilbert system KD4G1t.UC is complete over X for Lhdti

[d]∀-formulas, and sound if X is

connected and validates G1.

Proof. The ﬁnite model property for KD4G1.UC and KD4G1t.UC follows from the results of sec-
tion 4.13. There are no other new elements in the proof, so we leave it to the reader.
✷

10 Strong completeness

Here, we will prove that KD4G1t is strongly complete over any non-empty dense-in-itself metric
space X: any countable KD4G1t-consistent set of Lhdti
[d] -formulas is satisﬁable over X. The analogous
✷ and the weaker languages L[d] and Lhti
results for Lµ
✷ will follow. The analogous result for L✷ also
follows, but this is a known result, proved recently by Kremer [18]. We will then show that strong
completeness frequently fails for languages with ∀.

10.1 The problem

Let us outline a naïve approach to the problem. It does not work, but it will illustrate the difﬁculty we
face and motivate the formal proof later.

Let Γ be a countable KD4G1t-consistent set of Lhdti

[d] -formulas. For simplicity, assume that Γ is
maximal consistent. Write Γ as the union of an increasing chain Γ0 ⊆ Γ1 ⊆ · · · of ﬁnite sets. Fix
x ∈ X. By weak completeness (theorem 9.3), each Γn (n < ω) is satisﬁable at x, so we can ﬁnd an
assignment gn on X with (X, gn), x |= Γn. Suppose we could build a new assignment g that behaves

61

like gn for larger and larger n, as we approach x. Then we might hope that (X, g), x |= Γn for all n,
and so (X, g), x |= Γ.

To deﬁne such a g, we choose a countable sequence X = S0 ⊇ S1 ⊇ · · · of open neighbourhoods

of x, such that

S1. every open neighbourhood of x contains some Sn (that is, the Sn form a ‘base of open neigh-

bourhoods’ of x).

X is a metric space, so we can do this. Since we can make the Sn as small as we like, and the Γn are
ﬁnite sets, we can suppose that for each n < ω:

S2. for each [d]ϕ ∈ Γn, we have (X, gn), y |= ϕ for every y ∈ Sn \ {x},

S3. for each hdiϕ ∈ Γn, there is y ∈ Sn \ cl Sn+1 with (X, gn), y |= ϕ.

We can now deﬁne a new assignment g by ‘using gn within Sn’, for each n < ω. More precisely, we
let

g(p) ∩ (Sn \ Sn+1) = gn(p) ∩ (Sn \ Sn+1)

for each atom p and each n < ω. We also need to deﬁne g at x itself, but we can use Γ to determine
truth values of atoms there.

Now we try to prove that ϕ ∈ Γ iff (X, g), x |= ϕ for all formulas ϕ, by induction on ϕ. The

atomic and boolean cases are easy. Consider the case hdiϕ.

If hdiϕ ∈ Γ, then hdiϕ ∈ Γn for all large enough n, so by S3, there is y ∈ Sn \ cl Sn+1 with
(X, gn), y |= ϕ. As Sn \ cl Sn+1 is open and gn agrees with g on it, it follows that (X, g), y |= ϕ.
This holds for coﬁnitely many n, so (X, g), x |= hdiϕ.

Conversely, if (X, g), x |= hdiϕ, then for inﬁnitely many n, there is y ∈ Sn \ Sn+1 with
(X, g), y |= ϕ. If we could ﬁnd such a y ∈ Sn \ cl Sn+1, then as above, (X, gn), y |= ϕ, and it
would follow by S2 and maximality of Γ that hdiϕ ∈ Γ.

But it may be that we can only ﬁnd such y ∈ cl Sn+1. The truth of ϕ at such y may not be
preserved when we change from g to gn, because it may depend on points in Sn+1, and at such points,
g agrees with gn+1, not gn. (We cannot just make Sn+1 smaller to take the witnesses y out of cl Sn+1,
because g will then change, and we may no longer have (X, g), y |= ϕ.)

So we would like to arrange a smooth transition between gn and gn+1, avoiding unpleasant dis-
continuities. It would be sufﬁcient if there is some closed Tn+1 ⊆ Sn+1 such that gn and gn+1 agree
on the ‘buffer zone’ Sn+1 \ Tn+1. Much of the formal proof below is aimed at achieving something
like this for atoms occurring in Γn — see claim 3 especially.

10.2 Strong completeness for Lhdti
[d]

THEOREM 10.1 (strong completeness). Let X be a non-empty dense-in-itself metric space. Then
the Hilbert system KD4G1t is strongly complete over X for Lhdti
[d] -formulas, and sound if G1 is valid
in X.

Proof. For soundness, see theorem 9.3. For strong completeness, let Γ be a countable KD4G1t-
consistent set of Lhdti
[d] -formulas. We show that Γ is satisﬁable over X. We can suppose without loss

of generality that Γ is maximal consistent. Since Γ is countable, we can write it as Γ = Sn<ω Γn,

where Γ0 ⊆ Γ1 ⊆ · · · is a chain of ﬁnite sets. Let Ln be the ﬁnite set of atoms occurring in formulas
in Γn, for each n < ω. So L0 ⊆ L1 ⊆ · · · . For each n < ω, as Γn is KD4G1t-consistent, by the

62

results of section 4.13 there is a ﬁnite Kripke model Mn = (Wn, Rn, hn) whose frame (Wn, Rn)
validates KD4G1, and a world wn ∈ Wn with

Mn, wn |= Γn.

We can assume without loss of generality that the Wn (n < ω) are pairwise disjoint. For each n, ﬁx
an arbitrary en ∈ Wn with Rnwnen and such that en is Rn-maximal — that is, R•

n(en) = ∅.

For i ≤ j < ω and w ∈ Wj write

tpi(w) = {p ∈ Li : Mj, w |= p} ∈ ℘Li

τ j
i = {tpi(w) : w ∈ Rj(ej)} ∈ ℘℘Li

i (w) since the Wn are pairwise disjoint so j is determined by w. And τ j

So tpi(w) is the ‘atomic type’ of w in Mj with respect to the ﬁnite set Li of atoms. We do not need
to write tpj
i is the set of such
types that occur as types of points in the cluster Rj(ej).
Claim 1. We can suppose without loss of generality that τ j
Proof of claim. Essentially König’s tree lemma. We will deﬁne by induction inﬁnite sets ω = I−1 ⊇
I0 ⊇ I1 ⊇ · · · . We let in = min In, and we will arrange that 0 = i−1 < i0 < i1 < · · · and in ≥ n
for all n. Let n < ω and suppose that we are given In−1 and in−1 = min In−1 ≥ n − 1 inductively.
Using that ℘℘Ln is ﬁnite, choose inﬁnite In ⊆ In−1 \ {in−1} such that τ i
n ∈ ℘℘Ln is constant for all
i ∈ In. The term τ i
n is deﬁned for all i ∈ In, because i ≥ min In > in−1 ≥ n − 1 and so i ≥ n. Of
course deﬁne in = min In. Then in > in−1 and in ≥ n as required. This completes the deﬁnition.
Now replace Mn, wn, en by Min, win, ein for each n < ω. Do not change Γn or Ln. Since n ≤ in,
we have Γn ⊆ Γin, and consequently we still have Mn, wn |= Γn for each n. And if r ≤ s < ω we
have ir, is ∈ Ir, so τ ir

r , and consequently after replacement, τ r

i whenever i ≤ j < ω.

i = τ i

r = τ is

r = τ s

r. This proves the claim.

For each n < ω, deﬁne the frames

Fn = (Rn(wn), Rn ↾ Rn(wn)),
Cn = (Rn(en), Rn ↾ Rn(en)).

Fn is a generated subframe of (Wn, Rn), so also a KD4G1-frame; it is connected since (Wn, Rn)
validates G1. As en is Rn-maximal, Cn is a nondegenerate cluster, so trivially a connected KD4G1-
frame, and (as Rn is transitive) a generated subframe of Fn. We conclude from proposition 8.10 that
Fn and Cn are fully representable over X, for all n < ω.

Now ﬁx arbitrary x0 ∈ X. Let O be an open neighbourhood of x0. Since X is a metric space,
all singletons are closed, and since it is dense in itself, lemma 7.1 tells us that O is inﬁnite, so we can
pick y ∈ O \ {x0}. Then O \ {y} is open, {x0} ⊆ O \ {y}, and {x0} is closed. By lemma 7.7, X
is normal, so there is open P with x0 ∈ P ⊆ int cl P ⊆ cl P ⊆ O \ {y} ⊂ O (the last inclusion
being strict). Note that int cl P is regular open in X. So every open neighbourhood of x0 properly
contains the closure of some regular open neighbourhood of x0. Using this repeatedly, we may choose
regular open subsets On, Pn of X (for n < ω) containing x0, with O0 = X, and with the following
properties:

1. cl On+1 ⊂ Pn and cl Pn ⊂ On (the inclusions are strict) for each n < ω.

2. On ⊆ N1/n(x0) for each n > 0.

63

Figure 1: rough guide to the sets On, Pn, Un, Sn

It follows that for every open neighbourhood O of x0, there is n < ω with On ⊆ O. That is, the On
form a base of open neighbourhoods of x0.

For each n < ω deﬁne open sets

See ﬁgure 1. It is easily seen that

Un = On \ cl Pn+1,
Sn = On \ cl Pn.

[n<ω

(On \ On+1) = X \ {x0},

Um = On \ {x0}

for each n < ω.

[n≤m<ω

(10.1)

(10.2)

The following claim lists some more basic facts about our situation.

Claim 2. For each n < ω:

1. Un ∩ Un+1 = Sn+1 6= ∅.

2. Sn ∪ Sn+1 ⊆ Un,

3. cl Sn ∩ cl Sn+1 = ∅,

4. Sn, Sn+1, and Sn ∪ Sn+1 are regular open subsets of Un,

5. Un \ cl(Sn ∪ Sn+1) 6= ∅.

Proof of claim.

1. Easy.

2. From the deﬁnitions we have Sn = On \ cl Pn ⊆ On \ cl Pn+1 = Un and Sn+1 = On+1 \

cl Pn+1 ⊆ On \ cl Pn+1 = Un.

64

3. It is clear that

cl Sn ⊆ cl On \ Pn.

(10.3)

Applying this for n + 1 and n gives cl Sn+1 ∩ cl Sn ⊆ cl On+1 \ Pn ⊆ Pn \ Pn = ∅.

4. On and Pn are regular open subsets of X, so by lemma 7.4, Sn = On \ cl Pn is a regular open
subset of X too. Since cl Sn ∩ cl Sn+1 = ∅ by part 2, lemma 7.4(2) yields that Sn ∪ Sn+1 is
also a regular open subset of X. Since each of these three sets is a subset of Un by part 2, by
lemma 7.4(3) it is also regular open in Un.

5. By (10.3) (for n and n + 1), cl Sn and cl Sn+1 are disjoint from Pn \ cl On+1, so by additivity

of closure, Un \ cl(Sn ∪ Sn+1) = Un \ (cl Sn ∪ cl Sn+1) ⊇ Pn \ cl On+1 6= ∅.

Claim 3. There are surjective representations ρn of Fn over Un (n < ω) such that

1. ρn ↾ Sn+1 is a representation of Cn over Sn+1,

2. tpn(ρn(x)) = tpn(ρn+1(x)) for all x ∈ Sn+1.

Proof of claim. We deﬁne the ρn by induction on n. First let n = 0. Since C0 is fully representable
over X, we can choose a representation σ : S1 → C0. Because C0 is a nondegenerate cluster, σ is
actually a U0-basic representation (see remark 8.7). By claim 2, S1 is a regular open subset of U0, and
U0 \ cl S1 6= ∅. Now F0 is also fully representable over X, so σ extends to a surjective representation
ρ0 of F0 over U0. Clearly, condition 1 above is met.

Let n < ω and assume inductively that for each m ≤ n, a surjective representation ρm of
Fm over Um has been constructed, such that ρm ↾ Sm+1 is a representation of Cm over Sm+1 and
tpm(ρm(x)) = tpm(ρm+1(x)) for all x ∈ Sm+1 whenever m < n. We will deﬁne ρn+1 to continue
the sequence.

Note ﬁrst that since Cn is a non-degenerate cluster, ρn ↾ Sn+1 is Un-basic — see remark 8.7.
It is also surjective. For, let w ∈ Rn(en) be given. Take x ∈ Sn+1 (note that Sn+1 is non-empty
by claim 2). As Cn is a non-degenerate cluster, Rn(ρn(x), w), so as ρn ↾ Sn+1 is a representation,
(Sn+1, (ρn ↾ Sn+1)−1), x |= hdiw. This certainly implies that ρn(y) = w for some y ∈ Sn+1.

For each w ∈ Rn(en), deﬁne

Dw = {x ∈ Sn+1 : ρn(x) = w}
⊆ Sn+1,
Hw = {v ∈ Rn+1(en+1) : tpn(v) = tpn(w)} ⊆ Wn+1,
Hw = (Hw, Rn+1 ↾ Hw).

See ﬁgure 2. Because ρn ↾ Sn+1 is surjective onto Cn, each set Dw is non-empty, and plainly,
Sn+1 is partitioned by the Dw (w ∈ Rn(en)). Because τ n+1
n, each Hw is non-empty and

n = τ n

equal or disjoint.)

Sw∈Rn(en) Hw = Rn+1(en+1). (The sets Hw may not be pairwise disjoint, but any two of them are

Let w ∈ Rn(en) and consider Dw as a subspace of X. We show that it is dense in itself. Let
x ∈ Dw and suppose for contradiction that {x} is open in Dw. So there is open O ⊆ X with
O ∩ Dw = {x}, and as Sn+1 is open, we can suppose that O ⊆ Sn+1. Now by the inductive
hypothesis, ρn ↾ Sn+1 is a representation of Cn over Sn+1. Because Cn is a non-degenerate cluster,
Rnww, so (X, (ρn ↾ Sn+1)−1), x |= hdiw. So there is y ∈ O \ {x} with ρn(y) = w. But then
y ∈ O ∩ Dw = {x}, a contradiction.

65

Figure 2: illustration for claim 3

So Dw is a dense-in-itself metric space in its own right. Since Cn+1 is a nondegenerate cluster, so
is its subframe Hw. Hence, Hw is trivially a ﬁnite connected KD4G1 frame. So by proposition 8.10,
there is a surjective representation

σw : Dw → Hw

of Hw over Dw. We have (Dw, σ−1

w ), x |= hdiv for every x ∈ Dw and v ∈ Hw. By lemma 8.2,

(X, σ−1

w ), y |= hdiv

for every x ∈ Dw and v ∈ Hw.

(10.4)

Now let

σ =(cid:16) [w∈Rn(en)

σw(cid:17) : Sn+1 → Rn+1(en+1).

The sets Dw partition Sn+1, so σ is a well deﬁned and total map. It has the following property. Let
x ∈ Sn+1. Writing ρn(x) = w, say, we have x ∈ Dw and σ(x) = σw(x) ∈ Hw, so tpn(σ(x)) =
tpn(w) by deﬁnition of Hw. That is,

tpn(σ(x)) = tpn(ρn(x))

for each x ∈ Sn+1.

(10.5)

We show that σ is a representation of Cn+1 over Sn+1. Since Cn+1 is a non-degenerate cluster, we

need show only that (X, σ−1), x |= hdiv for every x ∈ Sn+1 and v ∈ Rn+1(en+1).

66

So take such x, v. Suppose that ρn(x) = w, say, so x ∈ Dw. Choose w′ ∈ Rn(en) such that v ∈
Hw′ (it may not be unique). As Cn is a cluster, Rn(w, w′). As ρn ↾ Sn+1 is a representation of Cn over
Sn+1, we have (X, (ρn ↾ Sn+1)−1), x |= hdiw′. That is, x ∈ hdiDw′. But by (10.4), (X, σ−1), y |=
hdiv for every y ∈ Dw′. It follows that (X, σ−1), x |= hdihdiv, and hence (X, σ−1), x |= hdiv as
required.

So σ is indeed a representation of Cn+1 over Sn+1. As Cn+1 is fully representable over X, we may
choose a representation σ′ of Cn+1 over Sn+2. By claim 2, Sn+1 ∩ Sn+2 = ∅, so by lemma 8.3, σ ∪ σ′
is a well deﬁned representation of Cn+1 over the regular open subset Sn+1 ∪ Sn+2 of Un+1. Also,
Un+1 \ cl(Sn+1 ∪ Sn+2) 6= ∅. And since Cn+1 is a nondegenerate cluster, σ ∪ σ′ is Un+1-basic (see
remark 8.7 again). We can now use the fact that Fn+1 is fully representable over X to extend σ ∪ σ′
is to a surjective representation ρn+1 of Fn+1 over Un+1. Then ρn+1 ↾ Sn+2 = σ′ is a representation
of Cn+1 over Sn+2, and by (10.5), tpn(ρn(x)) = tpn(σ(x)) = tpn(ρn+1(x)) for all x ∈ Sn+1. This
proves claim 3.

Let n < ω. Deﬁne an assignment gn on Un by

gn(p) = ρ−1

n (hn(p)) for each atom p.

(10.6)

By the claim, if p ∈ Ln, then for each x ∈ Sn+1 we have x ∈ gn(p) iff ρn(x) ∈ hn(p), iff p ∈
tpn(ρn(x)) = tpn(ρn+1(x)), iff ρn+1(x) ∈ hn+1(p), iff x ∈ gn+1(p). So

Sn+1 ∩ gn(p) = Sn+1 ∩ gn+1(p)

for each p ∈ Ln.

(10.7)

Finally, deﬁne an assignment g on X as follows. Let p be an atom.

• For x ∈ X \ {x0}, deﬁne x ∈ g(p) iff x ∈ gn(p), where x ∈ On \ On+1.

Since the On \ On+1 are pairwise disjoint, andSn<ω(On \ On+1) = X \ {x0} by (10.1), this

is well deﬁned.

• Deﬁne (X, g), x0 |= p iff p ∈ Γ.

Claim 4. Let n < ω, let x ∈ Un, and let ϕ be a formula whose atoms lie in Ln. Then (X, g), x |= ϕ
iff Mn, ρn(x) |= ϕ.
Proof of claim. Let p ∈ Ln be arbitrary. Recall that Un = On \ cl Pn+1. By deﬁnition of g, if
x ∈ On \On+1 then x ∈ g(p) iff x ∈ gn(p). If instead x ∈ On+1, then x ∈ On+1 \cl Pn+1 = Sn+1 ⊆
On+1 \ On+2, and since p ∈ Ln+1 too, the deﬁnition of g gives x ∈ g(p) iff x ∈ gn+1(p). But by
(10.7), this is iff x ∈ gn(p) again. So g and gn agree on Un as far as atoms in Ln are concerned, and as
Un is open, it follows easily that (X, g), x |= ϕ iff (Un, gn), x |= ϕ. Since ρn is a representation over
Un of the generated subframe Fn of (Wn, Rn), by lemma 8.3 it is also a representation of (Wn, Rn)
over Un. So by (10.6) and proposition 8.5, (Un, gn), x |= ϕ iff Mn, ρn(x) |= ϕ. This proves the
claim.

Claim 5. For all ϕ we have (X, g), x0 |= ϕ iff ϕ ∈ Γ.
Proof of claim. By induction on ϕ. For atoms, the result follows from the deﬁnition of g. The boolean
operators are handled in the usual way by induction, using the maximal consistency of Γ; they are the
only cases in which the inductive hypothesis is used.

We now tackle the case [d]ϕ. It is sufﬁcient (and seems more intuitive) to deal with hdiϕ instead.
Suppose ﬁrst that hdiϕ ∈ Γ. Choose n < ω such that hdiϕ ∈ Γn. Let i ≥ n be arbitrary. Then

67

hdiϕ ∈ Γi, so Mi, wi |= hdiϕ, and hence there is v ∈ Ri(wi) with Mi, v |= ϕ. As ρi : Ui → Ri(wi)
is surjective (see claim 3), there is x ∈ Ui with ρi(x) = v. Since hdiϕ ∈ Γi, the atoms of ϕ lie
in Li, so claim 4 applies: (X, g), x |= ϕ. We conclude that for every i ≥ n there is x ∈ Ui with
(X, g), x |= ϕ. As Ui ⊆ Oi \ {x0} and the Oi form a base of neighbourhoods of x0, it follows that
(X, g), x0 |= hdiϕ.

Conversely, suppose that (X, g), x0 |= hdiϕ. For each n < ω, On is an open neighbourhood of

x0, so there is x ∈ On \ {x0} with (X, g), x |= ϕ. Since On \ {x0} =Sn≤i<ω Ui by (10.2), we have

x ∈ Ui for some i ≥ n. It follows that there are inﬁnitely many i < ω such that (X, g), x |= ϕ for
some x ∈ Ui. Since the atoms of ϕ lie in Li for coﬁnitely many i, there must be inﬁnitely many i
with Mi, v |= ϕ for some v ∈ Ri(wi) (by claim 4), and so Mi, wi |= hdiϕ (by Kripke semantics),
and so ¬hdiϕ /∈ Γi (since Mi, wi |= Γi). Since Γ is the union of the chain Γ0 ⊆ Γ1 ⊆ · · · , we have
¬hdiϕ /∈ Γ. As Γ is maximal consistent, it follows that hdiϕ ∈ Γ.

Finally, consider the case hdti∆, where ∆ is any non-empty ﬁnite set of formulas. Suppose ﬁrst
that hdi∆ ∈ Γ. We only sketch the proof here, referring the reader to the case of hdiϕ for more details.
Pick any δ ∈ ∆. Then as in the case of hdiϕ, each of the following holds for coﬁnitely many i < ω:

• hdti∆ ∈ Γi

• Mi, wi |= hdti∆

• there is v ∈ Ri(wi) with Mi, v |= δ ∧ hdti∆

• there is x ∈ Ui with (X, g), x |= δ ∧ hdti∆.

As the latter holds for every δ ∈ ∆, it follows that (X, g), x0 |= hdti∆.

Conversely, suppose (X, g), x0 |= hdti∆. Then as in the hdiϕ case, there are inﬁnitely many
i < ω such that (X, g), x |= hdti∆ for some x ∈ Ui. Since the atoms of hdti∆ lie in Li for coﬁnitely
many i < ω, it follows by claim 4 that there are inﬁnitely many i such that there is v ∈ Ri(wi) with
Mi, v |= hdti∆, and hence — by the semantics of hdti — Mi, wi |= hdti∆. As in the hdiϕ case, we
obtain ¬hdti∆ /∈ Γi for inﬁnitely many i, so ¬hdti∆ /∈ Γ, and so hdti∆ ∈ Γ by maximal consistency
of Γ. The claim is proved, and the theorem with it.
✷

10.3 Strong completeness for L[d]
We can now easily derive the analogous result for ‘modal’ L[d]-formulas, essentially by showing that
KD4G1t is a conservative extension of KD4G1.

THEOREM 10.2. Let X be a non-empty dense-in-itself metric space. Then the Hilbert system
KD4G1 is strongly complete over X for L[d]-formulas, and sound if G1 is valid in X.

Proof. For soundness, see theorem 9.3. For strong completeness, let Γ be a countable KD4G1-

consistent set of L[d]-formulas. Let Γ0 ⊆ Γ be ﬁnite and put γ =V Γ0. Then γ is KD4G1-consistent,

so by the results of section 4.13 it is satisﬁed in some ﬁnite KD4G1-frame F. Plainly, F is also
a KD4G1t-frame, and it follows that γ is KD4G1t-consistent. So Γ is KD4G1t-consistent. By
theorem 10.1, Γ is satisﬁable over X.
✷

10.4 Strong completeness for Lhti

✷ and Lµ

✷

This also follows, using the translations −d and −t of section 6.

68

THEOREM 10.3. Let X be any dense-in-itself metric space.

1. The Hilbert system S4t is sound and strongly complete over X for Lhti

✷ -formulas.

2. The Hilbert system S4µ is sound and strongly complete over X for Lµ

✷-formulas.

3. (Kremer, [18]) The Hilbert system S4 is sound and strongly complete over X for L✷-formulas.

Proof. Soundness is clear in all cases: cf. theorem 9.1. We prove strong completeness. For part 1, let
ϕ be an S4t-consistent Lhti
✷ -formula. By the results of section 4.8, ϕ is satisﬁable in some ﬁnite S4
Kripke frame F. Recall from section 6 the translation −d: it takes Lhti
[d] -formulas.
Since F is reﬂexive, it follows from lemma 6.4 that ϕd is equivalent to ϕ in F. So ϕd is satisﬁable in
F. Plainly, F is also a KD4G1t frame, so ϕd is KD4G1t-consistent.

✷ -formulas to Lhdti

Since −d commutes with ∧, it is now easily seen that if Γ ⊆ Lhti

✷ is a countable S4t-consistent
set then Γd = {γd : γ ∈ Γ} ⊆ Lhdti
is a countable KD4G1t-consistent set. By theorem 10.1, Γd is
[d]
satisﬁable over X. Since X is TD, by lemma 6.5 each γ ∈ Γ is equivalent to γd in X, so Γ is also
satisﬁable over X.

For part 2, for a set Γ ⊆ Lµ

✷ we write Γt = {γt

−t : Lµ

✷ → Lhti

✷ is as in section 6.3. Let Γ ⊆ Lµ

: γ ∈ Γ} ⊆ Lhti

✷ , where the translation
✷ be a countable S4µ-consistent set. Let Γ0 ⊆ Γ

be any ﬁnite subset. By assumption, the formulaV Γ0 is S4µ-consistent. So by theorem 3.7, there
is a ﬁnite S4 frame F in which V Γ0 is satisﬁed. By fact 6.7, ϕt is equivalent to ϕ in F, for each
0) is also satisﬁed in F. Since F is plainly an S4t frame, it follows thatV(Γt

ϕ ∈ Lµ
S4t-consistent. As Γ0 was arbitrary, Γt is S4t-consistent.

By part 1, Γt is satisﬁed in X. But by corollary 6.8, each γ ∈ Γ is equivalent to γt in X. So Γ is

✷. SoV(Γt

0) is

also satisﬁed in X.

Part 3 can be proved similarly, by showing in the same way that for L✷-formulas, S4-consistency
✷

implies S4t-consistency, and then appealing to part 1.

10.5 Universal modality

We do not include the universal modality in our strong completeness results, for good reason.

THEOREM 10.4. There is a set Σ of L✷∀-formulas such that for every non-empty compact locally
connected dense-in-itself metric space X, each ﬁnite subset of Σ is satisﬁable in X, but Σ as a whole
is not.

Compact means that if S is a set of open sets withS S = X, then X = S S0 for some ﬁnite

S0 ⊆ S. Locally connected means that every open neighbourhood of a point x contains a connected
(in the subspace topology) open neighbourhood of x. An example of a compact locally connected
dense-in-itself metric space is the subspace [0, 1] of R.

Proof. The proof is based on the following model M = (W, R, h), where we suppose that Var =
{r, g, b} ∪ {pi : i < ω}.

1. W = {an, bn : n < ω}, where the an and bn are pairwise distinct

2. R is the reﬂexive closure of {(an, bn), (an, bn+1) : n < ω}

69

a0
✁

✁
✁

❝

✁✁☛
r
p0

❝

❆

❆
❆

❆❆❯
b1

a1
✁
✁

❝

✁
✁✁☛
g
p0

❝

❆
❆

❆
❆❆❯
b2

❝

❆

a2
✁

✁
✁

❆
❆

❆❆❯
b3

✁✁☛
b

❝

a3
✁
✁

❝

✁
✁✁☛
r
p1

❝

❆
❆

❆
❆❆❯
b4

a4
✁

✁
✁

❝

✁✁☛
g
p1

❝

❆

❆
❆

❆❆❯
b5

a5
✁
✁

✁
✁✁☛
b

❝

❝

❆
❆

❆
❆❆❯
b6

· · ·

❝

✁
✁✁☛
r
p2

b0

Figure 3: M

3. h(r) = {b3n : n < ω}, h(g) = {b3n+1 : n < ω}, h(b) = {b3n+2 : n < ω}, and h(pn) =

{b3n, b3n+1} for each n < ω.

The model is shown in ﬁgure 3 — it goes off to the right forever, roughly repeating after every three
steps. Of course R is reﬂexive. Note that the underlying frame is connected.

We let Σ be the set comprising the following formulas:

Σ1. ∃(✸pi ∧ ✸r ∧ ✸g) for each i < ω

Σ2. ∀¬(✸pi ∧ ✸pj) for i < j < ω

Σ3. ∀¬(✸r ∧ ✸g ∧ ✸b)

Σ4. ∀(✸pi ∧ ✷¬b → ✷✸pi) for i < ω.
They are plainly valid in M. Hence Σ is satisﬁed in M, at every point. Moreover, any ﬁnite subset
Σ0 ⊆ Σ is satisﬁed in a ﬁnite submodel of M obtained by taking a large enough ‘initial segment’ of
M ending on the right at a b-world. Check especially formulas of the form ∀∃. In particular, Σ4 is
valid in such a submodel. Or one can use that it is a generated submodel. The submodel is ﬁnite and its

frame validates S4.UC, so every formula satisﬁed in it — for example,V Σ0 — is S4.UC-consistent.

Hence, by theorem 9.2, every ﬁnite subset of Σ is satisﬁable in X.

Assume for contradiction that Σ is satisﬁed in some model (X, h) on X. Below, we will write
x |= ϕ instead of (X, h), x |= ϕ. By Σ1, for each i < ω there is xi ∈ X with xi |= ✸pi ∧ ✸r ∧ ✸g.
As X is compact, it contains a point z such that for every open neighbourhood N of z, the set {i <
ω : xi ∈ N } is inﬁnite. Then z |= ✸r ∧ ✸g as well. By Σ3, z |= ✷¬b. As X is locally connected,
there is a connected open neighbourhood N of z with y |= ¬b for all y ∈ N.

Take i < j < ω with xi, xj ∈ N. Let U = {x ∈ N : x |= ✸pi}. Then U is an open subset of
N, because for every u ∈ U we have u |= ✸pi ∧ ✷¬b, and Σ4 gives u |= ✷✸pi. And N \ U is also
open, because U ′ = {x ∈ X : x |= ✸pi} is closed and N \ U = N \ U ′. We have xi ∈ U, but by Σ2,
xj ∈ N \ U. So N is the union of two disjoint non-empty open sets (U and N \ U), contradicting its
connectedness.
✷

COROLLARY 10.5. Let X be a non-empty compact locally connected dense-in-itself metric space,
and L ⊆ Lµhtihdti
a language containing L✷∀ or L[d]∀. Then no Hilbert system for L is sound and
strongly complete over X.

✷[d]∀

Proof. Assume for contradiction that the Hilbert system H is sound and strongly complete over X.
Let Σ be as in theorem 10.4 (use the translation −d if necessary to ensure it is a set of L-formulas).
Since every ﬁnite subset of Σ is satisﬁable in X, and H is sound over X, it follows that Σ is H-
consistent. But H is strongly complete over X, so Σ is satisﬁable over X, contradicting the theorem.
✷

70

11 Conclusion

This paper has presented some completeness theorems for various spatial logics over dense-in-themselves
metric spaces. Table 1 summarises them. The numbers in parentheses refer to our earlier results. The
ﬁrst line of the table is of course known, included here to give a more complete picture. For handy
reference, table 2 summarises the ingredients of each logic.

✷

✷

sound
yes
yes

yes
if X connected

S4.UC

S4

S4t

S4µ

Language Logic
L✷
Lµ
Lhti
L✷∀
Lhti
✷∀
L[d]
Lhdti
[d]
L[d]∀
Lhdti
[d]∀

S4t.UC
KD4G1

if X connected
if G1 valid in X
if G1 valid in X
KD4G1t
if X connected & validates G1
KD4G1.UC
KD4G1t.UC if X connected & validates G1

complete
yes [25]
yes (9.1)

yes (9.1)
yes (9.2)

yes (9.2)
yes (9.3)

yes (9.3)
yes (9.5)

strongly complete
yes [18]
yes (10.3)

yes (10.3)
not in general (10.5)

not in general (10.5)
yes (10.2)

yes (10.1)
not in general (10.5)

yes (9.5)

not in general (10.5)

Table 1: Soundness and completeness for a non-empty dense-in-itself metric space X

S4 ✷ϕ → ϕ, ✷ϕ → ✷✷ϕ
µ
t
U
C
G1

ﬁxed point axiom and rule: see deﬁnition 3.1
tangled closure axioms from section 4.3
∀ϕ → ✷ϕ, S5 axioms for ∀, ∀-generalisation rule
∀(✷∗ϕ ∨ ✷∗¬ϕ) → (∀ϕ ∨ ∀¬ϕ), where ✷∗ϕ = ϕ ∧ ✷ϕ

all uniform substitution instances of(cid:0)[d]W1

where Qi = pi ∧ ¬p1−i (i = 0, 1)

✷Qi(cid:1) →W1

i=0

i=0 [d]¬Qi,

Table 2: Parts of the logics

There are of course many problems left open by our work, and we present some of them here.

11.1 Extensions

PROBLEM 11.1. Can the results be extended to more general topological spaces?

For example, consider the topological space T deﬁned as follows. For ordinals α, β write αβ for
n2, and the open sets are unions of sets
n2. This space is not even TD, though it is T0 (that

the set of all maps f : α → β. The set of points of T isSn≤ω
of the form {f ∈ T : f ⊇ g} for some g ∈Sn<ω

is, no two distinct points have the same open neighbourhoods) and dense in itself.

PROBLEM 11.2. What is the logic of T in the various languages discussed above?

71

PROBLEM 11.3. Can the results be extended to stronger languages, for example, the mu-calculus
with [d] and/or ∀, languages with the difference modality or graded modalities, hybrid languages,
and so on? Results of Kudinov [19, 20] are relevant. Recently, Kudinov and Shehtman [21] proved
numerous results about logics of topology with ✷, [d], ∀, and the ‘difference modality’ [6=]. In partic-
ular, they determine the logic of Rn for n ≥ 2 in the language with [d] and [6=]. However, results for
general dense-in-themselves metric spaces appear to be lacking.

11.2 Strong completeness

Our deﬁnition of strong completeness is limited to countable sets of formulas. We have not investi-
gated the extent to which the strong completeness results in section 10 generalise to uncountable sets,
but an argument based on the Erd˝os–Rado theorem [8] will show that for any given dense-in-itself
topological space X and any Hilbert system H that is sound over X, there is an (uncountable) cardi-
nal κ such that the set {✸pi : i < κ} ∪ {✷¬(pi ∧ pj) : i < j < κ} is H-consistent but not satisﬁable
in X. So strong completeness will fail over any given X, for large enough sets of formulas.

PROBLEM 11.4. Let X be a dense-in-itself metric space. For which uncountable cardinals κ can
our strong completeness results for X be extended to sets of at most κ formulas?

Our strong completeness results for languages with [d] are limited to logics with G1. We could

ask for more:
PROBLEM 11.5. Let X be a dense-in-itself metric space and let L be L[d] or Lhdti
of X strongly complete over X?

[d] . Is the L-logic

By theorems 10.1 and 10.2, the answer is ‘yes’ if X validates G1.
We saw in corollary 10.5 that in the language L✷∀, there are many dense-in-themselves metric

spaces over which S4.UC is not strongly complete. So we ask:

PROBLEM 11.6. Can strong completeness for languages with ∀ be proved for each dense-in-itself
metric space in some reasonably large class, and for Rn for n ≥ 1?

PROBLEM 11.7. Is S4.UC strongly complete for Kripke semantics in the language L✷∀?

Even without ∀, the example in section 4.4 can be used to show that strong completeness fails in
Kripke semantics for all our systems for languages containing Lhti
✷ . But we saw that strong complete-
ness does hold for some of these systems over dense-in-themselves metric spaces. Taking the example
of S4t for Lhti
✷ , it is striking that this logic is sound and complete for two different semantics (the class
of ﬁnite S4 frames, and any non-empty dense-in-itself metric space), but strongly complete for only
the latter.

PROBLEM 11.8. Is there any general connection between strong completeness for topological se-
mantics and for Kripke semantics?

11.3 Complexity

Decidability of the logics in table 1 follows from the ﬁnite model property results of section 4 and
their ﬁnite (schema) axiomatisations. But we have not investigated their complexity.

PROBLEM 11.9. What is the complexity of the logics discussed in this paper?

Of course, the complexity of some are known (e.g., S4 is PSPACE-complete).

72

Acknowledgments

We would like to thank Nick Bezhanishvili for stimulating conversations and for graciously sharing
his interest in spatial semantics for the mu-calculus, and Valentin Shehtman for some inspiring lectures
on spatial logic and help with references. The second author thanks the School of Mathematics and
Statistics at the Victoria University of Wellington for their warm and generous hospitality during his
visit in January–March 2014 when the authors worked on the research presented here, and the UK
EPSRC for an overseas travel grant, EP-L020750-1, which supported this visit.

References

[1] M. Aiello, J. van Benthem, and G. Bezhanishvili, Reasoning about space: the modal way, J.

Logic Computat. 13 (2003), 889–920.

[2] C. E. Aull and W. J. Thron, Separation axioms between T0 and T1, Indagationes Mathematicae

(Proceedings) 65 (1962), 26–37.

[3] G. Bezhanishvili, L. Esakia, and D. Gabelaia, Some results on modal axiomatization and deﬁn-

ability for topological spaces, Studia Logica 81 (2005), 325–355.

[4] G. Bezhanishvili and M. Gehrke, A new proof of completeness of S4 with respect to the real line,

Tech. Report PP-2002-06, ILLC, Amsterdam, 2002.

[5] G. Bezhanishvili and J. Lucero-Bryan, More on d-logics of subspaces of the rational numbers,

Notre Dame Journal of Formal Logic 53 (2012), 319–345.

[6] J. Bradﬁeld and C. Stirling, Modal mu-calculi, Handbook of Modal Logic (J. van Benthem,
P. Blackburn, and F. Wolter, eds.), Studies in Logic and Practical Reasoning, vol. 3, Elsevier,
Amsterdam, 2007, pp. 721–756.

[7] A. Dawar and M. Otto, Modal characterisation theorems over special classes of frames, Ann.

Pure. Appl. Logic 161 (2009), 1–42.

[8] P. Erd˝os and R. Rado, A partition calculus in set theory, Bull. Amer. Math. Soc. 62 (1956),

427–489.

[9] L. Esakia, Intuitionistic logic and modality via topology, Ann. Pure. Appl. Logic 127 (2004),

155–170.

[10] D. Fernández-Duque, On the modal deﬁnability of simulability by ﬁnite transitive models, Studia

Logica 98 (2011), 347–373.

[11]

[12]

[13]

, Tangled modal logic for spatial reasoning, Proc. IJCAI 2011 (Toby Walsh, ed.), AAAI

Press/IJCAI, 2011, pp. 857–862.

, A sound and complete axiomatization for dynamic topological logic, J. Symbolic Logic

77 (2012), 947–969.

, Tangled modal logic for topological dynamics, Ann. Pure. Appl. Logic 163 (2012),

467–481.

73

[14] S. Givant and P. Halmos, Introduction to boolean algebras, Undergraduate Texts in Mathematics,

Springer New York, 2009.

[15] I. Hodkinson, Simple completeness proofs for some spatial logics of the real line, Proc. 12th
Asian Logic Conference (R. Downey, J. Brendle, R. Goldblatt, and B. Kim, eds.), World Scien-
tiﬁc, 2013, pp. 155–177.

[16] D. Janin and I. Walukiewicz, On the expressive completeness of

mu-calculus with respect
nari
www.labri.fr/perso/igw/Papers/igw-mu-msol.ps, pp. 263–277.

eds.), LNCS, vol. 1119, Springer,

and V. Sassone,

second order

to monadic

the propositional
logic, CONCUR (U. Monta-
from

1996, Available

[17] D. Kozen, Results on the propositional mu-calculus, Theoretical Computer Science 27 (1983),

333–354.

[18] P. Kremer, Strong completeness of S4 for any dense-in-itself metric space, Rev. Symbolic Logic

6 (2013), 545–570.

[19] A. Kudinov, Topological modal logics with difference modality, Advances in Modal Logic
(G. Governatori, I. Hodkinson, and Y. Venema, eds.), vol. 6, College Publications, 2006,
pp. 319–332.

[20]

, Topological modal logic of R with inequality, Russian Mathematical Surveys 63 (2008),

163–166.

[21] A. Kudinov and V. Shehtman, Derivational modal logics with the difference modality, Leo
Esakia on Duality in Modal and Intuitionistic Logics (G. Bezhanishvili, ed.), Outstanding Con-
tributions to Logic, vol. 4, Springer, 2014, pp. 291–334.

[22] T.

and D.
logic:

Lando
ical modal
http://philosophy.berkeley.edu/file/698/FractalCompletenessTechniques.pdf,
2011.

completeness
and
tree,

techniques
the

Sarenac,
Koch

topolog-
preprint,

in
line,

real

Fractal

curve,

limit

[23] J. G. Lucero-Bryan, The d-logic of the real line, J. Logic Computat. 23 (2013), 121–156.

[24] J.C.C. McKinsey, A solution of the decision problem for the Lewis systems S2 and S4, with an

application to topology, J. Symbolic Logic 6 (1941), 117–124.

[25] J.C.C. McKinsey and A. Tarski, The algebra of topology, Annals of Mathematics 45 (1944),

141–191.

[26]

, On closed elements in closure algebras, Annals of Mathematics 47 (1946), 122–162.

[27] G. Mints, A completeness proof

for propositional S4 in Cantor space, Logic at Work
(E. Orłowska, ed.), Studies in Fuzziness and Soft Computing, vol. 24, Physica-Verlag, Heidel-
berg/New York, 1998, Essays dedicated to the memory of Elena Rasiowa. ISBN 3-7908-1164-5,
pp. 79–88.

[28] G. Mints and T. Zhang, A proof of topological completeness for S4 in (0, 1), Ann. Pure. Appl.

Logic 133 (2005), 231–245.

74

[29] H. Rasiowa and R. Sikorski, The mathematics of metamathematics, Pa´nstwowe Wydawnictwo

Naukowe, Warszawa, 1963.

[30] K. Segerberg, Decidability of S4.1, Theoria 34 (1968), 7–20.

[31] V. B. Shehtman, Derived sets in euclidean spaces and modal logic, Tech. Report X-1990-05,

University of Amsterdam, 1990.

379.

[32]

[33]

, «Everywhere» and «Here», Journal of Applied Non-classical Logics 9 (1999), 369–

, Modal logic of topological spaces, habilitation, Moscow, 2000, in Russian.

[34] S. Slavnov, On completeness of dynamic topological logic, Moscow Mathematical Journal 5

(2005), 477–492.

[35] T-C. Tang, Algebraic postulates and a geometric interpretation for the Lewis calculus of strict

implication, Bulletin of the American Mathematical Society 44 (1938), 737–744.

[36] A. Tarski, Der Aussagenkalkül und die Topologie, Fundamenta Mathematicae 31 (1938), 103–

134.

[37]

, A lattice-theoretical ﬁxpoint theorem and its applications, Paciﬁc Journal of Mathemat-

ics 5 (1955), 285–309.

[38] P. Urysohn, Zum Metrisationsproblem, Mathematische Annalen 94 (1925), 309–315.

[39] I. Walukiewicz, Completeness of Kozen’s axiomatisation of the propositional µ-calculus, In-

form. and Comput. 157 (2000), no. 1-2, 142–182, LICS 1995 (San Diego, CA).

[40] M. Zakharyaschev, A sufﬁcient condition for the ﬁnite model property of modal logics above K4,

Logic J. IGPL 1 (1993), 13–21.

75

